(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ky={exports:{}},Kl={},Py={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo=Symbol.for("react.element"),W1=Symbol.for("react.portal"),q1=Symbol.for("react.fragment"),$1=Symbol.for("react.strict_mode"),H1=Symbol.for("react.profiler"),G1=Symbol.for("react.provider"),K1=Symbol.for("react.context"),Q1=Symbol.for("react.forward_ref"),Y1=Symbol.for("react.suspense"),X1=Symbol.for("react.memo"),J1=Symbol.for("react.lazy"),qp=Symbol.iterator;function Z1(t){return t===null||typeof t!="object"?null:(t=qp&&t[qp]||t["@@iterator"],typeof t=="function"?t:null)}var by={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jy=Object.assign,Ny={};function Xi(t,e,n){this.props=t,this.context=e,this.refs=Ny,this.updater=n||by}Xi.prototype.isReactComponent={};Xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Dy(){}Dy.prototype=Xi.prototype;function od(t,e,n){this.props=t,this.context=e,this.refs=Ny,this.updater=n||by}var ad=od.prototype=new Dy;ad.constructor=od;jy(ad,Xi.prototype);ad.isPureReactComponent=!0;var $p=Array.isArray,Vy=Object.prototype.hasOwnProperty,ld={current:null},Ly={key:!0,ref:!0,__self:!0,__source:!0};function Oy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Vy.call(e,r)&&!Ly.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:bo,type:t,key:s,ref:o,props:i,_owner:ld.current}}function eE(t,e){return{$$typeof:bo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cd(t){return typeof t=="object"&&t!==null&&t.$$typeof===bo}function tE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hp=/\/+/g;function nu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tE(""+t.key):e.toString(36)}function ja(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bo:case W1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+nu(o,0):r,$p(i)?(n="",t!=null&&(n=t.replace(Hp,"$&/")+"/"),ja(i,e,n,"",function(d){return d})):i!=null&&(cd(i)&&(i=eE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Hp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",$p(t))for(var c=0;c<t.length;c++){s=t[c];var u=r+nu(s,c);o+=ja(s,e,n,u,i)}else if(u=Z1(t),typeof u=="function")for(t=u.call(t),c=0;!(s=t.next()).done;)s=s.value,u=r+nu(s,c++),o+=ja(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function la(t,e,n){if(t==null)return t;var r=[],i=0;return ja(t,r,"","",function(s){return e.call(n,s,i++)}),r}function nE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ct={current:null},Na={transition:null},rE={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:Na,ReactCurrentOwner:ld};function My(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:la,forEach:function(t,e,n){la(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return la(t,function(){e++}),e},toArray:function(t){return la(t,function(e){return e})||[]},only:function(t){if(!cd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Xi;te.Fragment=q1;te.Profiler=H1;te.PureComponent=od;te.StrictMode=$1;te.Suspense=Y1;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rE;te.act=My;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jy({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ld.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Vy.call(e,u)&&!Ly.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:bo,type:t.type,key:i,ref:s,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:K1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G1,_context:t},t.Consumer=t};te.createElement=Oy;te.createFactory=function(t){var e=Oy.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:Q1,render:t}};te.isValidElement=cd;te.lazy=function(t){return{$$typeof:J1,_payload:{_status:-1,_result:t},_init:nE}};te.memo=function(t,e){return{$$typeof:X1,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Na.transition;Na.transition={};try{t()}finally{Na.transition=e}};te.unstable_act=My;te.useCallback=function(t,e){return ct.current.useCallback(t,e)};te.useContext=function(t){return ct.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return ct.current.useDeferredValue(t)};te.useEffect=function(t,e){return ct.current.useEffect(t,e)};te.useId=function(){return ct.current.useId()};te.useImperativeHandle=function(t,e,n){return ct.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return ct.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return ct.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return ct.current.useMemo(t,e)};te.useReducer=function(t,e,n){return ct.current.useReducer(t,e,n)};te.useRef=function(t){return ct.current.useRef(t)};te.useState=function(t){return ct.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return ct.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return ct.current.useTransition()};te.version="18.3.1";Py.exports=te;var ee=Py.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE=ee,sE=Symbol.for("react.element"),oE=Symbol.for("react.fragment"),aE=Object.prototype.hasOwnProperty,lE=iE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cE={key:!0,ref:!0,__self:!0,__source:!0};function Fy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)aE.call(e,r)&&!cE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:sE,type:t,key:s,ref:o,props:i,_owner:lE.current}}Kl.Fragment=oE;Kl.jsx=Fy;Kl.jsxs=Fy;ky.exports=Kl;var a=ky.exports,Uy={exports:{}},At={},By={exports:{}},zy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,H){var J=O.length;O.push(H);e:for(;0<J;){var ue=J-1>>>1,fe=O[ue];if(0<i(fe,H))O[ue]=H,O[J]=fe,J=ue;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var H=O[0],J=O.pop();if(J!==H){O[0]=J;e:for(var ue=0,fe=O.length,Kt=fe>>>1;ue<Kt;){var Rt=2*(ue+1)-1,Ar=O[Rt],Ot=Rt+1,bn=O[Ot];if(0>i(Ar,J))Ot<fe&&0>i(bn,Ar)?(O[ue]=bn,O[Ot]=J,ue=Ot):(O[ue]=Ar,O[Rt]=J,ue=Rt);else if(Ot<fe&&0>i(bn,J))O[ue]=bn,O[Ot]=J,ue=Ot;else break e}}return H}function i(O,H){var J=O.sortIndex-H.sortIndex;return J!==0?J:O.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],p=1,m=null,y=3,C=!1,P=!1,N=!1,L=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(O){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=O)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(d)}}function j(O){if(N=!1,T(O),!P)if(n(u)!==null)P=!0,ne(F);else{var H=n(d);H!==null&&ae(j,H.startTime-O)}}function F(O,H){P=!1,N&&(N=!1,S(v),v=-1),C=!0;var J=y;try{for(T(H),m=n(u);m!==null&&(!(m.expirationTime>H)||O&&!A());){var ue=m.callback;if(typeof ue=="function"){m.callback=null,y=m.priorityLevel;var fe=ue(m.expirationTime<=H);H=t.unstable_now(),typeof fe=="function"?m.callback=fe:m===n(u)&&r(u),T(H)}else r(u);m=n(u)}if(m!==null)var Kt=!0;else{var Rt=n(d);Rt!==null&&ae(j,Rt.startTime-H),Kt=!1}return Kt}finally{m=null,y=J,C=!1}}var U=!1,_=null,v=-1,E=5,I=-1;function A(){return!(t.unstable_now()-I<E)}function k(){if(_!==null){var O=t.unstable_now();I=O;var H=!0;try{H=_(!0,O)}finally{H?x():(U=!1,_=null)}}else U=!1}var x;if(typeof w=="function")x=function(){w(k)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,z=Pe.port2;Pe.port1.onmessage=k,x=function(){z.postMessage(null)}}else x=function(){L(k,0)};function ne(O){_=O,U||(U=!0,x())}function ae(O,H){v=L(function(){O(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){P||C||(P=!0,ne(F))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(y){case 1:case 2:case 3:var H=3;break;default:H=y}var J=y;y=H;try{return O()}finally{y=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,H){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var J=y;y=O;try{return H()}finally{y=J}},t.unstable_scheduleCallback=function(O,H,J){var ue=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ue+J:ue):J=ue,O){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=J+fe,O={id:p++,callback:H,priorityLevel:O,startTime:J,expirationTime:fe,sortIndex:-1},J>ue?(O.sortIndex=J,e(d,O),n(u)===null&&O===n(d)&&(N?(S(v),v=-1):N=!0,ae(j,J-ue))):(O.sortIndex=fe,e(u,O),P||C||(P=!0,ne(F))),O},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(O){var H=y;return function(){var J=y;y=H;try{return O.apply(this,arguments)}finally{y=J}}}})(zy);By.exports=zy;var uE=By.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE=ee,St=uE;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wy=new Set,io={};function Zr(t,e){Li(t,e),Li(t+"Capture",e)}function Li(t,e){for(io[t]=e,t=0;t<e.length;t++)Wy.add(e[t])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zu=Object.prototype.hasOwnProperty,dE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gp={},Kp={};function fE(t){return zu.call(Kp,t)?!0:zu.call(Gp,t)?!1:dE.test(t)?Kp[t]=!0:(Gp[t]=!0,!1)}function pE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mE(t,e,n,r){if(e===null||typeof e>"u"||pE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ke[t]=new ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ke[e]=new ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ke[t]=new ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ke[t]=new ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ke[t]=new ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ke[t]=new ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ke[t]=new ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ke[t]=new ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ke[t]=new ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var ud=/[\-:]([a-z])/g;function hd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ud,hd);Ke[e]=new ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ud,hd);Ke[e]=new ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ud,hd);Ke[e]=new ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ke[t]=new ut(t,1,!1,t.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ke[t]=new ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function dd(t,e,n,r){var i=Ke.hasOwnProperty(e)?Ke[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mE(e,n,i,r)&&(n=null),r||i===null?fE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rn=hE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ca=Symbol.for("react.element"),di=Symbol.for("react.portal"),fi=Symbol.for("react.fragment"),fd=Symbol.for("react.strict_mode"),Wu=Symbol.for("react.profiler"),qy=Symbol.for("react.provider"),$y=Symbol.for("react.context"),pd=Symbol.for("react.forward_ref"),qu=Symbol.for("react.suspense"),$u=Symbol.for("react.suspense_list"),md=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),Hy=Symbol.for("react.offscreen"),Qp=Symbol.iterator;function Is(t){return t===null||typeof t!="object"?null:(t=Qp&&t[Qp]||t["@@iterator"],typeof t=="function"?t:null)}var Te=Object.assign,ru;function Ds(t){if(ru===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ru=e&&e[1]||""}return`
`+ru+t}var iu=!1;function su(t,e){if(!t||iu)return"";iu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,c=s.length-1;1<=o&&0<=c&&i[o]!==s[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==s[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==s[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{iu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ds(t):""}function gE(t){switch(t.tag){case 5:return Ds(t.type);case 16:return Ds("Lazy");case 13:return Ds("Suspense");case 19:return Ds("SuspenseList");case 0:case 2:case 15:return t=su(t.type,!1),t;case 11:return t=su(t.type.render,!1),t;case 1:return t=su(t.type,!0),t;default:return""}}function Hu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fi:return"Fragment";case di:return"Portal";case Wu:return"Profiler";case fd:return"StrictMode";case qu:return"Suspense";case $u:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $y:return(t.displayName||"Context")+".Consumer";case qy:return(t._context.displayName||"Context")+".Provider";case pd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case md:return e=t.displayName||null,e!==null?e:Hu(t.type)||"Memo";case Un:e=t._payload,t=t._init;try{return Hu(t(e))}catch{}}return null}function yE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hu(e);case 8:return e===fd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vE(t){var e=Gy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ua(t){t._valueTracker||(t._valueTracker=vE(t))}function Ky(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Gy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gu(t,e){var n=e.checked;return Te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qy(t,e){e=e.checked,e!=null&&dd(t,"checked",e,!1)}function Ku(t,e){Qy(t,e);var n=ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qu(t,e.type,ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qu(t,e,n){(e!=="number"||rl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vs=Array.isArray;function Ii(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ur(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Yu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Vs(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ur(n)}}function Yy(t,e){var n=ur(e.value),r=ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Zp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Xy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Xy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ha,Jy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ha=ha||document.createElement("div"),ha.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ha.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function so(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ws={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_E=["Webkit","ms","Moz","O"];Object.keys(Ws).forEach(function(t){_E.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ws[e]=Ws[t]})});function Zy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ws.hasOwnProperty(t)&&Ws[t]?(""+e).trim():e+"px"}function ev(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Zy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var wE=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ju(t,e){if(e){if(wE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Zu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eh=null;function gd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var th=null,Si=null,Ai=null;function em(t){if(t=Do(t)){if(typeof th!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Zl(e),th(t.stateNode,t.type,e))}}function tv(t){Si?Ai?Ai.push(t):Ai=[t]:Si=t}function nv(){if(Si){var t=Si,e=Ai;if(Ai=Si=null,em(t),e)for(t=0;t<e.length;t++)em(e[t])}}function rv(t,e){return t(e)}function iv(){}var ou=!1;function sv(t,e,n){if(ou)return t(e,n);ou=!0;try{return rv(t,e,n)}finally{ou=!1,(Si!==null||Ai!==null)&&(iv(),nv())}}function oo(t,e){var n=t.stateNode;if(n===null)return null;var r=Zl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var nh=!1;if(wn)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){nh=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{nh=!1}function EE(t,e,n,r,i,s,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var qs=!1,il=null,sl=!1,rh=null,xE={onError:function(t){qs=!0,il=t}};function TE(t,e,n,r,i,s,o,c,u){qs=!1,il=null,EE.apply(xE,arguments)}function IE(t,e,n,r,i,s,o,c,u){if(TE.apply(this,arguments),qs){if(qs){var d=il;qs=!1,il=null}else throw Error(M(198));sl||(sl=!0,rh=d)}}function ei(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ov(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tm(t){if(ei(t)!==t)throw Error(M(188))}function SE(t){var e=t.alternate;if(!e){if(e=ei(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return tm(i),t;if(s===r)return tm(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function av(t){return t=SE(t),t!==null?lv(t):null}function lv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lv(t);if(e!==null)return e;t=t.sibling}return null}var cv=St.unstable_scheduleCallback,nm=St.unstable_cancelCallback,AE=St.unstable_shouldYield,CE=St.unstable_requestPaint,Re=St.unstable_now,RE=St.unstable_getCurrentPriorityLevel,yd=St.unstable_ImmediatePriority,uv=St.unstable_UserBlockingPriority,ol=St.unstable_NormalPriority,kE=St.unstable_LowPriority,hv=St.unstable_IdlePriority,Ql=null,nn=null;function PE(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Ql,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:NE,bE=Math.log,jE=Math.LN2;function NE(t){return t>>>=0,t===0?32:31-(bE(t)/jE|0)|0}var da=64,fa=4194304;function Ls(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function al(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=Ls(c):(s&=o,s!==0&&(r=Ls(s)))}else o=n&~i,o!==0?r=Ls(o):s!==0&&(r=Ls(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wt(e),i=1<<n,r|=t[n],e&=~i;return r}function DE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Wt(s),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=DE(c,e)):u<=e&&(t.expiredLanes|=c),s&=~c}}function ih(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dv(){var t=da;return da<<=1,!(da&4194240)&&(da=64),t}function au(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function jo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wt(e),t[e]=n}function LE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var he=0;function fv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pv,_d,mv,gv,yv,sh=!1,pa=[],Yn=null,Xn=null,Jn=null,ao=new Map,lo=new Map,zn=[],OE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rm(t,e){switch(t){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":ao.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(e.pointerId)}}function As(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Do(e),e!==null&&_d(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ME(t,e,n,r,i){switch(e){case"focusin":return Yn=As(Yn,t,e,n,r,i),!0;case"dragenter":return Xn=As(Xn,t,e,n,r,i),!0;case"mouseover":return Jn=As(Jn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ao.set(s,As(ao.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,lo.set(s,As(lo.get(s)||null,t,e,n,r,i)),!0}return!1}function vv(t){var e=Lr(t.target);if(e!==null){var n=ei(e);if(n!==null){if(e=n.tag,e===13){if(e=ov(n),e!==null){t.blockedOn=e,yv(t.priority,function(){mv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Da(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=oh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);eh=r,n.target.dispatchEvent(r),eh=null}else return e=Do(n),e!==null&&_d(e),t.blockedOn=n,!1;e.shift()}return!0}function im(t,e,n){Da(t)&&n.delete(e)}function FE(){sh=!1,Yn!==null&&Da(Yn)&&(Yn=null),Xn!==null&&Da(Xn)&&(Xn=null),Jn!==null&&Da(Jn)&&(Jn=null),ao.forEach(im),lo.forEach(im)}function Cs(t,e){t.blockedOn===e&&(t.blockedOn=null,sh||(sh=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,FE)))}function co(t){function e(i){return Cs(i,t)}if(0<pa.length){Cs(pa[0],t);for(var n=1;n<pa.length;n++){var r=pa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yn!==null&&Cs(Yn,t),Xn!==null&&Cs(Xn,t),Jn!==null&&Cs(Jn,t),ao.forEach(e),lo.forEach(e),n=0;n<zn.length;n++)r=zn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zn.length&&(n=zn[0],n.blockedOn===null);)vv(n),n.blockedOn===null&&zn.shift()}var Ci=Rn.ReactCurrentBatchConfig,ll=!0;function UE(t,e,n,r){var i=he,s=Ci.transition;Ci.transition=null;try{he=1,wd(t,e,n,r)}finally{he=i,Ci.transition=s}}function BE(t,e,n,r){var i=he,s=Ci.transition;Ci.transition=null;try{he=4,wd(t,e,n,r)}finally{he=i,Ci.transition=s}}function wd(t,e,n,r){if(ll){var i=oh(t,e,n,r);if(i===null)yu(t,e,r,cl,n),rm(t,r);else if(ME(i,t,e,n,r))r.stopPropagation();else if(rm(t,r),e&4&&-1<OE.indexOf(t)){for(;i!==null;){var s=Do(i);if(s!==null&&pv(s),s=oh(t,e,n,r),s===null&&yu(t,e,r,cl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else yu(t,e,r,null,n)}}var cl=null;function oh(t,e,n,r){if(cl=null,t=gd(r),t=Lr(t),t!==null)if(e=ei(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ov(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cl=t,null}function _v(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RE()){case yd:return 1;case uv:return 4;case ol:case kE:return 16;case hv:return 536870912;default:return 16}default:return 16}}var Gn=null,Ed=null,Va=null;function wv(){if(Va)return Va;var t,e=Ed,n=e.length,r,i="value"in Gn?Gn.value:Gn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Va=i.slice(t,1<r?1-r:void 0)}function La(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ma(){return!0}function sm(){return!1}function Ct(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ma:sm,this.isPropagationStopped=sm,this}return Te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ma)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ma)},persist:function(){},isPersistent:ma}),e}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xd=Ct(Ji),No=Te({},Ji,{view:0,detail:0}),zE=Ct(No),lu,cu,Rs,Yl=Te({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Td,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rs&&(Rs&&t.type==="mousemove"?(lu=t.screenX-Rs.screenX,cu=t.screenY-Rs.screenY):cu=lu=0,Rs=t),lu)},movementY:function(t){return"movementY"in t?t.movementY:cu}}),om=Ct(Yl),WE=Te({},Yl,{dataTransfer:0}),qE=Ct(WE),$E=Te({},No,{relatedTarget:0}),uu=Ct($E),HE=Te({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),GE=Ct(HE),KE=Te({},Ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QE=Ct(KE),YE=Te({},Ji,{data:0}),am=Ct(YE),XE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ex(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZE[t])?!!e[t]:!1}function Td(){return ex}var tx=Te({},No,{key:function(t){if(t.key){var e=XE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=La(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Td,charCode:function(t){return t.type==="keypress"?La(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?La(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nx=Ct(tx),rx=Te({},Yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lm=Ct(rx),ix=Te({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Td}),sx=Ct(ix),ox=Te({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),ax=Ct(ox),lx=Te({},Yl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cx=Ct(lx),ux=[9,13,27,32],Id=wn&&"CompositionEvent"in window,$s=null;wn&&"documentMode"in document&&($s=document.documentMode);var hx=wn&&"TextEvent"in window&&!$s,Ev=wn&&(!Id||$s&&8<$s&&11>=$s),cm=String.fromCharCode(32),um=!1;function xv(t,e){switch(t){case"keyup":return ux.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pi=!1;function dx(t,e){switch(t){case"compositionend":return Tv(e);case"keypress":return e.which!==32?null:(um=!0,cm);case"textInput":return t=e.data,t===cm&&um?null:t;default:return null}}function fx(t,e){if(pi)return t==="compositionend"||!Id&&xv(t,e)?(t=wv(),Va=Ed=Gn=null,pi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ev&&e.locale!=="ko"?null:e.data;default:return null}}var px={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!px[t.type]:e==="textarea"}function Iv(t,e,n,r){tv(r),e=ul(e,"onChange"),0<e.length&&(n=new xd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hs=null,uo=null;function mx(t){Vv(t,0)}function Xl(t){var e=yi(t);if(Ky(e))return t}function gx(t,e){if(t==="change")return e}var Sv=!1;if(wn){var hu;if(wn){var du="oninput"in document;if(!du){var dm=document.createElement("div");dm.setAttribute("oninput","return;"),du=typeof dm.oninput=="function"}hu=du}else hu=!1;Sv=hu&&(!document.documentMode||9<document.documentMode)}function fm(){Hs&&(Hs.detachEvent("onpropertychange",Av),uo=Hs=null)}function Av(t){if(t.propertyName==="value"&&Xl(uo)){var e=[];Iv(e,uo,t,gd(t)),sv(mx,e)}}function yx(t,e,n){t==="focusin"?(fm(),Hs=e,uo=n,Hs.attachEvent("onpropertychange",Av)):t==="focusout"&&fm()}function vx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xl(uo)}function _x(t,e){if(t==="click")return Xl(e)}function wx(t,e){if(t==="input"||t==="change")return Xl(e)}function Ex(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:Ex;function ho(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!zu.call(e,i)||!Ht(t[i],e[i]))return!1}return!0}function pm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mm(t,e){var n=pm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pm(n)}}function Cv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Rv(){for(var t=window,e=rl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rl(t.document)}return e}function Sd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xx(t){var e=Rv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Cv(n.ownerDocument.documentElement,n)){if(r!==null&&Sd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=mm(n,s);var o=mm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tx=wn&&"documentMode"in document&&11>=document.documentMode,mi=null,ah=null,Gs=null,lh=!1;function gm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lh||mi==null||mi!==rl(r)||(r=mi,"selectionStart"in r&&Sd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gs&&ho(Gs,r)||(Gs=r,r=ul(ah,"onSelect"),0<r.length&&(e=new xd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mi)))}function ga(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gi={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionend:ga("Transition","TransitionEnd")},fu={},kv={};wn&&(kv=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function Jl(t){if(fu[t])return fu[t];if(!gi[t])return t;var e=gi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kv)return fu[t]=e[n];return t}var Pv=Jl("animationend"),bv=Jl("animationiteration"),jv=Jl("animationstart"),Nv=Jl("transitionend"),Dv=new Map,ym="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(t,e){Dv.set(t,e),Zr(e,[t])}for(var pu=0;pu<ym.length;pu++){var mu=ym[pu],Ix=mu.toLowerCase(),Sx=mu[0].toUpperCase()+mu.slice(1);_r(Ix,"on"+Sx)}_r(Pv,"onAnimationEnd");_r(bv,"onAnimationIteration");_r(jv,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(Nv,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ax=new Set("cancel close invalid load scroll toggle".split(" ").concat(Os));function vm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,IE(r,e,void 0,t),t.currentTarget=null}function Vv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==s&&i.isPropagationStopped())break e;vm(i,c,d),s=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==s&&i.isPropagationStopped())break e;vm(i,c,d),s=u}}}if(sl)throw t=rh,sl=!1,rh=null,t}function ye(t,e){var n=e[fh];n===void 0&&(n=e[fh]=new Set);var r=t+"__bubble";n.has(r)||(Lv(e,t,2,!1),n.add(r))}function gu(t,e,n){var r=0;e&&(r|=4),Lv(n,t,r,e)}var ya="_reactListening"+Math.random().toString(36).slice(2);function fo(t){if(!t[ya]){t[ya]=!0,Wy.forEach(function(n){n!=="selectionchange"&&(Ax.has(n)||gu(n,!1,t),gu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ya]||(e[ya]=!0,gu("selectionchange",!1,e))}}function Lv(t,e,n,r){switch(_v(e)){case 1:var i=UE;break;case 4:i=BE;break;default:i=wd}n=i.bind(null,e,n,t),i=void 0,!nh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function yu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=Lr(c),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}c=c.parentNode}}r=r.return}sv(function(){var d=s,p=gd(n),m=[];e:{var y=Dv.get(t);if(y!==void 0){var C=xd,P=t;switch(t){case"keypress":if(La(n)===0)break e;case"keydown":case"keyup":C=nx;break;case"focusin":P="focus",C=uu;break;case"focusout":P="blur",C=uu;break;case"beforeblur":case"afterblur":C=uu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=om;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=qE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=sx;break;case Pv:case bv:case jv:C=GE;break;case Nv:C=ax;break;case"scroll":C=zE;break;case"wheel":C=cx;break;case"copy":case"cut":case"paste":C=QE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=lm}var N=(e&4)!==0,L=!N&&t==="scroll",S=N?y!==null?y+"Capture":null:y;N=[];for(var w=d,T;w!==null;){T=w;var j=T.stateNode;if(T.tag===5&&j!==null&&(T=j,S!==null&&(j=oo(w,S),j!=null&&N.push(po(w,j,T)))),L)break;w=w.return}0<N.length&&(y=new C(y,P,null,n,p),m.push({event:y,listeners:N}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",y&&n!==eh&&(P=n.relatedTarget||n.fromElement)&&(Lr(P)||P[En]))break e;if((C||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,C?(P=n.relatedTarget||n.toElement,C=d,P=P?Lr(P):null,P!==null&&(L=ei(P),P!==L||P.tag!==5&&P.tag!==6)&&(P=null)):(C=null,P=d),C!==P)){if(N=om,j="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=lm,j="onPointerLeave",S="onPointerEnter",w="pointer"),L=C==null?y:yi(C),T=P==null?y:yi(P),y=new N(j,w+"leave",C,n,p),y.target=L,y.relatedTarget=T,j=null,Lr(p)===d&&(N=new N(S,w+"enter",P,n,p),N.target=T,N.relatedTarget=L,j=N),L=j,C&&P)t:{for(N=C,S=P,w=0,T=N;T;T=ai(T))w++;for(T=0,j=S;j;j=ai(j))T++;for(;0<w-T;)N=ai(N),w--;for(;0<T-w;)S=ai(S),T--;for(;w--;){if(N===S||S!==null&&N===S.alternate)break t;N=ai(N),S=ai(S)}N=null}else N=null;C!==null&&_m(m,y,C,N,!1),P!==null&&L!==null&&_m(m,L,P,N,!0)}}e:{if(y=d?yi(d):window,C=y.nodeName&&y.nodeName.toLowerCase(),C==="select"||C==="input"&&y.type==="file")var F=gx;else if(hm(y))if(Sv)F=wx;else{F=vx;var U=yx}else(C=y.nodeName)&&C.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(F=_x);if(F&&(F=F(t,d))){Iv(m,F,n,p);break e}U&&U(t,y,d),t==="focusout"&&(U=y._wrapperState)&&U.controlled&&y.type==="number"&&Qu(y,"number",y.value)}switch(U=d?yi(d):window,t){case"focusin":(hm(U)||U.contentEditable==="true")&&(mi=U,ah=d,Gs=null);break;case"focusout":Gs=ah=mi=null;break;case"mousedown":lh=!0;break;case"contextmenu":case"mouseup":case"dragend":lh=!1,gm(m,n,p);break;case"selectionchange":if(Tx)break;case"keydown":case"keyup":gm(m,n,p)}var _;if(Id)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else pi?xv(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Ev&&n.locale!=="ko"&&(pi||v!=="onCompositionStart"?v==="onCompositionEnd"&&pi&&(_=wv()):(Gn=p,Ed="value"in Gn?Gn.value:Gn.textContent,pi=!0)),U=ul(d,v),0<U.length&&(v=new am(v,t,null,n,p),m.push({event:v,listeners:U}),_?v.data=_:(_=Tv(n),_!==null&&(v.data=_)))),(_=hx?dx(t,n):fx(t,n))&&(d=ul(d,"onBeforeInput"),0<d.length&&(p=new am("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=_))}Vv(m,e)})}function po(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ul(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=oo(t,n),s!=null&&r.unshift(po(t,s,i)),s=oo(t,e),s!=null&&r.push(po(t,s,i))),t=t.return}return r}function ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _m(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=oo(n,s),u!=null&&o.unshift(po(n,u,c))):i||(u=oo(n,s),u!=null&&o.push(po(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Cx=/\r\n?/g,Rx=/\u0000|\uFFFD/g;function wm(t){return(typeof t=="string"?t:""+t).replace(Cx,`
`).replace(Rx,"")}function va(t,e,n){if(e=wm(e),wm(t)!==e&&n)throw Error(M(425))}function hl(){}var ch=null,uh=null;function hh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dh=typeof setTimeout=="function"?setTimeout:void 0,kx=typeof clearTimeout=="function"?clearTimeout:void 0,Em=typeof Promise=="function"?Promise:void 0,Px=typeof queueMicrotask=="function"?queueMicrotask:typeof Em<"u"?function(t){return Em.resolve(null).then(t).catch(bx)}:dh;function bx(t){setTimeout(function(){throw t})}function vu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),co(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);co(e)}function Zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),tn="__reactFiber$"+Zi,mo="__reactProps$"+Zi,En="__reactContainer$"+Zi,fh="__reactEvents$"+Zi,jx="__reactListeners$"+Zi,Nx="__reactHandles$"+Zi;function Lr(t){var e=t[tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[En]||n[tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xm(t);t!==null;){if(n=t[tn])return n;t=xm(t)}return e}t=n,n=t.parentNode}return null}function Do(t){return t=t[tn]||t[En],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Zl(t){return t[mo]||null}var ph=[],vi=-1;function wr(t){return{current:t}}function _e(t){0>vi||(t.current=ph[vi],ph[vi]=null,vi--)}function me(t,e){vi++,ph[vi]=t.current,t.current=e}var hr={},rt=wr(hr),mt=wr(!1),Wr=hr;function Oi(t,e){var n=t.type.contextTypes;if(!n)return hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function gt(t){return t=t.childContextTypes,t!=null}function dl(){_e(mt),_e(rt)}function Tm(t,e,n){if(rt.current!==hr)throw Error(M(168));me(rt,e),me(mt,n)}function Ov(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,yE(t)||"Unknown",i));return Te({},n,r)}function fl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Wr=rt.current,me(rt,t),me(mt,mt.current),!0}function Im(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=Ov(t,e,Wr),r.__reactInternalMemoizedMergedChildContext=t,_e(mt),_e(rt),me(rt,t)):_e(mt),me(mt,n)}var dn=null,ec=!1,_u=!1;function Mv(t){dn===null?dn=[t]:dn.push(t)}function Dx(t){ec=!0,Mv(t)}function Er(){if(!_u&&dn!==null){_u=!0;var t=0,e=he;try{var n=dn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}dn=null,ec=!1}catch(i){throw dn!==null&&(dn=dn.slice(t+1)),cv(yd,Er),i}finally{he=e,_u=!1}}return null}var _i=[],wi=0,pl=null,ml=0,kt=[],Pt=0,qr=null,pn=1,mn="";function jr(t,e){_i[wi++]=ml,_i[wi++]=pl,pl=t,ml=e}function Fv(t,e,n){kt[Pt++]=pn,kt[Pt++]=mn,kt[Pt++]=qr,qr=t;var r=pn;t=mn;var i=32-Wt(r)-1;r&=~(1<<i),n+=1;var s=32-Wt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,pn=1<<32-Wt(e)+i|n<<i|r,mn=s+t}else pn=1<<s|n<<i|r,mn=t}function Ad(t){t.return!==null&&(jr(t,1),Fv(t,1,0))}function Cd(t){for(;t===pl;)pl=_i[--wi],_i[wi]=null,ml=_i[--wi],_i[wi]=null;for(;t===qr;)qr=kt[--Pt],kt[Pt]=null,mn=kt[--Pt],kt[Pt]=null,pn=kt[--Pt],kt[Pt]=null}var It=null,xt=null,we=!1,Bt=null;function Uv(t,e){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,It=t,xt=Zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,It=t,xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qr!==null?{id:pn,overflow:mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,It=t,xt=null,!0):!1;default:return!1}}function mh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gh(t){if(we){var e=xt;if(e){var n=e;if(!Sm(t,e)){if(mh(t))throw Error(M(418));e=Zn(n.nextSibling);var r=It;e&&Sm(t,e)?Uv(r,n):(t.flags=t.flags&-4097|2,we=!1,It=t)}}else{if(mh(t))throw Error(M(418));t.flags=t.flags&-4097|2,we=!1,It=t}}}function Am(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function _a(t){if(t!==It)return!1;if(!we)return Am(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hh(t.type,t.memoizedProps)),e&&(e=xt)){if(mh(t))throw Bv(),Error(M(418));for(;e;)Uv(t,e),e=Zn(e.nextSibling)}if(Am(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xt=Zn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xt=null}}else xt=It?Zn(t.stateNode.nextSibling):null;return!0}function Bv(){for(var t=xt;t;)t=Zn(t.nextSibling)}function Mi(){xt=It=null,we=!1}function Rd(t){Bt===null?Bt=[t]:Bt.push(t)}var Vx=Rn.ReactCurrentBatchConfig;function ks(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var c=i.refs;o===null?delete c[s]:c[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function wa(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cm(t){var e=t._init;return e(t._payload)}function zv(t){function e(S,w){if(t){var T=S.deletions;T===null?(S.deletions=[w],S.flags|=16):T.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function i(S,w){return S=rr(S,w),S.index=0,S.sibling=null,S}function s(S,w,T){return S.index=T,t?(T=S.alternate,T!==null?(T=T.index,T<w?(S.flags|=2,w):T):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,w,T,j){return w===null||w.tag!==6?(w=Au(T,S.mode,j),w.return=S,w):(w=i(w,T),w.return=S,w)}function u(S,w,T,j){var F=T.type;return F===fi?p(S,w,T.props.children,j,T.key):w!==null&&(w.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Un&&Cm(F)===w.type)?(j=i(w,T.props),j.ref=ks(S,w,T),j.return=S,j):(j=Wa(T.type,T.key,T.props,null,S.mode,j),j.ref=ks(S,w,T),j.return=S,j)}function d(S,w,T,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=Cu(T,S.mode,j),w.return=S,w):(w=i(w,T.children||[]),w.return=S,w)}function p(S,w,T,j,F){return w===null||w.tag!==7?(w=zr(T,S.mode,j,F),w.return=S,w):(w=i(w,T),w.return=S,w)}function m(S,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Au(""+w,S.mode,T),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ca:return T=Wa(w.type,w.key,w.props,null,S.mode,T),T.ref=ks(S,null,w),T.return=S,T;case di:return w=Cu(w,S.mode,T),w.return=S,w;case Un:var j=w._init;return m(S,j(w._payload),T)}if(Vs(w)||Is(w))return w=zr(w,S.mode,T,null),w.return=S,w;wa(S,w)}return null}function y(S,w,T,j){var F=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return F!==null?null:c(S,w,""+T,j);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ca:return T.key===F?u(S,w,T,j):null;case di:return T.key===F?d(S,w,T,j):null;case Un:return F=T._init,y(S,w,F(T._payload),j)}if(Vs(T)||Is(T))return F!==null?null:p(S,w,T,j,null);wa(S,T)}return null}function C(S,w,T,j,F){if(typeof j=="string"&&j!==""||typeof j=="number")return S=S.get(T)||null,c(w,S,""+j,F);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ca:return S=S.get(j.key===null?T:j.key)||null,u(w,S,j,F);case di:return S=S.get(j.key===null?T:j.key)||null,d(w,S,j,F);case Un:var U=j._init;return C(S,w,T,U(j._payload),F)}if(Vs(j)||Is(j))return S=S.get(T)||null,p(w,S,j,F,null);wa(w,j)}return null}function P(S,w,T,j){for(var F=null,U=null,_=w,v=w=0,E=null;_!==null&&v<T.length;v++){_.index>v?(E=_,_=null):E=_.sibling;var I=y(S,_,T[v],j);if(I===null){_===null&&(_=E);break}t&&_&&I.alternate===null&&e(S,_),w=s(I,w,v),U===null?F=I:U.sibling=I,U=I,_=E}if(v===T.length)return n(S,_),we&&jr(S,v),F;if(_===null){for(;v<T.length;v++)_=m(S,T[v],j),_!==null&&(w=s(_,w,v),U===null?F=_:U.sibling=_,U=_);return we&&jr(S,v),F}for(_=r(S,_);v<T.length;v++)E=C(_,S,v,T[v],j),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?v:E.key),w=s(E,w,v),U===null?F=E:U.sibling=E,U=E);return t&&_.forEach(function(A){return e(S,A)}),we&&jr(S,v),F}function N(S,w,T,j){var F=Is(T);if(typeof F!="function")throw Error(M(150));if(T=F.call(T),T==null)throw Error(M(151));for(var U=F=null,_=w,v=w=0,E=null,I=T.next();_!==null&&!I.done;v++,I=T.next()){_.index>v?(E=_,_=null):E=_.sibling;var A=y(S,_,I.value,j);if(A===null){_===null&&(_=E);break}t&&_&&A.alternate===null&&e(S,_),w=s(A,w,v),U===null?F=A:U.sibling=A,U=A,_=E}if(I.done)return n(S,_),we&&jr(S,v),F;if(_===null){for(;!I.done;v++,I=T.next())I=m(S,I.value,j),I!==null&&(w=s(I,w,v),U===null?F=I:U.sibling=I,U=I);return we&&jr(S,v),F}for(_=r(S,_);!I.done;v++,I=T.next())I=C(_,S,v,I.value,j),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?v:I.key),w=s(I,w,v),U===null?F=I:U.sibling=I,U=I);return t&&_.forEach(function(k){return e(S,k)}),we&&jr(S,v),F}function L(S,w,T,j){if(typeof T=="object"&&T!==null&&T.type===fi&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ca:e:{for(var F=T.key,U=w;U!==null;){if(U.key===F){if(F=T.type,F===fi){if(U.tag===7){n(S,U.sibling),w=i(U,T.props.children),w.return=S,S=w;break e}}else if(U.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Un&&Cm(F)===U.type){n(S,U.sibling),w=i(U,T.props),w.ref=ks(S,U,T),w.return=S,S=w;break e}n(S,U);break}else e(S,U);U=U.sibling}T.type===fi?(w=zr(T.props.children,S.mode,j,T.key),w.return=S,S=w):(j=Wa(T.type,T.key,T.props,null,S.mode,j),j.ref=ks(S,w,T),j.return=S,S=j)}return o(S);case di:e:{for(U=T.key;w!==null;){if(w.key===U)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(S,w.sibling),w=i(w,T.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=Cu(T,S.mode,j),w.return=S,S=w}return o(S);case Un:return U=T._init,L(S,w,U(T._payload),j)}if(Vs(T))return P(S,w,T,j);if(Is(T))return N(S,w,T,j);wa(S,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(S,w.sibling),w=i(w,T),w.return=S,S=w):(n(S,w),w=Au(T,S.mode,j),w.return=S,S=w),o(S)):n(S,w)}return L}var Fi=zv(!0),Wv=zv(!1),gl=wr(null),yl=null,Ei=null,kd=null;function Pd(){kd=Ei=yl=null}function bd(t){var e=gl.current;_e(gl),t._currentValue=e}function yh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ri(t,e){yl=t,kd=Ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pt=!0),t.firstContext=null)}function Dt(t){var e=t._currentValue;if(kd!==t)if(t={context:t,memoizedValue:e,next:null},Ei===null){if(yl===null)throw Error(M(308));Ei=t,yl.dependencies={lanes:0,firstContext:t}}else Ei=Ei.next=t;return e}var Or=null;function jd(t){Or===null?Or=[t]:Or.push(t)}function qv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,jd(e)):(n.next=i.next,i.next=n),e.interleaved=n,xn(t,r)}function xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bn=!1;function Nd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $v(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xn(t,n)}return i=r.interleaved,i===null?(e.next=e,jd(r)):(e.next=i.next,i.next=e),r.interleaved=e,xn(t,n)}function Oa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vd(t,n)}}function Rm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vl(t,e,n,r){var i=t.updateQueue;Bn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,p=d=u=null,c=s;do{var y=c.lane,C=c.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:C,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var P=t,N=c;switch(y=e,C=n,N.tag){case 1:if(P=N.payload,typeof P=="function"){m=P.call(C,m,y);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=N.payload,y=typeof P=="function"?P.call(C,m,y):P,y==null)break e;m=Te({},m,y);break e;case 2:Bn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[c]:y.push(c))}else C={eventTime:C,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=C,u=m):p=p.next=C,o|=y;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;y=c,c=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(1);if(p===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Hr|=o,t.lanes=o,t.memoizedState=m}}function km(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var Vo={},rn=wr(Vo),go=wr(Vo),yo=wr(Vo);function Mr(t){if(t===Vo)throw Error(M(174));return t}function Dd(t,e){switch(me(yo,e),me(go,t),me(rn,Vo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xu(e,t)}_e(rn),me(rn,e)}function Ui(){_e(rn),_e(go),_e(yo)}function Hv(t){Mr(yo.current);var e=Mr(rn.current),n=Xu(e,t.type);e!==n&&(me(go,t),me(rn,n))}function Vd(t){go.current===t&&(_e(rn),_e(go))}var Ee=wr(0);function _l(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wu=[];function Ld(){for(var t=0;t<wu.length;t++)wu[t]._workInProgressVersionPrimary=null;wu.length=0}var Ma=Rn.ReactCurrentDispatcher,Eu=Rn.ReactCurrentBatchConfig,$r=0,xe=null,Le=null,ze=null,wl=!1,Ks=!1,vo=0,Lx=0;function Xe(){throw Error(M(321))}function Od(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function Md(t,e,n,r,i,s){if($r=s,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ma.current=t===null||t.memoizedState===null?Ux:Bx,t=n(r,i),Ks){s=0;do{if(Ks=!1,vo=0,25<=s)throw Error(M(301));s+=1,ze=Le=null,e.updateQueue=null,Ma.current=zx,t=n(r,i)}while(Ks)}if(Ma.current=El,e=Le!==null&&Le.next!==null,$r=0,ze=Le=xe=null,wl=!1,e)throw Error(M(300));return t}function Fd(){var t=vo!==0;return vo=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?xe.memoizedState=ze=t:ze=ze.next=t,ze}function Vt(){if(Le===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=ze===null?xe.memoizedState:ze.next;if(e!==null)ze=e,Le=t;else{if(t===null)throw Error(M(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},ze===null?xe.memoizedState=ze=t:ze=ze.next=t}return ze}function _o(t,e){return typeof e=="function"?e(t):e}function xu(t){var e=Vt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=Le,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=o=null,u=null,d=s;do{var p=d.lane;if(($r&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,xe.lanes|=p,Hr|=p}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=c,Ht(r,e.memoizedState)||(pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,xe.lanes|=s,Hr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tu(t){var e=Vt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ht(s,e.memoizedState)||(pt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Gv(){}function Kv(t,e){var n=xe,r=Vt(),i=e(),s=!Ht(r.memoizedState,i);if(s&&(r.memoizedState=i,pt=!0),r=r.queue,Ud(Xv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,wo(9,Yv.bind(null,n,r,i,e),void 0,null),We===null)throw Error(M(349));$r&30||Qv(n,e,i)}return i}function Qv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Yv(t,e,n,r){e.value=n,e.getSnapshot=r,Jv(e)&&Zv(t)}function Xv(t,e,n){return n(function(){Jv(e)&&Zv(t)})}function Jv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function Zv(t){var e=xn(t,1);e!==null&&qt(e,t,1,-1)}function Pm(t){var e=Zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:t},e.queue=t,t=t.dispatch=Fx.bind(null,xe,t),[e.memoizedState,t]}function wo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function e_(){return Vt().memoizedState}function Fa(t,e,n,r){var i=Zt();xe.flags|=t,i.memoizedState=wo(1|e,n,void 0,r===void 0?null:r)}function tc(t,e,n,r){var i=Vt();r=r===void 0?null:r;var s=void 0;if(Le!==null){var o=Le.memoizedState;if(s=o.destroy,r!==null&&Od(r,o.deps)){i.memoizedState=wo(e,n,s,r);return}}xe.flags|=t,i.memoizedState=wo(1|e,n,s,r)}function bm(t,e){return Fa(8390656,8,t,e)}function Ud(t,e){return tc(2048,8,t,e)}function t_(t,e){return tc(4,2,t,e)}function n_(t,e){return tc(4,4,t,e)}function r_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function i_(t,e,n){return n=n!=null?n.concat([t]):null,tc(4,4,r_.bind(null,e,t),n)}function Bd(){}function s_(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Od(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function o_(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Od(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function a_(t,e,n){return $r&21?(Ht(n,e)||(n=dv(),xe.lanes|=n,Hr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pt=!0),t.memoizedState=n)}function Ox(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=Eu.transition;Eu.transition={};try{t(!1),e()}finally{he=n,Eu.transition=r}}function l_(){return Vt().memoizedState}function Mx(t,e,n){var r=nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},c_(t))u_(e,n);else if(n=qv(t,e,n,r),n!==null){var i=lt();qt(n,t,r,i),h_(n,e,r)}}function Fx(t,e,n){var r=nr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(c_(t))u_(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,c=s(o,n);if(i.hasEagerState=!0,i.eagerState=c,Ht(c,o)){var u=e.interleaved;u===null?(i.next=i,jd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=qv(t,e,i,r),n!==null&&(i=lt(),qt(n,t,r,i),h_(n,e,r))}}function c_(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function u_(t,e){Ks=wl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function h_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vd(t,n)}}var El={readContext:Dt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},Ux={readContext:Dt,useCallback:function(t,e){return Zt().memoizedState=[t,e===void 0?null:e],t},useContext:Dt,useEffect:bm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fa(4194308,4,r_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fa(4,2,t,e)},useMemo:function(t,e){var n=Zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Mx.bind(null,xe,t),[r.memoizedState,t]},useRef:function(t){var e=Zt();return t={current:t},e.memoizedState=t},useState:Pm,useDebugValue:Bd,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=Pm(!1),e=t[0];return t=Ox.bind(null,t[1]),Zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xe,i=Zt();if(we){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),We===null)throw Error(M(349));$r&30||Qv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,bm(Xv.bind(null,r,s,t),[t]),r.flags|=2048,wo(9,Yv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zt(),e=We.identifierPrefix;if(we){var n=mn,r=pn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Lx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Bx={readContext:Dt,useCallback:s_,useContext:Dt,useEffect:Ud,useImperativeHandle:i_,useInsertionEffect:t_,useLayoutEffect:n_,useMemo:o_,useReducer:xu,useRef:e_,useState:function(){return xu(_o)},useDebugValue:Bd,useDeferredValue:function(t){var e=Vt();return a_(e,Le.memoizedState,t)},useTransition:function(){var t=xu(_o)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:Gv,useSyncExternalStore:Kv,useId:l_,unstable_isNewReconciler:!1},zx={readContext:Dt,useCallback:s_,useContext:Dt,useEffect:Ud,useImperativeHandle:i_,useInsertionEffect:t_,useLayoutEffect:n_,useMemo:o_,useReducer:Tu,useRef:e_,useState:function(){return Tu(_o)},useDebugValue:Bd,useDeferredValue:function(t){var e=Vt();return Le===null?e.memoizedState=t:a_(e,Le.memoizedState,t)},useTransition:function(){var t=Tu(_o)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:Gv,useSyncExternalStore:Kv,useId:l_,unstable_isNewReconciler:!1};function Ft(t,e){if(t&&t.defaultProps){e=Te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nc={isMounted:function(t){return(t=t._reactInternals)?ei(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lt(),i=nr(t),s=vn(r,i);s.payload=e,n!=null&&(s.callback=n),e=er(t,s,i),e!==null&&(qt(e,t,i,r),Oa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lt(),i=nr(t),s=vn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=er(t,s,i),e!==null&&(qt(e,t,i,r),Oa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lt(),r=nr(t),i=vn(n,r);i.tag=2,e!=null&&(i.callback=e),e=er(t,i,r),e!==null&&(qt(e,t,r,n),Oa(e,t,r))}};function jm(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ho(n,r)||!ho(i,s):!0}function d_(t,e,n){var r=!1,i=hr,s=e.contextType;return typeof s=="object"&&s!==null?s=Dt(s):(i=gt(e)?Wr:rt.current,r=e.contextTypes,s=(r=r!=null)?Oi(t,i):hr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Nm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nc.enqueueReplaceState(e,e.state,null)}function _h(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Nd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Dt(s):(s=gt(e)?Wr:rt.current,i.context=Oi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&nc.enqueueReplaceState(i,i.state,null),vl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bi(t,e){try{var n="",r=e;do n+=gE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Iu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Wx=typeof WeakMap=="function"?WeakMap:Map;function f_(t,e,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Tl||(Tl=!0,Ph=r),wh(t,e)},n}function p_(t,e,n){n=vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){wh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){wh(t,e),typeof r!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Dm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Wx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=rT.bind(null,t,e,n),e.then(t,t))}function Vm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Lm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vn(-1,1),e.tag=2,er(n,e,1))),n.lanes|=1),t)}var qx=Rn.ReactCurrentOwner,pt=!1;function at(t,e,n,r){e.child=t===null?Wv(e,null,n,r):Fi(e,t.child,n,r)}function Om(t,e,n,r,i){n=n.render;var s=e.ref;return Ri(e,i),r=Md(t,e,n,r,s,i),n=Fd(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tn(t,e,i)):(we&&n&&Ad(e),e.flags|=1,at(t,e,r,i),e.child)}function Mm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Qd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,m_(t,e,s,r,i)):(t=Wa(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ho,n(o,r)&&t.ref===e.ref)return Tn(t,e,i)}return e.flags|=1,t=rr(s,r),t.ref=e.ref,t.return=e,e.child=t}function m_(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ho(s,r)&&t.ref===e.ref)if(pt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(pt=!0);else return e.lanes=t.lanes,Tn(t,e,i)}return Eh(t,e,n,r,i)}function g_(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Ti,wt),wt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(Ti,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,me(Ti,wt),wt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,me(Ti,wt),wt|=r;return at(t,e,i,n),e.child}function y_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Eh(t,e,n,r,i){var s=gt(n)?Wr:rt.current;return s=Oi(e,s),Ri(e,i),n=Md(t,e,n,r,s,i),r=Fd(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tn(t,e,i)):(we&&r&&Ad(e),e.flags|=1,at(t,e,n,i),e.child)}function Fm(t,e,n,r,i){if(gt(n)){var s=!0;fl(e)}else s=!1;if(Ri(e,i),e.stateNode===null)Ua(t,e),d_(e,n,r),_h(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Dt(d):(d=gt(n)?Wr:rt.current,d=Oi(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Nm(e,o,r,d),Bn=!1;var y=e.memoizedState;o.state=y,vl(e,r,o,i),u=e.memoizedState,c!==r||y!==u||mt.current||Bn?(typeof p=="function"&&(vh(e,n,p,r),u=e.memoizedState),(c=Bn||jm(e,n,c,r,y,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$v(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Ft(e.type,c),o.props=d,m=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Dt(u):(u=gt(n)?Wr:rt.current,u=Oi(e,u));var C=n.getDerivedStateFromProps;(p=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||y!==u)&&Nm(e,o,r,u),Bn=!1,y=e.memoizedState,o.state=y,vl(e,r,o,i);var P=e.memoizedState;c!==m||y!==P||mt.current||Bn?(typeof C=="function"&&(vh(e,n,C,r),P=e.memoizedState),(d=Bn||jm(e,n,d,r,y,P,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return xh(t,e,n,r,s,i)}function xh(t,e,n,r,i,s){y_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Im(e,n,!1),Tn(t,e,s);r=e.stateNode,qx.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fi(e,t.child,null,s),e.child=Fi(e,null,c,s)):at(t,e,c,s),e.memoizedState=r.state,i&&Im(e,n,!0),e.child}function v_(t){var e=t.stateNode;e.pendingContext?Tm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tm(t,e.context,!1),Dd(t,e.containerInfo)}function Um(t,e,n,r,i){return Mi(),Rd(i),e.flags|=256,at(t,e,n,r),e.child}var Th={dehydrated:null,treeContext:null,retryLane:0};function Ih(t){return{baseLanes:t,cachePool:null,transitions:null}}function __(t,e,n){var r=e.pendingProps,i=Ee.current,s=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),me(Ee,i&1),t===null)return gh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=sc(o,r,0,null),t=zr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ih(n),e.memoizedState=Th,t):zd(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return $x(t,e,o,r,c,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=rr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=rr(c,s):(s=zr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ih(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Th,r}return s=t.child,t=s.sibling,r=rr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zd(t,e){return e=sc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ea(t,e,n,r){return r!==null&&Rd(r),Fi(e,t.child,null,n),t=zd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $x(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Iu(Error(M(422))),Ea(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=sc({mode:"visible",children:r.children},i,0,null),s=zr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fi(e,t.child,null,o),e.child.memoizedState=Ih(o),e.memoizedState=Th,s);if(!(e.mode&1))return Ea(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(M(419)),r=Iu(s,r,void 0),Ea(t,e,o,r)}if(c=(o&t.childLanes)!==0,pt||c){if(r=We,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xn(t,i),qt(r,t,i,-1))}return Kd(),r=Iu(Error(M(421))),Ea(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=iT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,xt=Zn(i.nextSibling),It=e,we=!0,Bt=null,t!==null&&(kt[Pt++]=pn,kt[Pt++]=mn,kt[Pt++]=qr,pn=t.id,mn=t.overflow,qr=e),e=zd(e,r.children),e.flags|=4096,e)}function Bm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yh(t.return,e,n)}function Su(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function w_(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(at(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bm(t,n,e);else if(t.tag===19)Bm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&_l(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Su(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_l(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Su(e,!0,n,null,s);break;case"together":Su(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ua(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Hx(t,e,n){switch(e.tag){case 3:v_(e),Mi();break;case 5:Hv(e);break;case 1:gt(e.type)&&fl(e);break;case 4:Dd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;me(gl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?__(t,e,n):(me(Ee,Ee.current&1),t=Tn(t,e,n),t!==null?t.sibling:null);me(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return w_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),me(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,g_(t,e,n)}return Tn(t,e,n)}var E_,Sh,x_,T_;E_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sh=function(){};x_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Mr(rn.current);var s=null;switch(n){case"input":i=Gu(t,i),r=Gu(t,r),s=[];break;case"select":i=Te({},i,{value:void 0}),r=Te({},r,{value:void 0}),s=[];break;case"textarea":i=Yu(t,i),r=Yu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hl)}Ju(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(io.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(io.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ye("scroll",t),s||c===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};T_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ps(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Gx(t,e,n){var r=e.pendingProps;switch(Cd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return gt(e.type)&&dl(),Je(e),null;case 3:return r=e.stateNode,Ui(),_e(mt),_e(rt),Ld(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_a(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bt!==null&&(Nh(Bt),Bt=null))),Sh(t,e),Je(e),null;case 5:Vd(e);var i=Mr(yo.current);if(n=e.type,t!==null&&e.stateNode!=null)x_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Je(e),null}if(t=Mr(rn.current),_a(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[tn]=e,r[mo]=s,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(i=0;i<Os.length;i++)ye(Os[i],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":Yp(r,s),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ye("invalid",r);break;case"textarea":Jp(r,s),ye("invalid",r)}Ju(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&va(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&va(r.textContent,c,t),i=["children",""+c]):io.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ye("scroll",r)}switch(n){case"input":ua(r),Xp(r,s,!0);break;case"textarea":ua(r),Zp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=hl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Xy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tn]=e,t[mo]=r,E_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Zu(n,r),n){case"dialog":ye("cancel",t),ye("close",t),i=r;break;case"iframe":case"object":case"embed":ye("load",t),i=r;break;case"video":case"audio":for(i=0;i<Os.length;i++)ye(Os[i],t);i=r;break;case"source":ye("error",t),i=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),i=r;break;case"details":ye("toggle",t),i=r;break;case"input":Yp(t,r),i=Gu(t,r),ye("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Te({},r,{value:void 0}),ye("invalid",t);break;case"textarea":Jp(t,r),i=Yu(t,r),ye("invalid",t);break;default:i=r}Ju(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var u=c[s];s==="style"?ev(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Jy(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&so(t,u):typeof u=="number"&&so(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(io.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ye("scroll",t):u!=null&&dd(t,s,u,o))}switch(n){case"input":ua(t),Xp(t,r,!1);break;case"textarea":ua(t),Zp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ur(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ii(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Je(e),null;case 6:if(t&&e.stateNode!=null)T_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=Mr(yo.current),Mr(rn.current),_a(e)){if(r=e.stateNode,n=e.memoizedProps,r[tn]=e,(s=r.nodeValue!==n)&&(t=It,t!==null))switch(t.tag){case 3:va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&va(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=e,e.stateNode=r}return Je(e),null;case 13:if(_e(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&xt!==null&&e.mode&1&&!(e.flags&128))Bv(),Mi(),e.flags|=98560,s=!1;else if(s=_a(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[tn]=e}else Mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),s=!1}else Bt!==null&&(Nh(Bt),Bt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Oe===0&&(Oe=3):Kd())),e.updateQueue!==null&&(e.flags|=4),Je(e),null);case 4:return Ui(),Sh(t,e),t===null&&fo(e.stateNode.containerInfo),Je(e),null;case 10:return bd(e.type._context),Je(e),null;case 17:return gt(e.type)&&dl(),Je(e),null;case 19:if(_e(Ee),s=e.memoizedState,s===null)return Je(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ps(s,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_l(t),o!==null){for(e.flags|=128,Ps(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(Ee,Ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&Re()>zi&&(e.flags|=128,r=!0,Ps(s,!1),e.lanes=4194304)}else{if(!r)if(t=_l(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ps(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!we)return Je(e),null}else 2*Re()-s.renderingStartTime>zi&&n!==1073741824&&(e.flags|=128,r=!0,Ps(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Re(),e.sibling=null,n=Ee.current,me(Ee,r?n&1|2:n&1),e):(Je(e),null);case 22:case 23:return Gd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function Kx(t,e){switch(Cd(e),e.tag){case 1:return gt(e.type)&&dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ui(),_e(mt),_e(rt),Ld(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vd(e),null;case 13:if(_e(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Ee),null;case 4:return Ui(),null;case 10:return bd(e.type._context),null;case 22:case 23:return Gd(),null;case 24:return null;default:return null}}var xa=!1,tt=!1,Qx=typeof WeakSet=="function"?WeakSet:Set,$=null;function xi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function Ah(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var zm=!1;function Yx(t,e){if(ch=ll,t=Rv(),Sd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,p=0,m=t,y=null;t:for(;;){for(var C;m!==n||i!==0&&m.nodeType!==3||(c=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(C=m.firstChild)!==null;)y=m,m=C;for(;;){if(m===t)break t;if(y===n&&++d===i&&(c=o),y===s&&++p===r&&(u=o),(C=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=C}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(uh={focusedElem:t,selectionRange:n},ll=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var N=P.memoizedProps,L=P.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?N:Ft(e.type,N),L);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(j){Ae(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return P=zm,zm=!1,P}function Qs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ah(e,n,s)}i=i.next}while(i!==r)}}function rc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ch(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function I_(t){var e=t.alternate;e!==null&&(t.alternate=null,I_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tn],delete e[mo],delete e[fh],delete e[jx],delete e[Nx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function S_(t){return t.tag===5||t.tag===3||t.tag===4}function Wm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||S_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hl));else if(r!==4&&(t=t.child,t!==null))for(Rh(t,e,n),t=t.sibling;t!==null;)Rh(t,e,n),t=t.sibling}function kh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kh(t,e,n),t=t.sibling;t!==null;)kh(t,e,n),t=t.sibling}var qe=null,Ut=!1;function Mn(t,e,n){for(n=n.child;n!==null;)A_(t,e,n),n=n.sibling}function A_(t,e,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Ql,n)}catch{}switch(n.tag){case 5:tt||xi(n,e);case 6:var r=qe,i=Ut;qe=null,Mn(t,e,n),qe=r,Ut=i,qe!==null&&(Ut?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Ut?(t=qe,n=n.stateNode,t.nodeType===8?vu(t.parentNode,n):t.nodeType===1&&vu(t,n),co(t)):vu(qe,n.stateNode));break;case 4:r=qe,i=Ut,qe=n.stateNode.containerInfo,Ut=!0,Mn(t,e,n),qe=r,Ut=i;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ah(n,e,o),i=i.next}while(i!==r)}Mn(t,e,n);break;case 1:if(!tt&&(xi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ae(n,e,c)}Mn(t,e,n);break;case 21:Mn(t,e,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,Mn(t,e,n),tt=r):Mn(t,e,n);break;default:Mn(t,e,n)}}function qm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Qx),e.forEach(function(r){var i=sT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:qe=c.stateNode,Ut=!1;break e;case 3:qe=c.stateNode.containerInfo,Ut=!0;break e;case 4:qe=c.stateNode.containerInfo,Ut=!0;break e}c=c.return}if(qe===null)throw Error(M(160));A_(s,o,i),qe=null,Ut=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Ae(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)C_(e,t),e=e.sibling}function C_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),Xt(t),r&4){try{Qs(3,t,t.return),rc(3,t)}catch(N){Ae(t,t.return,N)}try{Qs(5,t,t.return)}catch(N){Ae(t,t.return,N)}}break;case 1:Mt(e,t),Xt(t),r&512&&n!==null&&xi(n,n.return);break;case 5:if(Mt(e,t),Xt(t),r&512&&n!==null&&xi(n,n.return),t.flags&32){var i=t.stateNode;try{so(i,"")}catch(N){Ae(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&Qy(i,s),Zu(c,o);var d=Zu(c,s);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?ev(i,m):p==="dangerouslySetInnerHTML"?Jy(i,m):p==="children"?so(i,m):dd(i,p,m,d)}switch(c){case"input":Ku(i,s);break;case"textarea":Yy(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var C=s.value;C!=null?Ii(i,!!s.multiple,C,!1):y!==!!s.multiple&&(s.defaultValue!=null?Ii(i,!!s.multiple,s.defaultValue,!0):Ii(i,!!s.multiple,s.multiple?[]:"",!1))}i[mo]=s}catch(N){Ae(t,t.return,N)}}break;case 6:if(Mt(e,t),Xt(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){Ae(t,t.return,N)}}break;case 3:if(Mt(e,t),Xt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{co(e.containerInfo)}catch(N){Ae(t,t.return,N)}break;case 4:Mt(e,t),Xt(t);break;case 13:Mt(e,t),Xt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($d=Re())),r&4&&qm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(tt=(d=tt)||p,Mt(e,t),tt=d):Mt(e,t),Xt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for($=t,p=t.child;p!==null;){for(m=$=p;$!==null;){switch(y=$,C=y.child,y.tag){case 0:case 11:case 14:case 15:Qs(4,y,y.return);break;case 1:xi(y,y.return);var P=y.stateNode;if(typeof P.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(N){Ae(r,n,N)}}break;case 5:xi(y,y.return);break;case 22:if(y.memoizedState!==null){Hm(m);continue}}C!==null?(C.return=y,$=C):Hm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Zy("display",o))}catch(N){Ae(t,t.return,N)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(N){Ae(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Mt(e,t),Xt(t),r&4&&qm(t);break;case 21:break;default:Mt(e,t),Xt(t)}}function Xt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(S_(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(so(i,""),r.flags&=-33);var s=Wm(t);kh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Wm(t);Rh(t,c,o);break;default:throw Error(M(161))}}catch(u){Ae(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Xx(t,e,n){$=t,R_(t)}function R_(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||xa;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||tt;c=xa;var d=tt;if(xa=o,(tt=u)&&!d)for($=i;$!==null;)o=$,u=o.child,o.tag===22&&o.memoizedState!==null?Gm(i):u!==null?(u.return=o,$=u):Gm(i);for(;s!==null;)$=s,R_(s),s=s.sibling;$=i,xa=c,tt=d}$m(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):$m(t)}}function $m(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tt||rc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ft(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&km(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}km(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&co(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}tt||e.flags&512&&Ch(e)}catch(y){Ae(e,e.return,y)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Hm(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Gm(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rc(4,e)}catch(u){Ae(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ae(e,i,u)}}var s=e.return;try{Ch(e)}catch(u){Ae(e,s,u)}break;case 5:var o=e.return;try{Ch(e)}catch(u){Ae(e,o,u)}}}catch(u){Ae(e,e.return,u)}if(e===t){$=null;break}var c=e.sibling;if(c!==null){c.return=e.return,$=c;break}$=e.return}}var Jx=Math.ceil,xl=Rn.ReactCurrentDispatcher,Wd=Rn.ReactCurrentOwner,Nt=Rn.ReactCurrentBatchConfig,le=0,We=null,je=null,Ge=0,wt=0,Ti=wr(0),Oe=0,Eo=null,Hr=0,ic=0,qd=0,Ys=null,dt=null,$d=0,zi=1/0,hn=null,Tl=!1,Ph=null,tr=null,Ta=!1,Kn=null,Il=0,Xs=0,bh=null,Ba=-1,za=0;function lt(){return le&6?Re():Ba!==-1?Ba:Ba=Re()}function nr(t){return t.mode&1?le&2&&Ge!==0?Ge&-Ge:Vx.transition!==null?(za===0&&(za=dv()),za):(t=he,t!==0||(t=window.event,t=t===void 0?16:_v(t.type)),t):1}function qt(t,e,n,r){if(50<Xs)throw Xs=0,bh=null,Error(M(185));jo(t,n,r),(!(le&2)||t!==We)&&(t===We&&(!(le&2)&&(ic|=n),Oe===4&&Wn(t,Ge)),yt(t,r),n===1&&le===0&&!(e.mode&1)&&(zi=Re()+500,ec&&Er()))}function yt(t,e){var n=t.callbackNode;VE(t,e);var r=al(t,t===We?Ge:0);if(r===0)n!==null&&nm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nm(n),e===1)t.tag===0?Dx(Km.bind(null,t)):Mv(Km.bind(null,t)),Px(function(){!(le&6)&&Er()}),n=null;else{switch(fv(r)){case 1:n=yd;break;case 4:n=uv;break;case 16:n=ol;break;case 536870912:n=hv;break;default:n=ol}n=L_(n,k_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function k_(t,e){if(Ba=-1,za=0,le&6)throw Error(M(327));var n=t.callbackNode;if(ki()&&t.callbackNode!==n)return null;var r=al(t,t===We?Ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sl(t,r);else{e=r;var i=le;le|=2;var s=b_();(We!==t||Ge!==e)&&(hn=null,zi=Re()+500,Br(t,e));do try{tT();break}catch(c){P_(t,c)}while(1);Pd(),xl.current=s,le=i,je!==null?e=0:(We=null,Ge=0,e=Oe)}if(e!==0){if(e===2&&(i=ih(t),i!==0&&(r=i,e=jh(t,i))),e===1)throw n=Eo,Br(t,0),Wn(t,r),yt(t,Re()),n;if(e===6)Wn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Zx(i)&&(e=Sl(t,r),e===2&&(s=ih(t),s!==0&&(r=s,e=jh(t,s))),e===1))throw n=Eo,Br(t,0),Wn(t,r),yt(t,Re()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Nr(t,dt,hn);break;case 3:if(Wn(t,r),(r&130023424)===r&&(e=$d+500-Re(),10<e)){if(al(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){lt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=dh(Nr.bind(null,t,dt,hn),e);break}Nr(t,dt,hn);break;case 4:if(Wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Wt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Jx(r/1960))-r,10<r){t.timeoutHandle=dh(Nr.bind(null,t,dt,hn),r);break}Nr(t,dt,hn);break;case 5:Nr(t,dt,hn);break;default:throw Error(M(329))}}}return yt(t,Re()),t.callbackNode===n?k_.bind(null,t):null}function jh(t,e){var n=Ys;return t.current.memoizedState.isDehydrated&&(Br(t,e).flags|=256),t=Sl(t,e),t!==2&&(e=dt,dt=n,e!==null&&Nh(e)),t}function Nh(t){dt===null?dt=t:dt.push.apply(dt,t)}function Zx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ht(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wn(t,e){for(e&=~qd,e&=~ic,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wt(e),r=1<<n;t[n]=-1,e&=~r}}function Km(t){if(le&6)throw Error(M(327));ki();var e=al(t,0);if(!(e&1))return yt(t,Re()),null;var n=Sl(t,e);if(t.tag!==0&&n===2){var r=ih(t);r!==0&&(e=r,n=jh(t,r))}if(n===1)throw n=Eo,Br(t,0),Wn(t,e),yt(t,Re()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nr(t,dt,hn),yt(t,Re()),null}function Hd(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(zi=Re()+500,ec&&Er())}}function Gr(t){Kn!==null&&Kn.tag===0&&!(le&6)&&ki();var e=le;le|=1;var n=Nt.transition,r=he;try{if(Nt.transition=null,he=1,t)return t()}finally{he=r,Nt.transition=n,le=e,!(le&6)&&Er()}}function Gd(){wt=Ti.current,_e(Ti)}function Br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kx(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Cd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&dl();break;case 3:Ui(),_e(mt),_e(rt),Ld();break;case 5:Vd(r);break;case 4:Ui();break;case 13:_e(Ee);break;case 19:_e(Ee);break;case 10:bd(r.type._context);break;case 22:case 23:Gd()}n=n.return}if(We=t,je=t=rr(t.current,null),Ge=wt=e,Oe=0,Eo=null,qd=ic=Hr=0,dt=Ys=null,Or!==null){for(e=0;e<Or.length;e++)if(n=Or[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Or=null}return t}function P_(t,e){do{var n=je;try{if(Pd(),Ma.current=El,wl){for(var r=xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wl=!1}if($r=0,ze=Le=xe=null,Ks=!1,vo=0,Wd.current=null,n===null||n.return===null){Oe=1,Eo=e,je=null;break}e:{var s=t,o=n.return,c=n,u=e;if(e=Ge,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=c,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var C=Vm(o);if(C!==null){C.flags&=-257,Lm(C,o,c,s,e),C.mode&1&&Dm(s,d,e),e=C,u=d;var P=e.updateQueue;if(P===null){var N=new Set;N.add(u),e.updateQueue=N}else P.add(u);break e}else{if(!(e&1)){Dm(s,d,e),Kd();break e}u=Error(M(426))}}else if(we&&c.mode&1){var L=Vm(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Lm(L,o,c,s,e),Rd(Bi(u,c));break e}}s=u=Bi(u,c),Oe!==4&&(Oe=2),Ys===null?Ys=[s]:Ys.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=f_(s,u,e);Rm(s,S);break e;case 1:c=u;var w=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(tr===null||!tr.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=p_(s,c,e);Rm(s,j);break e}}s=s.return}while(s!==null)}N_(n)}catch(F){e=F,je===n&&n!==null&&(je=n=n.return);continue}break}while(1)}function b_(){var t=xl.current;return xl.current=El,t===null?El:t}function Kd(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),We===null||!(Hr&268435455)&&!(ic&268435455)||Wn(We,Ge)}function Sl(t,e){var n=le;le|=2;var r=b_();(We!==t||Ge!==e)&&(hn=null,Br(t,e));do try{eT();break}catch(i){P_(t,i)}while(1);if(Pd(),le=n,xl.current=r,je!==null)throw Error(M(261));return We=null,Ge=0,Oe}function eT(){for(;je!==null;)j_(je)}function tT(){for(;je!==null&&!AE();)j_(je)}function j_(t){var e=V_(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?N_(t):je=e,Wd.current=null}function N_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Kx(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,je=null;return}}else if(n=Gx(n,e,wt),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Oe===0&&(Oe=5)}function Nr(t,e,n){var r=he,i=Nt.transition;try{Nt.transition=null,he=1,nT(t,e,n,r)}finally{Nt.transition=i,he=r}return null}function nT(t,e,n,r){do ki();while(Kn!==null);if(le&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(LE(t,s),t===We&&(je=We=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ta||(Ta=!0,L_(ol,function(){return ki(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nt.transition,Nt.transition=null;var o=he;he=1;var c=le;le|=4,Wd.current=null,Yx(t,n),C_(n,t),xx(uh),ll=!!ch,uh=ch=null,t.current=n,Xx(n),CE(),le=c,he=o,Nt.transition=s}else t.current=n;if(Ta&&(Ta=!1,Kn=t,Il=i),s=t.pendingLanes,s===0&&(tr=null),PE(n.stateNode),yt(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Tl)throw Tl=!1,t=Ph,Ph=null,t;return Il&1&&t.tag!==0&&ki(),s=t.pendingLanes,s&1?t===bh?Xs++:(Xs=0,bh=t):Xs=0,Er(),null}function ki(){if(Kn!==null){var t=fv(Il),e=Nt.transition,n=he;try{if(Nt.transition=null,he=16>t?16:t,Kn===null)var r=!1;else{if(t=Kn,Kn=null,Il=0,le&6)throw Error(M(331));var i=le;for(le|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var c=s.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for($=d;$!==null;){var p=$;switch(p.tag){case 0:case 11:case 15:Qs(8,p,s)}var m=p.child;if(m!==null)m.return=p,$=m;else for(;$!==null;){p=$;var y=p.sibling,C=p.return;if(I_(p),p===d){$=null;break}if(y!==null){y.return=C,$=y;break}$=C}}}var P=s.alternate;if(P!==null){var N=P.child;if(N!==null){P.child=null;do{var L=N.sibling;N.sibling=null,N=L}while(N!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qs(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,$=S;break e}$=s.return}}var w=t.current;for($=w;$!==null;){o=$;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,$=T;else e:for(o=w;$!==null;){if(c=$,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(F){Ae(c,c.return,F)}if(c===o){$=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,$=j;break e}$=c.return}}if(le=i,Er(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Ql,t)}catch{}r=!0}return r}finally{he=n,Nt.transition=e}}return!1}function Qm(t,e,n){e=Bi(n,e),e=f_(t,e,1),t=er(t,e,1),e=lt(),t!==null&&(jo(t,1,e),yt(t,e))}function Ae(t,e,n){if(t.tag===3)Qm(t,t,n);else for(;e!==null;){if(e.tag===3){Qm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tr===null||!tr.has(r))){t=Bi(n,t),t=p_(e,t,1),e=er(e,t,1),t=lt(),e!==null&&(jo(e,1,t),yt(e,t));break}}e=e.return}}function rT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=lt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Ge&n)===n&&(Oe===4||Oe===3&&(Ge&130023424)===Ge&&500>Re()-$d?Br(t,0):qd|=n),yt(t,e)}function D_(t,e){e===0&&(t.mode&1?(e=fa,fa<<=1,!(fa&130023424)&&(fa=4194304)):e=1);var n=lt();t=xn(t,e),t!==null&&(jo(t,e,n),yt(t,n))}function iT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),D_(t,n)}function sT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),D_(t,n)}var V_;V_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mt.current)pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pt=!1,Hx(t,e,n);pt=!!(t.flags&131072)}else pt=!1,we&&e.flags&1048576&&Fv(e,ml,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ua(t,e),t=e.pendingProps;var i=Oi(e,rt.current);Ri(e,n),i=Md(null,e,r,t,i,n);var s=Fd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gt(r)?(s=!0,fl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Nd(e),i.updater=nc,e.stateNode=i,i._reactInternals=e,_h(e,r,t,n),e=xh(null,e,r,!0,s,n)):(e.tag=0,we&&s&&Ad(e),at(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ua(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=aT(r),t=Ft(r,t),i){case 0:e=Eh(null,e,r,t,n);break e;case 1:e=Fm(null,e,r,t,n);break e;case 11:e=Om(null,e,r,t,n);break e;case 14:e=Mm(null,e,r,Ft(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Eh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Fm(t,e,r,i,n);case 3:e:{if(v_(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,$v(t,e),vl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Bi(Error(M(423)),e),e=Um(t,e,r,n,i);break e}else if(r!==i){i=Bi(Error(M(424)),e),e=Um(t,e,r,n,i);break e}else for(xt=Zn(e.stateNode.containerInfo.firstChild),It=e,we=!0,Bt=null,n=Wv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mi(),r===i){e=Tn(t,e,n);break e}at(t,e,r,n)}e=e.child}return e;case 5:return Hv(e),t===null&&gh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,hh(r,i)?o=null:s!==null&&hh(r,s)&&(e.flags|=32),y_(t,e),at(t,e,o,n),e.child;case 6:return t===null&&gh(e),null;case 13:return __(t,e,n);case 4:return Dd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fi(e,null,r,n):at(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Om(t,e,r,i,n);case 7:return at(t,e,e.pendingProps,n),e.child;case 8:return at(t,e,e.pendingProps.children,n),e.child;case 12:return at(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,me(gl,r._currentValue),r._currentValue=o,s!==null)if(Ht(s.value,o)){if(s.children===i.children&&!mt.current){e=Tn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=vn(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),yh(s.return,n,e),c.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(M(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),yh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}at(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ri(e,n),i=Dt(i),r=r(i),e.flags|=1,at(t,e,r,n),e.child;case 14:return r=e.type,i=Ft(r,e.pendingProps),i=Ft(r.type,i),Mm(t,e,r,i,n);case 15:return m_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Ua(t,e),e.tag=1,gt(r)?(t=!0,fl(e)):t=!1,Ri(e,n),d_(e,r,i),_h(e,r,i,n),xh(null,e,r,!0,t,n);case 19:return w_(t,e,n);case 22:return g_(t,e,n)}throw Error(M(156,e.tag))};function L_(t,e){return cv(t,e)}function oT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(t,e,n,r){return new oT(t,e,n,r)}function Qd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aT(t){if(typeof t=="function")return Qd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pd)return 11;if(t===md)return 14}return 2}function rr(t,e){var n=t.alternate;return n===null?(n=jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wa(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Qd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fi:return zr(n.children,i,s,e);case fd:o=8,i|=8;break;case Wu:return t=jt(12,n,e,i|2),t.elementType=Wu,t.lanes=s,t;case qu:return t=jt(13,n,e,i),t.elementType=qu,t.lanes=s,t;case $u:return t=jt(19,n,e,i),t.elementType=$u,t.lanes=s,t;case Hy:return sc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qy:o=10;break e;case $y:o=9;break e;case pd:o=11;break e;case md:o=14;break e;case Un:o=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=jt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zr(t,e,n,r){return t=jt(7,t,r,e),t.lanes=n,t}function sc(t,e,n,r){return t=jt(22,t,r,e),t.elementType=Hy,t.lanes=n,t.stateNode={isHidden:!1},t}function Au(t,e,n){return t=jt(6,t,null,e),t.lanes=n,t}function Cu(t,e,n){return e=jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=au(0),this.expirationTimes=au(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=au(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Yd(t,e,n,r,i,s,o,c,u){return t=new lT(t,e,n,c,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=jt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nd(s),t}function cT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function O_(t){if(!t)return hr;t=t._reactInternals;e:{if(ei(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(gt(n))return Ov(t,n,e)}return e}function M_(t,e,n,r,i,s,o,c,u){return t=Yd(n,r,!0,t,i,s,o,c,u),t.context=O_(null),n=t.current,r=lt(),i=nr(n),s=vn(r,i),s.callback=e??null,er(n,s,i),t.current.lanes=i,jo(t,i,r),yt(t,r),t}function oc(t,e,n,r){var i=e.current,s=lt(),o=nr(i);return n=O_(n),e.context===null?e.context=n:e.pendingContext=n,e=vn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=er(i,e,o),t!==null&&(qt(t,i,o,s),Oa(t,i,o)),o}function Al(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ym(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xd(t,e){Ym(t,e),(t=t.alternate)&&Ym(t,e)}function uT(){return null}var F_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jd(t){this._internalRoot=t}ac.prototype.render=Jd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));oc(t,e,null,null)};ac.prototype.unmount=Jd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gr(function(){oc(null,t,null,null)}),e[En]=null}};function ac(t){this._internalRoot=t}ac.prototype.unstable_scheduleHydration=function(t){if(t){var e=gv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zn.length&&e!==0&&e<zn[n].priority;n++);zn.splice(n,0,t),n===0&&vv(t)}};function Zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xm(){}function hT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Al(o);s.call(d)}}var o=M_(e,r,t,0,null,!1,!1,"",Xm);return t._reactRootContainer=o,t[En]=o.current,fo(t.nodeType===8?t.parentNode:t),Gr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=Al(u);c.call(d)}}var u=Yd(t,0,!1,null,null,!1,!1,"",Xm);return t._reactRootContainer=u,t[En]=u.current,fo(t.nodeType===8?t.parentNode:t),Gr(function(){oc(e,u,n,r)}),u}function cc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var c=i;i=function(){var u=Al(o);c.call(u)}}oc(e,o,t,i)}else o=hT(n,e,t,i,r);return Al(o)}pv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ls(e.pendingLanes);n!==0&&(vd(e,n|1),yt(e,Re()),!(le&6)&&(zi=Re()+500,Er()))}break;case 13:Gr(function(){var r=xn(t,1);if(r!==null){var i=lt();qt(r,t,1,i)}}),Xd(t,1)}};_d=function(t){if(t.tag===13){var e=xn(t,134217728);if(e!==null){var n=lt();qt(e,t,134217728,n)}Xd(t,134217728)}};mv=function(t){if(t.tag===13){var e=nr(t),n=xn(t,e);if(n!==null){var r=lt();qt(n,t,e,r)}Xd(t,e)}};gv=function(){return he};yv=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};th=function(t,e,n){switch(e){case"input":if(Ku(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Zl(r);if(!i)throw Error(M(90));Ky(r),Ku(r,i)}}}break;case"textarea":Yy(t,n);break;case"select":e=n.value,e!=null&&Ii(t,!!n.multiple,e,!1)}};rv=Hd;iv=Gr;var dT={usingClientEntryPoint:!1,Events:[Do,yi,Zl,tv,nv,Hd]},bs={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fT={bundleType:bs.bundleType,version:bs.version,rendererPackageName:bs.rendererPackageName,rendererConfig:bs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=av(t),t===null?null:t.stateNode},findFiberByHostInstance:bs.findFiberByHostInstance||uT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ia.isDisabled&&Ia.supportsFiber)try{Ql=Ia.inject(fT),nn=Ia}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dT;At.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zd(e))throw Error(M(200));return cT(t,e,null,n)};At.createRoot=function(t,e){if(!Zd(t))throw Error(M(299));var n=!1,r="",i=F_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Yd(t,1,!1,null,null,n,!1,r,i),t[En]=e.current,fo(t.nodeType===8?t.parentNode:t),new Jd(e)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=av(e),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return Gr(t)};At.hydrate=function(t,e,n){if(!lc(e))throw Error(M(200));return cc(null,t,e,!0,n)};At.hydrateRoot=function(t,e,n){if(!Zd(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=F_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=M_(e,null,t,1,n??null,i,!1,s,o),t[En]=e.current,fo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ac(e)};At.render=function(t,e,n){if(!lc(e))throw Error(M(200));return cc(null,t,e,!1,n)};At.unmountComponentAtNode=function(t){if(!lc(t))throw Error(M(40));return t._reactRootContainer?(Gr(function(){cc(null,null,t,!1,function(){t._reactRootContainer=null,t[En]=null})}),!0):!1};At.unstable_batchedUpdates=Hd;At.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lc(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return cc(t,e,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function U_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U_)}catch(t){console.error(t)}}U_(),Uy.exports=At;var pT=Uy.exports,B_,Jm=pT;B_=Jm.createRoot,Jm.hydrateRoot;const mT=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},W_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,p=s>>2,m=(s&3)<<4|c>>4;let y=(c&15)<<2|d>>6,C=d&63;u||(C=64,o||(y=64)),r.push(n[p],n[m],n[y],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(z_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||m==null)throw new yT;const y=s<<2|c>>4;if(r.push(y),d!==64){const C=c<<4&240|d>>2;if(r.push(C),m!==64){const P=d<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vT=function(t){const e=z_(t);return W_.encodeByteArray(e,!0)},Cl=function(t){return vT(t).replace(/\./g,"")},q_=function(t){try{return W_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=()=>_T().__FIREBASE_DEFAULTS__,ET=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q_(t[1]);return e&&JSON.parse(e)},uc=()=>{try{return mT()||wT()||ET()||xT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$_=t=>{var e,n;return(n=(e=uc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},TT=t=>{const e=$_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},H_=()=>{var t;return(t=uc())==null?void 0:t.config},G_=t=>{var e;return(e=uc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function K_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},c="";return[Cl(JSON.stringify(n)),Cl(JSON.stringify(o)),c].join(".")}const Js={};function AT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Js))Js[e]?t.emulator.push(e):t.prod.push(e);return t}function CT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Zm=!1;function Q_(t,e){if(typeof window>"u"||typeof document>"u"||!es(window.location.host)||Js[t]===e||Js[t]||Zm)return;Js[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",s=AT().prod.length>0;function o(){const y=document.getElementById(r);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,C){y.setAttribute("width","24"),y.setAttribute("id",C),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Zm=!0,o()},y}function p(y,C){y.setAttribute("id",C),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){const y=CT(r),C=n("text"),P=document.getElementById(C)||document.createElement("span"),N=n("learnmore"),L=document.getElementById(N)||document.createElement("a"),S=n("preprendIcon"),w=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const T=y.element;c(T),p(L,N);const j=d();u(w,S),T.append(w,P,L,j),document.body.appendChild(T)}s?(P.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function kT(){var e;const t=(e=uc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NT(){const t=it();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DT(){return!kT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VT(){try{return typeof indexedDB=="object"}catch{return!1}}function LT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="FirebaseError";class kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=OT,Object.setPrototypeOf(this,kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lo.prototype.create)}}class Lo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?MT(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new kn(i,c,r)}}function MT(t,e){return t.replace(FT,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FT=/\{\$([^}]+)}/g;function UT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(eg(s)&&eg(o)){if(!Kr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function eg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ms(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Fs(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function BT(t,e){const n=new zT(t,e);return n.subscribe.bind(n)}class zT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WT(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ru),i.error===void 0&&(i.error=Ru),i.complete===void 0&&(i.complete=Ru);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ru(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t){return t&&t._delegate?t._delegate:t}class Qr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new IT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HT(e))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dr){return this.instances.has(e)}getOptions(e=Dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$T(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dr){return this.component?this.component.multipleInstances?e:Dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $T(t){return t===Dr?void 0:t}function HT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const KT={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},QT=re.INFO,YT={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},XT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=YT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ef{constructor(e){this.name=e,this._logLevel=QT,this._logHandler=XT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const JT=(t,e)=>e.some(n=>t instanceof n);let tg,ng;function ZT(){return tg||(tg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eI(){return ng||(ng=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y_=new WeakMap,Dh=new WeakMap,X_=new WeakMap,ku=new WeakMap,tf=new WeakMap;function tI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ir(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Y_.set(n,t)}).catch(()=>{}),tf.set(e,t),e}function nI(t){if(Dh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Dh.set(t,e)}let Vh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||X_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rI(t){Vh=t(Vh)}function iI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pu(this),e,...n);return X_.set(r,e.sort?e.sort():[e]),ir(r)}:eI().includes(t)?function(...e){return t.apply(Pu(this),e),ir(Y_.get(this))}:function(...e){return ir(t.apply(Pu(this),e))}}function sI(t){return typeof t=="function"?iI(t):(t instanceof IDBTransaction&&nI(t),JT(t,ZT())?new Proxy(t,Vh):t)}function ir(t){if(t instanceof IDBRequest)return tI(t);if(ku.has(t))return ku.get(t);const e=sI(t);return e!==t&&(ku.set(t,e),tf.set(e,t)),e}const Pu=t=>tf.get(t);function oI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),c=ir(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ir(o.result),u.oldVersion,u.newVersion,ir(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const aI=["get","getKey","getAll","getAllKeys","count"],lI=["put","add","delete","clear"],bu=new Map;function rg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bu.get(e))return bu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=lI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aI.includes(n)))return;const s=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return bu.set(e,s),s}rI(t=>({...t,get:(e,n,r)=>rg(e,n)||t.get(e,n,r),has:(e,n)=>!!rg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lh="@firebase/app",ig="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new ef("@firebase/app"),hI="@firebase/app-compat",dI="@firebase/analytics-compat",fI="@firebase/analytics",pI="@firebase/app-check-compat",mI="@firebase/app-check",gI="@firebase/auth",yI="@firebase/auth-compat",vI="@firebase/database",_I="@firebase/data-connect",wI="@firebase/database-compat",EI="@firebase/functions",xI="@firebase/functions-compat",TI="@firebase/installations",II="@firebase/installations-compat",SI="@firebase/messaging",AI="@firebase/messaging-compat",CI="@firebase/performance",RI="@firebase/performance-compat",kI="@firebase/remote-config",PI="@firebase/remote-config-compat",bI="@firebase/storage",jI="@firebase/storage-compat",NI="@firebase/firestore",DI="@firebase/ai",VI="@firebase/firestore-compat",LI="firebase",OI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="[DEFAULT]",MI={[Lh]:"fire-core",[hI]:"fire-core-compat",[fI]:"fire-analytics",[dI]:"fire-analytics-compat",[mI]:"fire-app-check",[pI]:"fire-app-check-compat",[gI]:"fire-auth",[yI]:"fire-auth-compat",[vI]:"fire-rtdb",[_I]:"fire-data-connect",[wI]:"fire-rtdb-compat",[EI]:"fire-fn",[xI]:"fire-fn-compat",[TI]:"fire-iid",[II]:"fire-iid-compat",[SI]:"fire-fcm",[AI]:"fire-fcm-compat",[CI]:"fire-perf",[RI]:"fire-perf-compat",[kI]:"fire-rc",[PI]:"fire-rc-compat",[bI]:"fire-gcs",[jI]:"fire-gcs-compat",[NI]:"fire-fst",[VI]:"fire-fst-compat",[DI]:"fire-vertex","fire-js":"fire-js",[LI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=new Map,FI=new Map,Mh=new Map;function sg(t,e){try{t.container.addComponent(e)}catch(n){In.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Wi(t){const e=t.name;if(Mh.has(e))return In.debug(`There were multiple attempts to register component ${e}.`),!1;Mh.set(e,t);for(const n of Rl.values())sg(n,t);for(const n of FI.values())sg(n,t);return!0}function nf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Et(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new Lo("app","Firebase",UI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=OI;function J_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Oh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw sr.create("bad-app-name",{appName:String(i)});if(n||(n=H_()),!n)throw sr.create("no-options");const s=Rl.get(i);if(s){if(Kr(n,s.options)&&Kr(r,s.config))return s;throw sr.create("duplicate-app",{appName:i})}const o=new GT(i);for(const u of Mh.values())o.addComponent(u);const c=new BI(n,r,o);return Rl.set(i,c),c}function Z_(t=Oh){const e=Rl.get(t);if(!e&&t===Oh&&H_())return J_();if(!e)throw sr.create("no-app",{appName:t});return e}function or(t,e,n){let r=MI[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),In.warn(o.join(" "));return}Wi(new Qr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="firebase-heartbeat-database",WI=1,xo="firebase-heartbeat-store";let ju=null;function e0(){return ju||(ju=oI(zI,WI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xo)}catch(n){console.warn(n)}}}}).catch(t=>{throw sr.create("idb-open",{originalErrorMessage:t.message})})),ju}async function qI(t){try{const n=(await e0()).transaction(xo),r=await n.objectStore(xo).get(t0(t));return await n.done,r}catch(e){if(e instanceof kn)In.warn(e.message);else{const n=sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});In.warn(n.message)}}}async function og(t,e){try{const r=(await e0()).transaction(xo,"readwrite");await r.objectStore(xo).put(e,t0(t)),await r.done}catch(n){if(n instanceof kn)In.warn(n.message);else{const r=sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});In.warn(r.message)}}}function t0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=1024,HI=30;class GI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ag();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>HI){const o=YI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){In.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ag(),{heartbeatsToSend:r,unsentEntries:i}=KI(this._heartbeatsCache.heartbeats),s=Cl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return In.warn(n),""}}}function ag(){return new Date().toISOString().substring(0,10)}function KI(t,e=$I){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),lg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VT()?LT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return og(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return og(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function lg(t){return Cl(JSON.stringify({version:2,heartbeats:t})).length}function YI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){Wi(new Qr("platform-logger",e=>new cI(e),"PRIVATE")),Wi(new Qr("heartbeat",e=>new GI(e),"PRIVATE")),or(Lh,ig,t),or(Lh,ig,"esm2020"),or("fire-js","")}XI("");function n0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JI=n0,r0=new Lo("auth","Firebase",n0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new ef("@firebase/auth");function ZI(t,...e){kl.logLevel<=re.WARN&&kl.warn(`Auth (${ts}): ${t}`,...e)}function qa(t,...e){kl.logLevel<=re.ERROR&&kl.error(`Auth (${ts}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t,...e){throw sf(t,...e)}function $t(t,...e){return sf(t,...e)}function rf(t,e,n){const r={...JI(),[e]:n};return new Lo("auth","Firebase",r).create(e,{appName:t.name})}function _n(t){return rf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lt(t,"argument-error"),rf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return r0.create(t,...e)}function G(t,e,...n){if(!t)throw sf(e,...n)}function gn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qa(e),new Error(e)}function Sn(t,e){t||gn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function tS(){return cg()==="http:"||cg()==="https:"}function cg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tS()||bT()||"connection"in navigator)?navigator.onLine:!0}function rS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sn(n>e,"Short delay should be less than long delay!"),this.isMobile=RT()||jT()}get(){return nS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t,e){Sn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oS=new Mo(3e4,6e4);function xr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Pn(t,e,n,r,i={}){return s0(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const c=Oo({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...s};return PT()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&es(t.emulatorConfig.host)&&(d.credentials="include"),i0.fetch()(await o0(t,t.config.apiHost,n,c),d)})}async function s0(t,e,n){t._canInitEmulator=!1;const r={...iS,...e};try{const i=new lS(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Sa(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sa(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Sa(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Sa(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw rf(t,p,d);Lt(t,p)}}catch(i){if(i instanceof kn)throw i;Lt(t,"network-request-failed",{message:String(i)})}}async function hc(t,e,n,r,i={}){const s=await Pn(t,e,n,r,i);return"mfaPendingCredential"in s&&Lt(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function o0(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?of(t.config,i):`${t.config.apiScheme}://${i}`;return sS.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function aS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($t(this.auth,"network-request-failed")),oS.get())})}}function Sa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$t(t,e,r);return i.customData._tokenResponse=n,i}function ug(t){return t!==void 0&&t.enterprise!==void 0}class cS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uS(t,e){return Pn(t,"GET","/v2/recaptchaConfig",xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(t,e){return Pn(t,"POST","/v1/accounts:delete",e)}async function bl(t,e){return Pn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dS(t,e=!1){const n=ke(t),r=await n.getIdToken(e),i=af(r);G(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zs(Nu(i.auth_time)),issuedAtTime:Zs(Nu(i.iat)),expirationTime:Zs(Nu(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Nu(t){return Number(t)*1e3}function af(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return qa("JWT malformed, contained fewer than 3 sections"),null;try{const i=q_(n);return i?JSON.parse(i):(qa("Failed to decode base64 JWT payload"),null)}catch(i){return qa("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function hg(t){const e=af(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kn&&fS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zs(this.lastLoginAt),this.creationTime=Zs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t){var m;const e=t.auth,n=await t.getIdToken(),r=await To(t,bl(e,{idToken:n}));G(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(m=i.providerUserInfo)!=null&&m.length?a0(i.providerUserInfo):[],o=gS(t.providerData,s),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Fh(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function mS(t){const e=ke(t);await jl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gS(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function a0(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e){const n=await s0(t,{},async()=>{const r=Oo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await o0(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&es(t.emulatorConfig.host)&&(u.credentials="include"),i0.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vS(t,e){return Pn(t,"POST","/v2/accounts:revokeToken",xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=hg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await yS(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Pi;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(G(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pi,this.toJSON())}_performRefresh(){return gn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zt{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new pS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Fh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await To(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dS(this,e)}reload(){return mS(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Et(this.auth.app))return Promise.reject(_n(this.auth));const e=await this.getIdToken();return await To(this,hS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:m,emailVerified:y,isAnonymous:C,providerData:P,stsTokenManager:N}=n;G(m&&N,e,"internal-error");const L=Pi.fromJSON(this.name,N);G(typeof m=="string",e,"internal-error"),Fn(r,e.name),Fn(i,e.name),G(typeof y=="boolean",e,"internal-error"),G(typeof C=="boolean",e,"internal-error"),Fn(s,e.name),Fn(o,e.name),Fn(c,e.name),Fn(u,e.name),Fn(d,e.name),Fn(p,e.name);const S=new zt({uid:m,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:C,photoURL:o,phoneNumber:s,tenantId:c,stsTokenManager:L,createdAt:d,lastLoginAt:p});return P&&Array.isArray(P)&&(S.providerData=P.map(w=>({...w}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Pi;i.updateFromServerResponse(n);const s=new zt({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await jl(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];G(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?a0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Pi;c.updateFromIdToken(r);const u=new zt({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Fh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=new Map;function yn(t){Sn(t instanceof Function,"Expected a class definition");let e=dg.get(t);return e?(Sn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}l0.type="NONE";const fg=l0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t,e,n){return`firebase:${t}:${e}:${n}`}class bi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$a(this.userKey,i.apiKey,s),this.fullPersistenceKey=$a("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bl(this.auth,{idToken:e}).catch(()=>{});return n?zt._fromGetAccountInfoResponse(this.auth,n,e):null}return zt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bi(yn(fg),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||yn(fg);const o=$a(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(o);if(p){let m;if(typeof p=="string"){const y=await bl(e,{idToken:p}).catch(()=>{});if(!y)break;m=await zt._fromGetAccountInfoResponse(e,y,p)}else m=zt._fromJSON(e,p);d!==s&&(c=m),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new bi(s,e,r):(s=u[0],c&&await s._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new bi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p0(e))return"Blackberry";if(m0(e))return"Webos";if(u0(e))return"Safari";if((e.includes("chrome/")||h0(e))&&!e.includes("edge/"))return"Chrome";if(f0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function c0(t=it()){return/firefox\//i.test(t)}function u0(t=it()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h0(t=it()){return/crios\//i.test(t)}function d0(t=it()){return/iemobile/i.test(t)}function f0(t=it()){return/android/i.test(t)}function p0(t=it()){return/blackberry/i.test(t)}function m0(t=it()){return/webos/i.test(t)}function lf(t=it()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _S(t=it()){var e;return lf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function wS(){return NT()&&document.documentMode===10}function g0(t=it()){return lf(t)||f0(t)||m0(t)||p0(t)||/windows phone/i.test(t)||d0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t,e=[]){let n;switch(t){case"Browser":n=pg(it());break;case"Worker":n=`${pg(it())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ts}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,c)=>{try{const u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(t,e={}){return Pn(t,"GET","/v2/passwordPolicy",xr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=6;class IS{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mg(this),this.idTokenSubscription=new mg(this),this.beforeStateQueue=new ES(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=r0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await bi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bl(this,{idToken:e}),r=await zt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Et(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Et(this.app))return Promise.reject(_n(this));const n=e?ke(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Et(this.app)?Promise.reject(_n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Et(this.app)?Promise.reject(_n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xS(this),n=new IS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yn(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await bi.create(this,[yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=y0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Et(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&ZI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Tr(t){return ke(t)}class mg{constructor(e){this.auth=e,this.observer=null,this.addObserver=BT(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AS(t){dc=t}function v0(t){return dc.loadJS(t)}function CS(){return dc.recaptchaEnterpriseScript}function RS(){return dc.gapiScript}function kS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class PS{constructor(){this.enterprise=new bS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const jS="recaptcha-enterprise",_0="NO_RECAPTCHA";class NS{constructor(e){this.type=jS,this.auth=Tr(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,c)=>{uS(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new cS(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(s,o,c){const u=window.grecaptcha;ug(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(_0)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PS().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(c=>{if(!n&&ug(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=CS();u.length!==0&&(u+=c),v0(u).then(()=>{i(c,s,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function js(t,e,n,r=!1,i=!1){const s=new NS(t);let o;if(i)o=_0;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Uh(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await js(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await js(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const c=await js(t,e,n);return r(t,c).catch(async u=>{var d;if(((d=t._getRecaptchaConfig())==null?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const p=await js(t,e,n,!1,!0);return r(t,p)}return Promise.reject(u)})}else{const c=await js(t,e,n,!1,!0);return r(t,c)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t,e){const n=nf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Kr(s,e??{}))return i;Lt(i,"already-initialized")}return n.initialize({options:e})}function VS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function LS(t,e,n){const r=Tr(t);G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=w0(e),{host:o,port:c}=OS(e),u=c===null?"":`:${c}`,d={url:`${s}//${o}${u}/`},p=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){G(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),G(Kr(d,r.config.emulator)&&Kr(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,es(o)?(K_(`${s}//${o}${u}`),Q_("Auth",!0)):i||MS()}function w0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OS(t){const e=w0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:gg(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:gg(o)}}}function gg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gn("not implemented")}_getIdTokenResponse(e){return gn("not implemented")}_linkToIdToken(e,n){return gn("not implemented")}_getReauthenticationResolver(e){return gn("not implemented")}}async function FS(t,e){return Pn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(t,e){return hc(t,"POST","/v1/accounts:signInWithPassword",xr(t,e))}async function BS(t,e){return Pn(t,"POST","/v1/accounts:sendOobCode",xr(t,e))}async function zS(t,e){return BS(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",xr(t,e))}async function qS(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends cf{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Io(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Io(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uh(e,n,"signInWithPassword",US,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return WS(e,{email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uh(e,r,"signUpPassword",FS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return qS(e,{idToken:n,email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ji(t,e){return hc(t,"POST","/v1/accounts:signInWithIdp",xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="http://localhost";class Yr extends cf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Lt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Yr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ji(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ji(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ji(e,n)}buildRequest(){const e={requestUri:$S,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Oo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GS(t){const e=Ms(Fs(t)).link,n=e?Ms(Fs(e)).deep_link_id:null,r=Ms(Fs(t)).deep_link_id;return(r?Ms(Fs(r)).link:null)||r||n||e||t}class fc{constructor(e){const n=Ms(Fs(e)),r=n.apiKey??null,i=n.oobCode??null,s=HS(n.mode??null);G(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=GS(e);try{return new fc(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.providerId=ti.PROVIDER_ID}static credential(e,n){return Io._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fc.parseLink(n);return G(r,"argument-error"),Io._fromEmailAndCode(e,r.code,r.tenantId)}}ti.PROVIDER_ID="password";ti.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ti.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends uf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends Fo{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qn.credential(e.oauthAccessToken)}catch{return null}}}qn.FACEBOOK_SIGN_IN_METHOD="facebook.com";qn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn extends Fo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yr._fromParams({providerId:fn.PROVIDER_ID,signInMethod:fn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fn.credentialFromTaggedObject(e)}static credentialFromError(e){return fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fn.credential(n,r)}catch{return null}}}fn.GOOGLE_SIGN_IN_METHOD="google.com";fn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Fo{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $n.credential(e.oauthAccessToken)}catch{return null}}}$n.GITHUB_SIGN_IN_METHOD="github.com";$n.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends Fo{constructor(){super("twitter.com")}static credential(e,n){return Yr._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hn.credential(n,r)}catch{return null}}}Hn.TWITTER_SIGN_IN_METHOD="twitter.com";Hn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await zt._fromIdTokenResponse(e,r,i),o=yg(r);return new qi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=yg(r);return new qi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function yg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl extends kn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Nl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Nl(e,n,r,i)}}function E0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Nl._fromErrorAndOperation(t,s,e,r):s})}async function KS(t,e,n=!1){const r=await To(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(t,e,n=!1){const{auth:r}=t;if(Et(r.app))return Promise.reject(_n(r));const i="reauthenticate";try{const s=await To(t,E0(r,i,e,t),n);G(s.idToken,r,"internal-error");const o=af(s.idToken);G(o,r,"internal-error");const{sub:c}=o;return G(t.uid===c,r,"user-mismatch"),qi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Lt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x0(t,e,n=!1){if(Et(t.app))return Promise.reject(_n(t));const r="signIn",i=await E0(t,r,e),s=await qi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function T0(t,e){return x0(Tr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t,e,n){var r;G(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),G(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),G(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(G(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(G(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(t){const e=Tr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function JS(t,e,n){return Et(t.app)?Promise.reject(_n(t)):T0(ke(t),ti.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&XS(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(t,e,n){const r=Tr(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,c){G(c.handleCodeInApp,r,"argument-error"),c&&YS(r,o,c)}s(i,n),await Uh(r,i,"getOobCode",zS,"EMAIL_PASSWORD_PROVIDER")}function vg(t,e){const n=fc.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function eA(t,e,n){if(Et(t.app))return Promise.reject(_n(t));const r=ke(t),i=ti.credentialWithLink(e,n||Pl());return G(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),T0(r,i)}function tA(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function nA(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}function rA(t,e,n,r){return ke(t).onAuthStateChanged(e,n,r)}function Du(t){return ke(t).signOut()}const Dl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dl,"1"),this.storage.removeItem(Dl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=1e3,sA=10;class S0 extends I0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);wS()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,sA):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},iA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}S0.type="LOCAL";const oA=S0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends I0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}A0.type="SESSION";const C0=A0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new pc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,s)),u=await aA(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{const d=hf("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(y.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return window}function cA(t){sn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(){return typeof sn().WorkerGlobalScope<"u"&&typeof sn().importScripts=="function"}async function uA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function dA(){return R0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="firebaseLocalStorageDb",fA=1,Vl="firebaseLocalStorage",P0="fbase_key";class Uo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mc(t,e){return t.transaction([Vl],e?"readwrite":"readonly").objectStore(Vl)}function pA(){const t=indexedDB.deleteDatabase(k0);return new Uo(t).toPromise()}function Bh(){const t=indexedDB.open(k0,fA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Vl,{keyPath:P0})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Vl)?e(r):(r.close(),await pA(),e(await Bh()))})})}async function _g(t,e,n){const r=mc(t,!0).put({[P0]:e,value:n});return new Uo(r).toPromise()}async function mA(t,e){const n=mc(t,!1).get(e),r=await new Uo(n).toPromise();return r===void 0?null:r.value}function wg(t,e){const n=mc(t,!0).delete(e);return new Uo(n).toPromise()}const gA=800,yA=3;class b0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>yA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return R0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pc._getInstance(dA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await uA(),!this.activeServiceWorker)return;this.sender=new lA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bh();return await _g(e,Dl,"1"),await wg(e,Dl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_g(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>mA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=mc(i,!1).getAll();return new Uo(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b0.type="LOCAL";const vA=b0;new Mo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t,e){return e?yn(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends cf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ji(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ji(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ji(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _A(t){return x0(t.auth,new df(t),t.bypassAuthState)}function wA(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),QS(n,new df(t),t.bypassAuthState)}async function EA(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),KS(n,new df(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _A;case"linkViaPopup":case"linkViaRedirect":return EA;case"reauthViaPopup":case"reauthViaRedirect":return wA;default:Lt(this.auth,"internal-error")}}resolve(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new Mo(2e3,1e4);async function TA(t,e,n){if(Et(t.app))return Promise.reject($t(t,"operation-not-supported-in-this-environment"));const r=Tr(t);eS(t,e,uf);const i=j0(r,n);return new Fr(r,"signInViaPopup",e,i).executeNotNull()}class Fr extends N0{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Fr.currentPopupAction&&Fr.currentPopupAction.cancel(),Fr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Sn(this.filter.length===1,"Popup operations only handle one event");const e=hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($t(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject($t(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($t(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xA.get())};e()}}Fr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="pendingRedirect",Ha=new Map;class SA extends N0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ha.get(this.auth._key());if(!e){try{const r=await AA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ha.set(this.auth._key(),e)}return this.bypassAuthState||Ha.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AA(t,e){const n=kA(e),r=RA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function CA(t,e){Ha.set(t._key(),e)}function RA(t){return yn(t._redirectPersistence)}function kA(t){return $a(IA,t.config.apiKey,t.name)}async function PA(t,e,n=!1){if(Et(t.app))return Promise.reject(_n(t));const r=Tr(t),i=j0(r,e),o=await new SA(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=10*60*1e3;class jA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!D0(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError($t(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Eg(e))}saveEventToCache(e){this.cachedEventUids.add(Eg(e)),this.lastProcessedEventTime=Date.now()}}function Eg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function D0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e={}){return Pn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LA=/^https?/;async function OA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DA(t);for(const n of e)try{if(MA(n))return}catch{}Lt(t,"unauthorized-domain")}function MA(t){const e=Pl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!LA.test(n))return!1;if(VA.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new Mo(3e4,6e4);function xg(){const t=sn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UA(t){return new Promise((e,n)=>{var i,s,o;function r(){xg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xg(),n($t(t,"network-request-failed"))},timeout:FA.get()})}if((s=(i=sn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=sn().gapi)!=null&&o.load)r();else{const c=kS("iframefcb");return sn()[c]=()=>{gapi.load?r():n($t(t,"network-request-failed"))},v0(`${RS()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Ga=null,e})}let Ga=null;function BA(t){return Ga=Ga||UA(t),Ga}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new Mo(5e3,15e3),WA="__/auth/iframe",qA="emulator/auth/iframe",$A={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GA(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?of(e,qA):`https://${t.config.authDomain}/${WA}`,r={apiKey:e.apiKey,appName:t.name,v:ts},i=HA.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Oo(r).slice(1)}`}async function KA(t){const e=await BA(t),n=sn().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:GA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$A,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=$t(t,"network-request-failed"),c=sn().setTimeout(()=>{s(o)},zA.get());function u(){sn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YA=500,XA=600,JA="_blank",ZA="http://localhost";class Tg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eC(t,e,n,r=YA,i=XA){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...QA,width:r.toString(),height:i.toString(),top:s,left:o},d=it().toLowerCase();n&&(c=h0(d)?JA:n),c0(d)&&(e=e||ZA,u.scrollbars="yes");const p=Object.entries(u).reduce((y,[C,P])=>`${y}${C}=${P},`,"");if(_S(d)&&c!=="_self")return tC(e||"",c),new Tg(null);const m=window.open(e||"",c,p);G(m,t,"popup-blocked");try{m.focus()}catch{}return new Tg(m)}function tC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="__/auth/handler",rC="emulator/auth/handler",iC=encodeURIComponent("fac");async function Ig(t,e,n,r,i,s){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ts,eventId:i};if(e instanceof uf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",UT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries(s||{}))o[p]=m}if(e instanceof Fo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),d=u?`#${iC}=${encodeURIComponent(u)}`:"";return`${sC(t)}?${Oo(c).slice(1)}${d}`}function sC({config:t}){return t.emulator?of(t,rC):`https://${t.authDomain}/${nC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu="webStorageSupport";class oC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=C0,this._completeRedirectFn=PA,this._overrideRedirectResult=CA}async _openPopup(e,n,r,i){var o;Sn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Ig(e,n,r,Pl(),i);return eC(e,s,hf())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Ig(e,n,r,Pl(),i);return cA(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Sn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await KA(e),r=new jA(e);return n.register("authEvent",i=>(G(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vu,{type:Vu},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Vu];s!==void 0&&n(!!s),Lt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return g0()||u0()||lf()}}const aC=oC;var Sg="@firebase/auth",Ag="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uC(t){Wi(new Qr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:y0(t)},d=new SS(r,i,s,u);return VS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Wi(new Qr("auth-internal",e=>{const n=Tr(e.getProvider("auth").getImmediate());return(r=>new lC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(Sg,Ag,cC(t)),or(Sg,Ag,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=5*60,dC=G_("authIdTokenMaxAge")||hC;let Cg=null;const fC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dC)return;const i=n==null?void 0:n.token;Cg!==i&&(Cg=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pC(t=Z_()){const e=nf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DS(t,{popupRedirectResolver:aC,persistence:[vA,oA,C0]}),r=G_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=fC(s.toString());nA(n,o,()=>o(n.currentUser)),tA(n,c=>o(c))}}const i=$_("auth");return i&&LS(n,`http://${i}`),n}function mC(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}AS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=$t("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uC("Browser");var Rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ar,V0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,v){function E(){}E.prototype=v.prototype,_.F=v.prototype,_.prototype=new E,_.prototype.constructor=_,_.D=function(I,A,k){for(var x=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)x[Pe-2]=arguments[Pe];return v.prototype[A].apply(I,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,v,E){E||(E=0);const I=Array(16);if(typeof v=="string")for(var A=0;A<16;++A)I[A]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(A=0;A<16;++A)I[A]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=_.g[0],E=_.g[1],A=_.g[2];let k=_.g[3],x;x=v+(k^E&(A^k))+I[0]+3614090360&4294967295,v=E+(x<<7&4294967295|x>>>25),x=k+(A^v&(E^A))+I[1]+3905402710&4294967295,k=v+(x<<12&4294967295|x>>>20),x=A+(E^k&(v^E))+I[2]+606105819&4294967295,A=k+(x<<17&4294967295|x>>>15),x=E+(v^A&(k^v))+I[3]+3250441966&4294967295,E=A+(x<<22&4294967295|x>>>10),x=v+(k^E&(A^k))+I[4]+4118548399&4294967295,v=E+(x<<7&4294967295|x>>>25),x=k+(A^v&(E^A))+I[5]+1200080426&4294967295,k=v+(x<<12&4294967295|x>>>20),x=A+(E^k&(v^E))+I[6]+2821735955&4294967295,A=k+(x<<17&4294967295|x>>>15),x=E+(v^A&(k^v))+I[7]+4249261313&4294967295,E=A+(x<<22&4294967295|x>>>10),x=v+(k^E&(A^k))+I[8]+1770035416&4294967295,v=E+(x<<7&4294967295|x>>>25),x=k+(A^v&(E^A))+I[9]+2336552879&4294967295,k=v+(x<<12&4294967295|x>>>20),x=A+(E^k&(v^E))+I[10]+4294925233&4294967295,A=k+(x<<17&4294967295|x>>>15),x=E+(v^A&(k^v))+I[11]+2304563134&4294967295,E=A+(x<<22&4294967295|x>>>10),x=v+(k^E&(A^k))+I[12]+1804603682&4294967295,v=E+(x<<7&4294967295|x>>>25),x=k+(A^v&(E^A))+I[13]+4254626195&4294967295,k=v+(x<<12&4294967295|x>>>20),x=A+(E^k&(v^E))+I[14]+2792965006&4294967295,A=k+(x<<17&4294967295|x>>>15),x=E+(v^A&(k^v))+I[15]+1236535329&4294967295,E=A+(x<<22&4294967295|x>>>10),x=v+(A^k&(E^A))+I[1]+4129170786&4294967295,v=E+(x<<5&4294967295|x>>>27),x=k+(E^A&(v^E))+I[6]+3225465664&4294967295,k=v+(x<<9&4294967295|x>>>23),x=A+(v^E&(k^v))+I[11]+643717713&4294967295,A=k+(x<<14&4294967295|x>>>18),x=E+(k^v&(A^k))+I[0]+3921069994&4294967295,E=A+(x<<20&4294967295|x>>>12),x=v+(A^k&(E^A))+I[5]+3593408605&4294967295,v=E+(x<<5&4294967295|x>>>27),x=k+(E^A&(v^E))+I[10]+38016083&4294967295,k=v+(x<<9&4294967295|x>>>23),x=A+(v^E&(k^v))+I[15]+3634488961&4294967295,A=k+(x<<14&4294967295|x>>>18),x=E+(k^v&(A^k))+I[4]+3889429448&4294967295,E=A+(x<<20&4294967295|x>>>12),x=v+(A^k&(E^A))+I[9]+568446438&4294967295,v=E+(x<<5&4294967295|x>>>27),x=k+(E^A&(v^E))+I[14]+3275163606&4294967295,k=v+(x<<9&4294967295|x>>>23),x=A+(v^E&(k^v))+I[3]+4107603335&4294967295,A=k+(x<<14&4294967295|x>>>18),x=E+(k^v&(A^k))+I[8]+1163531501&4294967295,E=A+(x<<20&4294967295|x>>>12),x=v+(A^k&(E^A))+I[13]+2850285829&4294967295,v=E+(x<<5&4294967295|x>>>27),x=k+(E^A&(v^E))+I[2]+4243563512&4294967295,k=v+(x<<9&4294967295|x>>>23),x=A+(v^E&(k^v))+I[7]+1735328473&4294967295,A=k+(x<<14&4294967295|x>>>18),x=E+(k^v&(A^k))+I[12]+2368359562&4294967295,E=A+(x<<20&4294967295|x>>>12),x=v+(E^A^k)+I[5]+4294588738&4294967295,v=E+(x<<4&4294967295|x>>>28),x=k+(v^E^A)+I[8]+2272392833&4294967295,k=v+(x<<11&4294967295|x>>>21),x=A+(k^v^E)+I[11]+1839030562&4294967295,A=k+(x<<16&4294967295|x>>>16),x=E+(A^k^v)+I[14]+4259657740&4294967295,E=A+(x<<23&4294967295|x>>>9),x=v+(E^A^k)+I[1]+2763975236&4294967295,v=E+(x<<4&4294967295|x>>>28),x=k+(v^E^A)+I[4]+1272893353&4294967295,k=v+(x<<11&4294967295|x>>>21),x=A+(k^v^E)+I[7]+4139469664&4294967295,A=k+(x<<16&4294967295|x>>>16),x=E+(A^k^v)+I[10]+3200236656&4294967295,E=A+(x<<23&4294967295|x>>>9),x=v+(E^A^k)+I[13]+681279174&4294967295,v=E+(x<<4&4294967295|x>>>28),x=k+(v^E^A)+I[0]+3936430074&4294967295,k=v+(x<<11&4294967295|x>>>21),x=A+(k^v^E)+I[3]+3572445317&4294967295,A=k+(x<<16&4294967295|x>>>16),x=E+(A^k^v)+I[6]+76029189&4294967295,E=A+(x<<23&4294967295|x>>>9),x=v+(E^A^k)+I[9]+3654602809&4294967295,v=E+(x<<4&4294967295|x>>>28),x=k+(v^E^A)+I[12]+3873151461&4294967295,k=v+(x<<11&4294967295|x>>>21),x=A+(k^v^E)+I[15]+530742520&4294967295,A=k+(x<<16&4294967295|x>>>16),x=E+(A^k^v)+I[2]+3299628645&4294967295,E=A+(x<<23&4294967295|x>>>9),x=v+(A^(E|~k))+I[0]+4096336452&4294967295,v=E+(x<<6&4294967295|x>>>26),x=k+(E^(v|~A))+I[7]+1126891415&4294967295,k=v+(x<<10&4294967295|x>>>22),x=A+(v^(k|~E))+I[14]+2878612391&4294967295,A=k+(x<<15&4294967295|x>>>17),x=E+(k^(A|~v))+I[5]+4237533241&4294967295,E=A+(x<<21&4294967295|x>>>11),x=v+(A^(E|~k))+I[12]+1700485571&4294967295,v=E+(x<<6&4294967295|x>>>26),x=k+(E^(v|~A))+I[3]+2399980690&4294967295,k=v+(x<<10&4294967295|x>>>22),x=A+(v^(k|~E))+I[10]+4293915773&4294967295,A=k+(x<<15&4294967295|x>>>17),x=E+(k^(A|~v))+I[1]+2240044497&4294967295,E=A+(x<<21&4294967295|x>>>11),x=v+(A^(E|~k))+I[8]+1873313359&4294967295,v=E+(x<<6&4294967295|x>>>26),x=k+(E^(v|~A))+I[15]+4264355552&4294967295,k=v+(x<<10&4294967295|x>>>22),x=A+(v^(k|~E))+I[6]+2734768916&4294967295,A=k+(x<<15&4294967295|x>>>17),x=E+(k^(A|~v))+I[13]+1309151649&4294967295,E=A+(x<<21&4294967295|x>>>11),x=v+(A^(E|~k))+I[4]+4149444226&4294967295,v=E+(x<<6&4294967295|x>>>26),x=k+(E^(v|~A))+I[11]+3174756917&4294967295,k=v+(x<<10&4294967295|x>>>22),x=A+(v^(k|~E))+I[2]+718787259&4294967295,A=k+(x<<15&4294967295|x>>>17),x=E+(k^(A|~v))+I[9]+3951481745&4294967295,_.g[0]=_.g[0]+v&4294967295,_.g[1]=_.g[1]+(A+(x<<21&4294967295|x>>>11))&4294967295,_.g[2]=_.g[2]+A&4294967295,_.g[3]=_.g[3]+k&4294967295}r.prototype.v=function(_,v){v===void 0&&(v=_.length);const E=v-this.blockSize,I=this.C;let A=this.h,k=0;for(;k<v;){if(A==0)for(;k<=E;)i(this,_,k),k+=this.blockSize;if(typeof _=="string"){for(;k<v;)if(I[A++]=_.charCodeAt(k++),A==this.blockSize){i(this,I),A=0;break}}else for(;k<v;)if(I[A++]=_[k++],A==this.blockSize){i(this,I),A=0;break}}this.h=A,this.o+=v},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var v=1;v<_.length-8;++v)_[v]=0;v=this.o*8;for(var E=_.length-8;E<_.length;++E)_[E]=v&255,v/=256;for(this.v(_),_=Array(16),v=0,E=0;E<4;++E)for(let I=0;I<32;I+=8)_[v++]=this.g[E]>>>I&255;return _};function s(_,v){var E=c;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=v(_)}function o(_,v){this.h=v;const E=[];let I=!0;for(let A=_.length-1;A>=0;A--){const k=_[A]|0;I&&k==v||(E[A]=k,I=!1)}this.g=E}var c={};function u(_){return-128<=_&&_<128?s(_,function(v){return new o([v|0],v<0?-1:0)}):new o([_|0],_<0?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return m;if(_<0)return L(d(-_));const v=[];let E=1;for(let I=0;_>=E;I++)v[I]=_/E|0,E*=4294967296;return new o(v,0)}function p(_,v){if(_.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(_.charAt(0)=="-")return L(p(_.substring(1),v));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=d(Math.pow(v,8));let I=m;for(let k=0;k<_.length;k+=8){var A=Math.min(8,_.length-k);const x=parseInt(_.substring(k,k+A),v);A<8?(A=d(Math.pow(v,A)),I=I.j(A).add(d(x))):(I=I.j(E),I=I.add(d(x)))}return I}var m=u(0),y=u(1),C=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-L(this).m();let _=0,v=1;for(let E=0;E<this.g.length;E++){const I=this.i(E);_+=(I>=0?I:4294967296+I)*v,v*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(P(this))return"0";if(N(this))return"-"+L(this).toString(_);const v=d(Math.pow(_,6));var E=this;let I="";for(;;){const A=j(E,v).g;E=S(E,A.j(v));let k=((E.g.length>0?E.g[0]:E.h)>>>0).toString(_);if(E=A,P(E))return k+I;for(;k.length<6;)k="0"+k;I=k+I}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function P(_){if(_.h!=0)return!1;for(let v=0;v<_.g.length;v++)if(_.g[v]!=0)return!1;return!0}function N(_){return _.h==-1}t.l=function(_){return _=S(this,_),N(_)?-1:P(_)?0:1};function L(_){const v=_.g.length,E=[];for(let I=0;I<v;I++)E[I]=~_.g[I];return new o(E,~_.h).add(y)}t.abs=function(){return N(this)?L(this):this},t.add=function(_){const v=Math.max(this.g.length,_.g.length),E=[];let I=0;for(let A=0;A<=v;A++){let k=I+(this.i(A)&65535)+(_.i(A)&65535),x=(k>>>16)+(this.i(A)>>>16)+(_.i(A)>>>16);I=x>>>16,k&=65535,x&=65535,E[A]=x<<16|k}return new o(E,E[E.length-1]&-2147483648?-1:0)};function S(_,v){return _.add(L(v))}t.j=function(_){if(P(this)||P(_))return m;if(N(this))return N(_)?L(this).j(L(_)):L(L(this).j(_));if(N(_))return L(this.j(L(_)));if(this.l(C)<0&&_.l(C)<0)return d(this.m()*_.m());const v=this.g.length+_.g.length,E=[];for(var I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(let A=0;A<_.g.length;A++){const k=this.i(I)>>>16,x=this.i(I)&65535,Pe=_.i(A)>>>16,z=_.i(A)&65535;E[2*I+2*A]+=x*z,w(E,2*I+2*A),E[2*I+2*A+1]+=k*z,w(E,2*I+2*A+1),E[2*I+2*A+1]+=x*Pe,w(E,2*I+2*A+1),E[2*I+2*A+2]+=k*Pe,w(E,2*I+2*A+2)}for(_=0;_<v;_++)E[_]=E[2*_+1]<<16|E[2*_];for(_=v;_<2*v;_++)E[_]=0;return new o(E,0)};function w(_,v){for(;(_[v]&65535)!=_[v];)_[v+1]+=_[v]>>>16,_[v]&=65535,v++}function T(_,v){this.g=_,this.h=v}function j(_,v){if(P(v))throw Error("division by zero");if(P(_))return new T(m,m);if(N(_))return v=j(L(_),v),new T(L(v.g),L(v.h));if(N(v))return v=j(_,L(v)),new T(L(v.g),v.h);if(_.g.length>30){if(N(_)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=y,I=v;I.l(_)<=0;)E=F(E),I=F(I);var A=U(E,1),k=U(I,1);for(I=U(I,2),E=U(E,2);!P(I);){var x=k.add(I);x.l(_)<=0&&(A=A.add(E),k=x),I=U(I,1),E=U(E,1)}return v=S(_,A.j(v)),new T(A,v)}for(A=m;_.l(v)>=0;){for(E=Math.max(1,Math.floor(_.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),k=d(E),x=k.j(v);N(x)||x.l(_)>0;)E-=I,k=d(E),x=k.j(v);P(k)&&(k=y),A=A.add(k),_=S(_,x)}return new T(A,_)}t.B=function(_){return j(this,_).h},t.and=function(_){const v=Math.max(this.g.length,_.g.length),E=[];for(let I=0;I<v;I++)E[I]=this.i(I)&_.i(I);return new o(E,this.h&_.h)},t.or=function(_){const v=Math.max(this.g.length,_.g.length),E=[];for(let I=0;I<v;I++)E[I]=this.i(I)|_.i(I);return new o(E,this.h|_.h)},t.xor=function(_){const v=Math.max(this.g.length,_.g.length),E=[];for(let I=0;I<v;I++)E[I]=this.i(I)^_.i(I);return new o(E,this.h^_.h)};function F(_){const v=_.g.length+1,E=[];for(let I=0;I<v;I++)E[I]=_.i(I)<<1|_.i(I-1)>>>31;return new o(E,_.h)}function U(_,v){const E=v>>5;v%=32;const I=_.g.length-E,A=[];for(let k=0;k<I;k++)A[k]=v>0?_.i(k+E)>>>v|_.i(k+E+1)<<32-v:_.i(k+E);return new o(A,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,V0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,ar=o}).apply(typeof Rg<"u"?Rg:typeof self<"u"?self:typeof window<"u"?window:{});var Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L0,Us,O0,Ka,zh,M0,F0,U0;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Aa=="object"&&Aa];for(var h=0;h<l.length;++h){var f=l[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var f=r;l=l.split(".");for(var g=0;g<l.length-1;g++){var R=l[g];if(!(R in f))break e;f=f[R]}l=l[l.length-1],g=f[l],h=h(g),h!=g&&h!=null&&e(f,l,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(h){var f=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&f.push([g,h[g]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,f){return l.call.apply(l.bind,arguments)}function d(l,h,f){return d=u,d.apply(null,arguments)}function p(l,h){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function m(l,h){function f(){}f.prototype=h.prototype,l.Z=h.prototype,l.prototype=new f,l.prototype.constructor=l,l.Ob=function(g,R,b){for(var B=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)B[Z-2]=arguments[Z];return h.prototype[R].apply(g,B)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function C(l){const h=l.length;if(h>0){const f=Array(h);for(let g=0;g<h;g++)f[g]=l[g];return f}return[]}function P(l,h){for(let g=1;g<arguments.length;g++){const R=arguments[g];var f=typeof R;if(f=f!="object"?f:R?Array.isArray(R)?"array":f:"null",f=="array"||f=="object"&&typeof R.length=="number"){f=l.length||0;const b=R.length||0;l.length=f+b;for(let B=0;B<b;B++)l[f+B]=R[B]}else l.push(R)}}class N{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function L(l){o.setTimeout(()=>{throw l},0)}function S(){var l=_;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class w{constructor(){this.h=this.g=null}add(h,f){const g=T.get();g.set(h,f),this.h?this.h.next=g:this.g=g,this.h=g}}var T=new N(()=>new j,l=>l.reset());class j{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let F,U=!1,_=new w,v=()=>{const l=Promise.resolve(void 0);F=()=>{l.then(E)}};function E(){for(var l;l=S();){try{l.h.call(l.g)}catch(f){L(f)}var h=T;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}U=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const f=()=>{};o.addEventListener("test",f,h),o.removeEventListener("test",f,h)}catch{}return l}();function x(l){return/^[\s\xa0]*$/.test(l)}function Pe(l,h){A.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}m(Pe,A),Pe.prototype.init=function(l,h){const f=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(f=="mouseover"?h=l.fromElement:f=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var z="closure_listenable_"+(Math.random()*1e6|0),ne=0;function ae(l,h,f,g,R){this.listener=l,this.proxy=null,this.src=h,this.type=f,this.capture=!!g,this.ha=R,this.key=++ne,this.da=this.fa=!1}function O(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function H(l,h,f){for(const g in l)h.call(f,l[g],g,l)}function J(l,h){for(const f in l)h.call(void 0,l[f],f,l)}function ue(l){const h={};for(const f in l)h[f]=l[f];return h}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kt(l,h){let f,g;for(let R=1;R<arguments.length;R++){g=arguments[R];for(f in g)l[f]=g[f];for(let b=0;b<fe.length;b++)f=fe[b],Object.prototype.hasOwnProperty.call(g,f)&&(l[f]=g[f])}}function Rt(l){this.src=l,this.g={},this.h=0}Rt.prototype.add=function(l,h,f,g,R){const b=l.toString();l=this.g[b],l||(l=this.g[b]=[],this.h++);const B=Ot(l,h,g,R);return B>-1?(h=l[B],f||(h.fa=!1)):(h=new ae(h,this.src,b,!!g,R),h.fa=f,l.push(h)),h};function Ar(l,h){const f=h.type;if(f in l.g){var g=l.g[f],R=Array.prototype.indexOf.call(g,h,void 0),b;(b=R>=0)&&Array.prototype.splice.call(g,R,1),b&&(O(h),l.g[f].length==0&&(delete l.g[f],l.h--))}}function Ot(l,h,f,g){for(let R=0;R<l.length;++R){const b=l[R];if(!b.da&&b.listener==h&&b.capture==!!f&&b.ha==g)return R}return-1}var bn="closure_lm_"+(Math.random()*1e6|0),Dc={};function $f(l,h,f,g,R){if(g&&g.once)return Gf(l,h,f,g,R);if(Array.isArray(h)){for(let b=0;b<h.length;b++)$f(l,h[b],f,g,R);return null}return f=Mc(f),l&&l[z]?l.J(h,f,c(g)?!!g.capture:!!g,R):Hf(l,h,f,!1,g,R)}function Hf(l,h,f,g,R,b){if(!h)throw Error("Invalid event type");const B=c(R)?!!R.capture:!!R;let Z=Lc(l);if(Z||(l[bn]=Z=new Rt(l)),f=Z.add(h,f,g,B,b),f.proxy)return f;if(g=m1(),f.proxy=g,g.src=l,g.listener=f,l.addEventListener)k||(R=B),R===void 0&&(R=!1),l.addEventListener(h.toString(),g,R);else if(l.attachEvent)l.attachEvent(Qf(h.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function m1(){function l(f){return h.call(l.src,l.listener,f)}const h=g1;return l}function Gf(l,h,f,g,R){if(Array.isArray(h)){for(let b=0;b<h.length;b++)Gf(l,h[b],f,g,R);return null}return f=Mc(f),l&&l[z]?l.K(h,f,c(g)?!!g.capture:!!g,R):Hf(l,h,f,!0,g,R)}function Kf(l,h,f,g,R){if(Array.isArray(h))for(var b=0;b<h.length;b++)Kf(l,h[b],f,g,R);else g=c(g)?!!g.capture:!!g,f=Mc(f),l&&l[z]?(l=l.i,b=String(h).toString(),b in l.g&&(h=l.g[b],f=Ot(h,f,g,R),f>-1&&(O(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete l.g[b],l.h--)))):l&&(l=Lc(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Ot(h,f,g,R)),(f=l>-1?h[l]:null)&&Vc(f))}function Vc(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[z])Ar(h.i,l);else{var f=l.type,g=l.proxy;h.removeEventListener?h.removeEventListener(f,g,l.capture):h.detachEvent?h.detachEvent(Qf(f),g):h.addListener&&h.removeListener&&h.removeListener(g),(f=Lc(h))?(Ar(f,l),f.h==0&&(f.src=null,h[bn]=null)):O(l)}}}function Qf(l){return l in Dc?Dc[l]:Dc[l]="on"+l}function g1(l,h){if(l.da)l=!0;else{h=new Pe(h,this);const f=l.listener,g=l.ha||l.src;l.fa&&Vc(l),l=f.call(g,h)}return l}function Lc(l){return l=l[bn],l instanceof Rt?l:null}var Oc="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mc(l){return typeof l=="function"?l:(l[Oc]||(l[Oc]=function(h){return l.handleEvent(h)}),l[Oc])}function Ye(){I.call(this),this.i=new Rt(this),this.M=this,this.G=null}m(Ye,I),Ye.prototype[z]=!0,Ye.prototype.removeEventListener=function(l,h,f,g){Kf(this,l,h,f,g)};function st(l,h){var f,g=l.G;if(g)for(f=[];g;g=g.G)f.push(g);if(l=l.M,g=h.type||h,typeof h=="string")h=new A(h,l);else if(h instanceof A)h.target=h.target||l;else{var R=h;h=new A(g,l),Kt(h,R)}R=!0;let b,B;if(f)for(B=f.length-1;B>=0;B--)b=h.g=f[B],R=Yo(b,g,!0,h)&&R;if(b=h.g=l,R=Yo(b,g,!0,h)&&R,R=Yo(b,g,!1,h)&&R,f)for(B=0;B<f.length;B++)b=h.g=f[B],R=Yo(b,g,!1,h)&&R}Ye.prototype.N=function(){if(Ye.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const f=l.g[h];for(let g=0;g<f.length;g++)O(f[g]);delete l.g[h],l.h--}}this.G=null},Ye.prototype.J=function(l,h,f,g){return this.i.add(String(l),h,!1,f,g)},Ye.prototype.K=function(l,h,f,g){return this.i.add(String(l),h,!0,f,g)};function Yo(l,h,f,g){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let R=!0;for(let b=0;b<h.length;++b){const B=h[b];if(B&&!B.da&&B.capture==f){const Z=B.listener,Ve=B.ha||B.src;B.fa&&Ar(l.i,B),R=Z.call(Ve,g)!==!1&&R}}return R&&!g.defaultPrevented}function y1(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function Yf(l){l.g=y1(()=>{l.g=null,l.i&&(l.i=!1,Yf(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class v1 extends I{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Yf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ls(l){I.call(this),this.h=l,this.g={}}m(ls,I);var Xf=[];function Jf(l){H(l.g,function(h,f){this.g.hasOwnProperty(f)&&Vc(h)},l),l.g={}}ls.prototype.N=function(){ls.Z.N.call(this),Jf(this)},ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fc=o.JSON.stringify,_1=o.JSON.parse,w1=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Zf(){}function ep(){}var cs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Uc(){A.call(this,"d")}m(Uc,A);function Bc(){A.call(this,"c")}m(Bc,A);var Cr={},tp=null;function Xo(){return tp=tp||new Ye}Cr.Ia="serverreachability";function np(l){A.call(this,Cr.Ia,l)}m(np,A);function us(l){const h=Xo();st(h,new np(h))}Cr.STAT_EVENT="statevent";function rp(l,h){A.call(this,Cr.STAT_EVENT,l),this.stat=h}m(rp,A);function ot(l){const h=Xo();st(h,new rp(h,l))}Cr.Ja="timingevent";function ip(l,h){A.call(this,Cr.Ja,l),this.size=h}m(ip,A);function hs(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function ds(){this.g=!0}ds.prototype.ua=function(){this.g=!1};function E1(l,h,f,g,R,b){l.info(function(){if(l.g)if(b){var B="",Z=b.split("&");for(let de=0;de<Z.length;de++){var Ve=Z[de].split("=");if(Ve.length>1){const Ue=Ve[0];Ve=Ve[1];const Yt=Ue.split("_");B=Yt.length>=2&&Yt[1]=="type"?B+(Ue+"="+Ve+"&"):B+(Ue+"=redacted&")}}}else B=null;else B=b;return"XMLHTTP REQ ("+g+") [attempt "+R+"]: "+h+`
`+f+`
`+B})}function x1(l,h,f,g,R,b,B){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+R+"]: "+h+`
`+f+`
`+b+" "+B})}function ii(l,h,f,g){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+I1(l,f)+(g?" "+g:"")})}function T1(l,h){l.info(function(){return"TIMEOUT: "+h})}ds.prototype.info=function(){};function I1(l,h){if(!l.g)return h;if(!h)return null;try{const b=JSON.parse(h);if(b){for(l=0;l<b.length;l++)if(Array.isArray(b[l])){var f=b[l];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var R=g[0];if(R!="noop"&&R!="stop"&&R!="close")for(let B=1;B<g.length;B++)g[B]=""}}}}return Fc(b)}catch{return h}}var Jo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},op;function zc(){}m(zc,Zf),zc.prototype.g=function(){return new XMLHttpRequest},op=new zc;function fs(l){return encodeURIComponent(String(l))}function S1(l){var h=1;l=l.split(":");const f=[];for(;h>0&&l.length;)f.push(l.shift()),h--;return l.length&&f.push(l.join(":")),f}function jn(l,h,f,g){this.j=l,this.i=h,this.l=f,this.S=g||1,this.V=new ls(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ap}function ap(){this.i=null,this.g="",this.h=!1}var lp={},Wc={};function qc(l,h,f){l.M=1,l.A=ea(Qt(h)),l.u=f,l.R=!0,cp(l,null)}function cp(l,h){l.F=Date.now(),Zo(l),l.B=Qt(l.A);var f=l.B,g=l.S;Array.isArray(g)||(g=[String(g)]),xp(f.i,"t",g),l.C=0,f=l.j.L,l.h=new ap,l.g=Up(l.j,f?h:null,!l.u),l.P>0&&(l.O=new v1(d(l.Y,l,l.g),l.P)),h=l.V,f=l.g,g=l.ba;var R="readystatechange";Array.isArray(R)||(R&&(Xf[0]=R.toString()),R=Xf);for(let b=0;b<R.length;b++){const B=$f(f,R[b],g||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=l.J?ue(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),us(),E1(l.i,l.v,l.B,l.l,l.S,l.u)}jn.prototype.ba=function(l){l=l.target;const h=this.O;h&&Vn(l)==3?h.j():this.Y(l)},jn.prototype.Y=function(l){try{if(l==this.g)e:{const Z=Vn(this.g),Ve=this.g.ya(),de=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||kp(this.g)))){this.K||Z!=4||Ve==7||(Ve==8||de<=0?us(3):us(2)),$c(this);var h=this.g.ca();this.X=h;var f=A1(this);if(this.o=h==200,x1(this.i,this.v,this.B,this.l,this.S,Z,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,R=this.g;if((g=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(g)){var b=g;break t}}b=null}if(l=b)ii(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Hc(this,l);else{this.o=!1,this.m=3,ot(12),Rr(this),ps(this);break e}}if(this.R){l=!0;let Ue;for(;!this.K&&this.C<f.length;)if(Ue=C1(this,f),Ue==Wc){Z==4&&(this.m=4,ot(14),l=!1),ii(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==lp){this.m=4,ot(15),ii(this.i,this.l,f,"[Invalid Chunk]"),l=!1;break}else ii(this.i,this.l,Ue,null),Hc(this,Ue);if(up(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||f.length!=0||this.h.h||(this.m=1,ot(16),l=!1),this.o=this.o&&l,!l)ii(this.i,this.l,f,"[Invalid Chunked Response]"),Rr(this),ps(this);else if(f.length>0&&!this.W){this.W=!0;var B=this.j;B.g==this&&B.aa&&!B.P&&(B.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),eu(B),B.P=!0,ot(11))}}else ii(this.i,this.l,f,null),Hc(this,f);Z==4&&Rr(this),this.o&&!this.K&&(Z==4?Lp(this.j,this):(this.o=!1,Zo(this)))}else B1(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),Rr(this),ps(this)}}}catch{}finally{}};function A1(l){if(!up(l))return l.g.la();const h=kp(l.g);if(h==="")return"";let f="";const g=h.length,R=Vn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Rr(l),ps(l),"";l.h.i=new o.TextDecoder}for(let b=0;b<g;b++)l.h.h=!0,f+=l.h.i.decode(h[b],{stream:!(R&&b==g-1)});return h.length=0,l.h.g+=f,l.C=0,l.h.g}function up(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function C1(l,h){var f=l.C,g=h.indexOf(`
`,f);return g==-1?Wc:(f=Number(h.substring(f,g)),isNaN(f)?lp:(g+=1,g+f>h.length?Wc:(h=h.slice(g,g+f),l.C=g+f,h)))}jn.prototype.cancel=function(){this.K=!0,Rr(this)};function Zo(l){l.T=Date.now()+l.H,hp(l,l.H)}function hp(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=hs(d(l.aa,l),h)}function $c(l){l.D&&(o.clearTimeout(l.D),l.D=null)}jn.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(T1(this.i,this.B),this.M!=2&&(us(),ot(17)),Rr(this),this.m=2,ps(this)):hp(this,this.T-l)};function ps(l){l.j.I==0||l.K||Lp(l.j,l)}function Rr(l){$c(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,Jf(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function Hc(l,h){try{var f=l.j;if(f.I!=0&&(f.g==l||Gc(f.h,l))){if(!l.L&&Gc(f.h,l)&&f.I==3){try{var g=f.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var R=g;if(R[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<l.F)sa(f),ra(f);else break e;Zc(f),ot(18)}}else f.xa=R[1],0<f.xa-f.K&&R[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=hs(d(f.Va,f),6e3));pp(f.h)<=1&&f.ta&&(f.ta=void 0)}else Pr(f,11)}else if((l.L||f.g==l)&&sa(f),!x(h))for(R=f.Ba.g.parse(h),h=0;h<R.length;h++){let de=R[h];const Ue=de[0];if(!(Ue<=f.K))if(f.K=Ue,de=de[1],f.I==2)if(de[0]=="c"){f.M=de[1],f.ba=de[2];const Yt=de[3];Yt!=null&&(f.ka=Yt,f.j.info("VER="+f.ka));const br=de[4];br!=null&&(f.za=br,f.j.info("SVER="+f.za));const Ln=de[5];Ln!=null&&typeof Ln=="number"&&Ln>0&&(g=1.5*Ln,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const On=l.g;if(On){const aa=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(aa){var b=g.h;b.g||aa.indexOf("spdy")==-1&&aa.indexOf("quic")==-1&&aa.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Kc(b,b.h),b.h=null))}if(g.G){const tu=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;tu&&(g.wa=tu,ge(g.J,g.G,tu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-l.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var B=l;if(g.na=Fp(g,g.L?g.ba:null,g.W),B.L){mp(g.h,B);var Z=B,Ve=g.O;Ve&&(Z.H=Ve),Z.D&&($c(Z),Zo(Z)),g.g=B}else Dp(g);f.i.length>0&&ia(f)}else de[0]!="stop"&&de[0]!="close"||Pr(f,7);else f.I==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Pr(f,7):Jc(f):de[0]!="noop"&&f.l&&f.l.qa(de),f.A=0)}}us(4)}catch{}}var R1=class{constructor(l,h){this.g=l,this.map=h}};function dp(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function pp(l){return l.h?1:l.g?l.g.size:0}function Gc(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Kc(l,h){l.g?l.g.add(h):l.h=h}function mp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}dp.prototype.cancel=function(){if(this.i=gp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function gp(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const f of l.g.values())h=h.concat(f.G);return h}return C(l.i)}var yp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k1(l,h){if(l){l=l.split("&");for(let f=0;f<l.length;f++){const g=l[f].indexOf("=");let R,b=null;g>=0?(R=l[f].substring(0,g),b=l[f].substring(g+1)):R=l[f],h(R,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Nn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof Nn?(this.l=l.l,ms(this,l.j),this.o=l.o,this.g=l.g,gs(this,l.u),this.h=l.h,Qc(this,Tp(l.i)),this.m=l.m):l&&(h=String(l).match(yp))?(this.l=!1,ms(this,h[1]||"",!0),this.o=ys(h[2]||""),this.g=ys(h[3]||"",!0),gs(this,h[4]),this.h=ys(h[5]||"",!0),Qc(this,h[6]||"",!0),this.m=ys(h[7]||"")):(this.l=!1,this.i=new _s(null,this.l))}Nn.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(vs(h,vp,!0),":");var f=this.g;return(f||h=="file")&&(l.push("//"),(h=this.o)&&l.push(vs(h,vp,!0),"@"),l.push(fs(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&l.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(vs(f,f.charAt(0)=="/"?j1:b1,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",vs(f,D1)),l.join("")},Nn.prototype.resolve=function(l){const h=Qt(this);let f=!!l.j;f?ms(h,l.j):f=!!l.o,f?h.o=l.o:f=!!l.g,f?h.g=l.g:f=l.u!=null;var g=l.h;if(f)gs(h,l.u);else if(f=!!l.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var R=h.h.lastIndexOf("/");R!=-1&&(g=h.h.slice(0,R+1)+g)}if(R=g,R==".."||R==".")g="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){g=R.lastIndexOf("/",0)==0,R=R.split("/");const b=[];for(let B=0;B<R.length;){const Z=R[B++];Z=="."?g&&B==R.length&&b.push(""):Z==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),g&&B==R.length&&b.push("")):(b.push(Z),g=!0)}g=b.join("/")}else g=R}return f?h.h=g:f=l.i.toString()!=="",f?Qc(h,Tp(l.i)):f=!!l.m,f&&(h.m=l.m),h};function Qt(l){return new Nn(l)}function ms(l,h,f){l.j=f?ys(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function gs(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function Qc(l,h,f){h instanceof _s?(l.i=h,V1(l.i,l.l)):(f||(h=vs(h,N1)),l.i=new _s(h,l.l))}function ge(l,h,f){l.i.set(h,f)}function ea(l){return ge(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function ys(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function vs(l,h,f){return typeof l=="string"?(l=encodeURI(l).replace(h,P1),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function P1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var vp=/[#\/\?@]/g,b1=/[#\?:]/g,j1=/[#\?]/g,N1=/[#\?@]/g,D1=/#/g;function _s(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function kr(l){l.g||(l.g=new Map,l.h=0,l.i&&k1(l.i,function(h,f){l.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=_s.prototype,t.add=function(l,h){kr(this),this.i=null,l=si(this,l);let f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(h),this.h+=1,this};function _p(l,h){kr(l),h=si(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function wp(l,h){return kr(l),h=si(l,h),l.g.has(h)}t.forEach=function(l,h){kr(this),this.g.forEach(function(f,g){f.forEach(function(R){l.call(h,R,g,this)},this)},this)};function Ep(l,h){kr(l);let f=[];if(typeof h=="string")wp(l,h)&&(f=f.concat(l.g.get(si(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)f=f.concat(l[h]);return f}t.set=function(l,h){return kr(this),this.i=null,l=si(this,l),wp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=Ep(this,l),l.length>0?String(l[0]):h):h};function xp(l,h,f){_p(l,h),f.length>0&&(l.i=null,l.g.set(si(l,h),C(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var f=h[g];const R=fs(f);f=Ep(this,f);for(let b=0;b<f.length;b++){let B=R;f[b]!==""&&(B+="="+fs(f[b])),l.push(B)}}return this.i=l.join("&")};function Tp(l){const h=new _s;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function si(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function V1(l,h){h&&!l.j&&(kr(l),l.i=null,l.g.forEach(function(f,g){const R=g.toLowerCase();g!=R&&(_p(this,g),xp(this,R,f))},l)),l.j=h}function L1(l,h){const f=new ds;if(o.Image){const g=new Image;g.onload=p(Dn,f,"TestLoadImage: loaded",!0,h,g),g.onerror=p(Dn,f,"TestLoadImage: error",!1,h,g),g.onabort=p(Dn,f,"TestLoadImage: abort",!1,h,g),g.ontimeout=p(Dn,f,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else h(!1)}function O1(l,h){const f=new ds,g=new AbortController,R=setTimeout(()=>{g.abort(),Dn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:g.signal}).then(b=>{clearTimeout(R),b.ok?Dn(f,"TestPingServer: ok",!0,h):Dn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),Dn(f,"TestPingServer: error",!1,h)})}function Dn(l,h,f,g,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),g(f)}catch{}}function M1(){this.g=new w1}function Yc(l){this.i=l.Sb||null,this.h=l.ab||!1}m(Yc,Zf),Yc.prototype.g=function(){return new ta(this.i,this.h)};function ta(l,h){Ye.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(ta,Ye),t=ta.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Es(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ip(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ip(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?ws(this):Es(this),this.readyState==3&&Ip(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,ws(this))},t.Na=function(l){this.g&&(this.response=l,ws(this))},t.ga=function(){this.g&&ws(this)};function ws(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Es(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=h.next();return l.join(`\r
`)};function Es(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Sp(l){let h="";return H(l,function(f,g){h+=g,h+=":",h+=f,h+=`\r
`}),h}function Xc(l,h,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Sp(f),typeof l=="string"?f!=null&&fs(f):ge(l,h,f))}function Se(l){Ye.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Se,Ye);var F1=/^https?$/i,U1=["POST","PUT"];t=Se.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():op.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(b){Ap(this,b);return}if(l=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var R in g)f.set(R,g[R]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const b of g.keys())f.set(b,g.get(b));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(b=>b.toLowerCase()=="content-type"),R=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(U1,h,void 0)>=0)||g||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,B]of f)this.g.setRequestHeader(b,B);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(b){Ap(this,b)}};function Ap(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Cp(l),na(l)}function Cp(l){l.A||(l.A=!0,st(l,"complete"),st(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,st(this,"complete"),st(this,"abort"),na(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),na(this,!0)),Se.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Rp(this):this.Xa())},t.Xa=function(){Rp(this)};function Rp(l){if(l.h&&typeof s<"u"){if(l.v&&Vn(l)==4)setTimeout(l.Ca.bind(l),0);else if(st(l,"readystatechange"),Vn(l)==4){l.h=!1;try{const b=l.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var g;if(g=b===0){let B=String(l.D).match(yp)[1]||null;!B&&o.self&&o.self.location&&(B=o.self.location.protocol.slice(0,-1)),g=!F1.test(B?B.toLowerCase():"")}f=g}if(f)st(l,"complete"),st(l,"success");else{l.o=6;try{var R=Vn(l)>2?l.g.statusText:""}catch{R=""}l.l=R+" ["+l.ca()+"]",Cp(l)}}finally{na(l)}}}}function na(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const f=l.g;l.g=null,h||st(l,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Vn(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Vn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),_1(h)}};function kp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function B1(l){const h={};l=(l.g&&Vn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(x(l[g]))continue;var f=S1(l[g]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const b=h[R]||[];h[R]=b,b.push(f)}J(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(l,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||h}function Pp(l){this.za=0,this.i=[],this.j=new ds,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xs("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xs("baseRetryDelayMs",5e3,l),this.Za=xs("retryDelaySeedMs",1e4,l),this.Ta=xs("forwardChannelMaxRetries",2,l),this.va=xs("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new dp(l&&l.concurrentRequestLimit),this.Ba=new M1,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Pp.prototype,t.ka=8,t.I=1,t.connect=function(l,h,f,g){ot(0),this.W=l,this.H=h||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=Fp(this,null,this.W),ia(this)};function Jc(l){if(bp(l),l.I==3){var h=l.V++,f=Qt(l.J);if(ge(f,"SID",l.M),ge(f,"RID",h),ge(f,"TYPE","terminate"),Ts(l,f),h=new jn(l,l.j,h),h.M=2,h.A=ea(Qt(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=h.A,f=!0),f||(h.g=Up(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Zo(h)}Mp(l)}function ra(l){l.g&&(eu(l),l.g.cancel(),l.g=null)}function bp(l){ra(l),l.v&&(o.clearTimeout(l.v),l.v=null),sa(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function ia(l){if(!fp(l.h)&&!l.m){l.m=!0;var h=l.Ea;F||v(),U||(F(),U=!0),_.add(h,l),l.D=0}}function z1(l,h){return pp(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=hs(d(l.Ea,l,h),Op(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const R=new jn(this,this.j,l);let b=this.o;if(this.U&&(b?(b=ue(b),Kt(b,this.U)):b=this.U),this.u!==null||this.R||(R.J=b,b=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Np(this,R,h),f=Qt(this.J),ge(f,"RID",l),ge(f,"CVER",22),this.G&&ge(f,"X-HTTP-Session-Id",this.G),Ts(this,f),b&&(this.R?h="headers="+fs(Sp(b))+"&"+h:this.u&&Xc(f,this.u,b)),Kc(this.h,R),this.Ra&&ge(f,"TYPE","init"),this.S?(ge(f,"$req",h),ge(f,"SID","null"),R.U=!0,qc(R,f,null)):qc(R,f,h),this.I=2}}else this.I==3&&(l?jp(this,l):this.i.length==0||fp(this.h)||jp(this))};function jp(l,h){var f;h?f=h.l:f=l.V++;const g=Qt(l.J);ge(g,"SID",l.M),ge(g,"RID",f),ge(g,"AID",l.K),Ts(l,g),l.u&&l.o&&Xc(g,l.u,l.o),f=new jn(l,l.j,f,l.D+1),l.u===null&&(f.J=l.o),h&&(l.i=h.G.concat(l.i)),h=Np(l,f,1e3),f.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Kc(l.h,f),qc(f,g,h)}function Ts(l,h){l.H&&H(l.H,function(f,g){ge(h,g,f)}),l.l&&H({},function(f,g){ge(h,g,f)})}function Np(l,h,f){f=Math.min(l.i.length,f);const g=l.l?d(l.l.Ka,l.l,l):null;e:{var R=l.i;let Z=-1;for(;;){const Ve=["count="+f];Z==-1?f>0?(Z=R[0].g,Ve.push("ofs="+Z)):Z=0:Ve.push("ofs="+Z);let de=!0;for(let Ue=0;Ue<f;Ue++){var b=R[Ue].g;const Yt=R[Ue].map;if(b-=Z,b<0)Z=Math.max(0,R[Ue].g-100),de=!1;else try{b="req"+b+"_"||"";try{var B=Yt instanceof Map?Yt:Object.entries(Yt);for(const[br,Ln]of B){let On=Ln;c(Ln)&&(On=Fc(Ln)),Ve.push(b+br+"="+encodeURIComponent(On))}}catch(br){throw Ve.push(b+"type="+encodeURIComponent("_badmap")),br}}catch{g&&g(Yt)}}if(de){B=Ve.join("&");break e}}B=void 0}return l=l.i.splice(0,f),h.G=l,B}function Dp(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;F||v(),U||(F(),U=!0),_.add(h,l),l.A=0}}function Zc(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=hs(d(l.Da,l),Op(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Vp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=hs(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),ra(this),Vp(this))};function eu(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Vp(l){l.g=new jn(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=Qt(l.na);ge(h,"RID","rpc"),ge(h,"SID",l.M),ge(h,"AID",l.K),ge(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&ge(h,"TO",l.ia),ge(h,"TYPE","xmlhttp"),Ts(l,h),l.u&&l.o&&Xc(h,l.u,l.o),l.O&&(l.g.H=l.O);var f=l.g;l=l.ba,f.M=1,f.A=ea(Qt(h)),f.u=null,f.R=!0,cp(f,l)}t.Va=function(){this.C!=null&&(this.C=null,ra(this),Zc(this),ot(19))};function sa(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Lp(l,h){var f=null;if(l.g==h){sa(l),eu(l),l.g=null;var g=2}else if(Gc(l.h,h))f=h.G,mp(l.h,h),g=1;else return;if(l.I!=0){if(h.o)if(g==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var R=l.D;g=Xo(),st(g,new ip(g,f)),ia(l)}else Dp(l);else if(R=h.m,R==3||R==0&&h.X>0||!(g==1&&z1(l,h)||g==2&&Zc(l)))switch(f&&f.length>0&&(h=l.h,h.i=h.i.concat(f)),R){case 1:Pr(l,5);break;case 4:Pr(l,10);break;case 3:Pr(l,6);break;default:Pr(l,2)}}}function Op(l,h){let f=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(f*=2),f*h}function Pr(l,h){if(l.j.info("Error code "+h),h==2){var f=d(l.bb,l),g=l.Ua;const R=!g;g=new Nn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ms(g,"https"),ea(g),R?L1(g.toString(),f):O1(g.toString(),f)}else ot(2);l.I=0,l.l&&l.l.pa(h),Mp(l),bp(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Mp(l){if(l.I=0,l.ja=[],l.l){const h=gp(l.h);(h.length!=0||l.i.length!=0)&&(P(l.ja,h),P(l.ja,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.oa()}}function Fp(l,h,f){var g=f instanceof Nn?Qt(f):new Nn(f);if(g.g!="")h&&(g.g=h+"."+g.g),gs(g,g.u);else{var R=o.location;g=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;const b=new Nn(null);g&&ms(b,g),h&&(b.g=h),R&&gs(b,R),f&&(b.h=f),g=b}return f=l.G,h=l.wa,f&&h&&ge(g,f,h),ge(g,"VER",l.ka),Ts(l,g),g}function Up(l,h,f){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Se(new Yc({ab:f})):new Se(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bp(){}t=Bp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function oa(){}oa.prototype.g=function(l,h){return new _t(l,h)};function _t(l,h){Ye.call(this),this.g=new Pp(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!x(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new oi(this)}m(_t,Ye),_t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_t.prototype.close=function(){Jc(this.g)},_t.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.v&&(f={},f.__data__=Fc(l),l=f);h.i.push(new R1(h.Ya++,l)),h.I==3&&ia(h)},_t.prototype.N=function(){this.g.l=null,delete this.j,Jc(this.g),delete this.g,_t.Z.N.call(this)};function zp(l){Uc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const f in h){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}m(zp,Uc);function Wp(){Bc.call(this),this.status=1}m(Wp,Bc);function oi(l){this.g=l}m(oi,Bp),oi.prototype.ra=function(){st(this.g,"a")},oi.prototype.qa=function(l){st(this.g,new zp(l))},oi.prototype.pa=function(l){st(this.g,new Wp)},oi.prototype.oa=function(){st(this.g,"b")},oa.prototype.createWebChannel=oa.prototype.g,_t.prototype.send=_t.prototype.o,_t.prototype.open=_t.prototype.m,_t.prototype.close=_t.prototype.close,U0=function(){return new oa},F0=function(){return Xo()},M0=Cr,zh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Jo.NO_ERROR=0,Jo.TIMEOUT=8,Jo.HTTP_ERROR=6,Ka=Jo,sp.COMPLETE="complete",O0=sp,ep.EventType=cs,cs.OPEN="a",cs.CLOSE="b",cs.ERROR="c",cs.MESSAGE="d",Ye.prototype.listen=Ye.prototype.J,Us=ep,Se.prototype.listenOnce=Se.prototype.K,Se.prototype.getLastError=Se.prototype.Ha,Se.prototype.getLastErrorCode=Se.prototype.ya,Se.prototype.getStatus=Se.prototype.ca,Se.prototype.getResponseJson=Se.prototype.La,Se.prototype.getResponseText=Se.prototype.la,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Fa,L0=Se}).apply(typeof Aa<"u"?Aa:typeof self<"u"?self:typeof window<"u"?window:{});const kg="@firebase/firestore",Pg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ns="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new ef("@firebase/firestore");function li(){return Xr.logLevel}function q(t,...e){if(Xr.logLevel<=re.DEBUG){const n=e.map(ff);Xr.debug(`Firestore (${ns}): ${t}`,...n)}}function An(t,...e){if(Xr.logLevel<=re.ERROR){const n=e.map(ff);Xr.error(`Firestore (${ns}): ${t}`,...n)}}function $i(t,...e){if(Xr.logLevel<=re.WARN){const n=e.map(ff);Xr.warn(`Firestore (${ns}): ${t}`,...n)}}function ff(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,B0(t,r,n)}function B0(t,e,n){let r=`FIRESTORE (${ns}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw An(r),new Error(r)}function ce(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||B0(e,i,r)}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(et.UNAUTHENTICATED))}shutdown(){}}class yC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vC{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new lr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new lr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new z0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new et(e)}}class _C{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wC{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new _C(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Et(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0,3512);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=xC(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function Wh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Lu(i)===Lu(s)?ie(i,s):Lu(i)?1:-1}return ie(t.length,e.length)}const TC=55296,IC=57343;function Lu(t){const e=t.charCodeAt(0);return e>=TC&&e<=IC}function Hi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="__name__";class en{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return en.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof en?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=en.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ie(e.length,n.length)}static compareSegments(e,n){const r=en.isNumericId(e),i=en.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?en.extractNumericId(e).compare(en.extractNumericId(n)):Wh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ar.fromString(e.substring(4,e.length-2))}}class pe extends en{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const SC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends en{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return SC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jg}static keyField(){return new He([jg])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new W(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new W(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(pe.fromString(e))}static fromName(e){return new K(pe.fromString(e).popFirst(5))}static empty(){return new K(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t,e,n){if(!n)throw new W(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AC(t,e,n,r){if(e===!0&&r===!0)throw new W(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ng(t){if(!K.isDocumentKey(t))throw new W(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dg(t){if(K.isDocumentKey(t))throw new W(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function q0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function dr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gc(t);throw new W(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t,e){const n={typeString:t};return e&&(n.value=e),n}function Bo(t,e){if(!q0(t))throw new W(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new W(D.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=-62135596800,Lg=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Lg);return new ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Vg)throw new W(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lg}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bo(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:De("string",ve._jsonSchemaVersion),seconds:De("number"),nanoseconds:De("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{static fromTimestamp(e){return new Y(e)}static min(){return new Y(new ve(0,0))}static max(){return new Y(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=-1;function CC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new fr(i,K.empty(),e)}function RC(t){return new fr(t.readTime,t.key,So)}class fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fr(Y.min(),K.empty(),So)}static max(){return new fr(Y.max(),K.empty(),So)}}function kC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rs(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==PC)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++c,c===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new V((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function jC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function is(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=-1;function vc(t){return t==null}function Ll(t){return t===0&&1/t==-1/0}function NC(t){return typeof t=="number"&&Number.isInteger(t)&&!Ll(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="";function DC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Og(e)),e=VC(t.get(n),e);return Og(e)}function VC(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case $0:n+="";break;default:n+=s}}return n}function Og(t){return t+$0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ir(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function H0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||$e.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$e.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$e.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ca(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ca(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ca(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ca(this.root,e,this.comparator,!0)}}class Ca{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $e{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??$e.RED,this.left=i??$e.EMPTY,this.right=s??$e.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $e(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $e.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}$e.EMPTY=null,$e.RED=!0,$e.BLACK=!1;$e.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new $e(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fg(this.data.getIterator())}getIteratorFrom(e){return new Fg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class Fg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new Tt([])}unionWith(e){let n=new Fe(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Tt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new G0("Invalid base64 string: "+s):s}}(e);return new Qe(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const LC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(t){if(ce(!!t,39018),typeof t=="string"){let e=0;const n=LC.exec(t);if(ce(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mr(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="server_timestamp",Q0="__type__",Y0="__previous_value__",X0="__local_write_time__";function gf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Q0])==null?void 0:r.stringValue)===K0}function _c(t){const e=t.mapValue.fields[Y0];return gf(e)?_c(e):e}function Ao(t){const e=pr(t.mapValue.fields[X0].timestampValue);return new ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,r,i,s,o,c,u,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=p}}const Ol="(default)";class Co{constructor(e,n){this.projectId=e,this.database=n||Ol}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database===Ol}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="__type__",Z0="__max__",Ra={mapValue:{fields:{__type__:{stringValue:Z0}}}},ew="__vector__",Ml="value";function gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gf(t)?4:FC(t)?9007199254740991:MC(t)?10:11:Q(28295,{value:t})}function un(t,e){if(t===e)return!0;const n=gr(t);if(n!==gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ao(t).isEqual(Ao(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=pr(i.timestampValue),c=pr(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return mr(i.bytesValue).isEqual(mr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ce(i.geoPointValue.latitude)===Ce(s.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ce(i.integerValue)===Ce(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ce(i.doubleValue),c=Ce(s.doubleValue);return o===c?Ll(o)===Ll(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Hi(t.arrayValue.values||[],e.arrayValue.values||[],un);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Mg(o)!==Mg(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!un(o[u],c[u])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function Ro(t,e){return(t.values||[]).find(n=>un(n,e))!==void 0}function Gi(t,e){if(t===e)return 0;const n=gr(t),r=gr(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=Ce(s.integerValue||s.doubleValue),u=Ce(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Ug(t.timestampValue,e.timestampValue);case 4:return Ug(Ao(t),Ao(e));case 5:return Wh(t.stringValue,e.stringValue);case 6:return function(s,o){const c=mr(s),u=mr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const p=ie(c[d],u[d]);if(p!==0)return p}return ie(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=ie(Ce(s.latitude),Ce(o.latitude));return c!==0?c:ie(Ce(s.longitude),Ce(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Bg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var y,C,P,N;const c=s.fields||{},u=o.fields||{},d=(y=c[Ml])==null?void 0:y.arrayValue,p=(C=u[Ml])==null?void 0:C.arrayValue,m=ie(((P=d==null?void 0:d.values)==null?void 0:P.length)||0,((N=p==null?void 0:p.values)==null?void 0:N.length)||0);return m!==0?m:Bg(d,p)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ra.mapValue&&o===Ra.mapValue)return 0;if(s===Ra.mapValue)return 1;if(o===Ra.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const y=Wh(u[m],p[m]);if(y!==0)return y;const C=Gi(c[u[m]],d[p[m]]);if(C!==0)return C}return ie(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function Ug(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=pr(t),r=pr(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function Bg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Gi(n[i],r[i]);if(s)return s}return ie(n.length,r.length)}function Ki(t){return qh(t)}function qh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=pr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=qh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${qh(n.fields[o])}`;return i+"}"}(t.mapValue):Q(61005,{value:t})}function Qa(t){switch(gr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_c(t);return e?16+Qa(e):16;case 5:return 2*t.stringValue.length;case 6:return mr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Qa(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ir(r.fields,(s,o)=>{i+=s.length+Qa(o)}),i}(t.mapValue);default:throw Q(13486,{value:t})}}function zg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $h(t){return!!t&&"integerValue"in t}function yf(t){return!!t&&"arrayValue"in t}function Wg(t){return!!t&&"nullValue"in t}function qg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ya(t){return!!t&&"mapValue"in t}function MC(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[J0])==null?void 0:r.stringValue)===ew}function eo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ir(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=eo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eo(t.arrayValue.values[n]);return e}return{...t}}function FC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Z0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.value=e}static empty(){return new ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ya(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eo(n)}setAll(e){let n=He.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=eo(o):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ya(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ya(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ir(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ft(eo(this.value))}}function tw(t){const e=[];return Ir(t.fields,(n,r)=>{const i=new He([n]);if(Ya(r)){const s=tw(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Tt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new nt(e,0,Y.min(),Y.min(),Y.min(),ft.empty(),0)}static newFoundDocument(e,n,r,i){return new nt(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new nt(e,2,n,Y.min(),Y.min(),ft.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,Y.min(),Y.min(),ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.position=e,this.inclusive=n}}function $g(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Gi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function UC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{}class Ne extends nw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zC(e,n,r):n==="array-contains"?new $C(e,r):n==="in"?new HC(e,r):n==="not-in"?new GC(e,r):n==="array-contains-any"?new KC(e,r):new Ne(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new WC(e,r):new qC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Gi(n,this.value)):n!==null&&gr(this.value)===gr(n)&&this.matchesComparison(Gi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gt extends nw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Gt(e,n)}matches(e){return rw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rw(t){return t.op==="and"}function iw(t){return BC(t)&&rw(t)}function BC(t){for(const e of t.filters)if(e instanceof Gt)return!1;return!0}function Hh(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+Ki(t.value);if(iw(t))return t.filters.map(e=>Hh(e)).join(",");{const e=t.filters.map(n=>Hh(n)).join(",");return`${t.op}(${e})`}}function sw(t,e){return t instanceof Ne?function(r,i){return i instanceof Ne&&r.op===i.op&&r.field.isEqual(i.field)&&un(r.value,i.value)}(t,e):t instanceof Gt?function(r,i){return i instanceof Gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&sw(o,i.filters[c]),!0):!1}(t,e):void Q(19439)}function ow(t){return t instanceof Ne?function(n){return`${n.field.canonicalString()} ${n.op} ${Ki(n.value)}`}(t):t instanceof Gt?function(n){return n.op.toString()+" {"+n.getFilters().map(ow).join(" ,")+"}"}(t):"Filter"}class zC extends Ne{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class WC extends Ne{constructor(e,n){super(e,"in",n),this.keys=aw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qC extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=aw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aw(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class $C extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yf(n)&&Ro(n.arrayValue,this.value)}}class HC extends Ne{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ro(this.value.arrayValue,n)}}class GC extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ro(this.value.arrayValue,n)}}class KC extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ro(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.Te=null}}function Gg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new QC(t,e,n,r,i,s,o)}function vf(t){const e=X(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),vc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ki(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ki(r)).join(",")),e.Te=n}return e.Te}function _f(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hg(t.startAt,e.startAt)&&Hg(t.endAt,e.endAt)}function Gh(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YC(t,e,n,r,i,s,o,c){return new zo(t,e,n,r,i,s,o,c)}function lw(t){return new zo(t)}function Kg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cw(t){return t.collectionGroup!==null}function to(t){const e=X(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Fe(He.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Ul(s,r))}),n.has(He.keyField().canonicalString())||e.Ie.push(new Ul(He.keyField(),r))}return e.Ie}function on(t){const e=X(t);return e.Ee||(e.Ee=XC(e,to(t))),e.Ee}function XC(t,e){if(t.limitType==="F")return Gg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ul(i.field,s)});const n=t.endAt?new Fl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fl(t.startAt.position,t.startAt.inclusive):null;return Gg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kh(t,e){const n=t.filters.concat([e]);return new zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qh(t,e,n){return new zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wc(t,e){return _f(on(t),on(e))&&t.limitType===e.limitType}function uw(t){return`${vf(on(t))}|lt:${t.limitType}`}function ci(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ow(i)).join(", ")}]`),vc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ki(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ki(i)).join(",")),`Target(${r})`}(on(t))}; limitType=${t.limitType})`}function Ec(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of to(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const d=$g(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,to(r),i)||r.endAt&&!function(o,c,u){const d=$g(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,to(r),i))}(t,e)}function JC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hw(t){return(e,n)=>{let r=!1;for(const i of to(t)){const s=ZC(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZC(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,c){const u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Gi(u,d):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ir(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return H0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new Ie(K.comparator);function Cn(){return eR}const dw=new Ie(K.comparator);function Bs(...t){let e=dw;for(const n of t)e=e.insert(n.key,n);return e}function fw(t){let e=dw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ur(){return no()}function pw(){return no()}function no(){return new ni(t=>t.toString(),(t,e)=>t.isEqual(e))}const tR=new Ie(K.comparator),nR=new Fe(K.comparator);function se(...t){let e=nR;for(const n of t)e=e.add(n);return e}const rR=new Fe(ie);function iR(){return rR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ll(e)?"-0":e}}function mw(t){return{integerValue:""+t}}function sR(t,e){return NC(e)?mw(e):wf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this._=void 0}}function oR(t,e,n){return t instanceof Bl?function(i,s){const o={fields:{[Q0]:{stringValue:K0},[X0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gf(s)&&(s=_c(s)),s&&(o.fields[Y0]=s),{mapValue:o}}(n,e):t instanceof ko?yw(t,e):t instanceof Po?vw(t,e):function(i,s){const o=gw(i,s),c=Qg(o)+Qg(i.Ae);return $h(o)&&$h(i.Ae)?mw(c):wf(i.serializer,c)}(t,e)}function aR(t,e,n){return t instanceof ko?yw(t,e):t instanceof Po?vw(t,e):n}function gw(t,e){return t instanceof zl?function(r){return $h(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Bl extends xc{}class ko extends xc{constructor(e){super(),this.elements=e}}function yw(t,e){const n=_w(e);for(const r of t.elements)n.some(i=>un(i,r))||n.push(r);return{arrayValue:{values:n}}}class Po extends xc{constructor(e){super(),this.elements=e}}function vw(t,e){let n=_w(e);for(const r of t.elements)n=n.filter(i=>!un(i,r));return{arrayValue:{values:n}}}class zl extends xc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Qg(t){return Ce(t.integerValue||t.doubleValue)}function _w(t){return yf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function lR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ko&&i instanceof ko||r instanceof Po&&i instanceof Po?Hi(r.elements,i.elements,un):r instanceof zl&&i instanceof zl?un(r.Ae,i.Ae):r instanceof Bl&&i instanceof Bl}(t.transform,e.transform)}class cR{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tc{}function ww(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ic(t.key,vt.none()):new Wo(t.key,t.data,vt.none());{const n=t.data,r=ft.empty();let i=new Fe(He.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Sr(t.key,r,new Tt(i.toArray()),vt.none())}}function uR(t,e,n){t instanceof Wo?function(i,s,o){const c=i.value.clone(),u=Xg(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Sr?function(i,s,o){if(!Xa(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=Xg(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Ew(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ro(t,e,n,r){return t instanceof Wo?function(s,o,c,u){if(!Xa(s.precondition,o))return c;const d=s.value.clone(),p=Jg(s.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Sr?function(s,o,c,u){if(!Xa(s.precondition,o))return c;const d=Jg(s.fieldTransforms,u,o),p=o.data;return p.setAll(Ew(s)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,c){return Xa(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function hR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=gw(r.transform,i||null);s!=null&&(n===null&&(n=ft.empty()),n.set(r.field,s))}return n||null}function Yg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Hi(r,i,(s,o)=>lR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wo extends Tc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Sr extends Tc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ew(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xg(t,e,n){const r=new Map;ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,aR(o,c,n[i]))}return r}function Jg(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,oR(s,o,e))}return r}class Ic extends Tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dR extends Tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&uR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ro(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ro(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pw();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;const u=ww(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Hi(this.mutations,e.mutations,(n,r)=>Yg(n,r))&&Hi(this.baseMutations,e.baseMutations,(n,r)=>Yg(n,r))}}class Ef{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return tR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ef(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be,oe;function gR(t){switch(t){case D.OK:return Q(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function xw(t){if(t===void 0)return An("GRPC error has no .code"),D.UNKNOWN;switch(t){case be.OK:return D.OK;case be.CANCELLED:return D.CANCELLED;case be.UNKNOWN:return D.UNKNOWN;case be.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case be.INTERNAL:return D.INTERNAL;case be.UNAVAILABLE:return D.UNAVAILABLE;case be.UNAUTHENTICATED:return D.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case be.NOT_FOUND:return D.NOT_FOUND;case be.ALREADY_EXISTS:return D.ALREADY_EXISTS;case be.PERMISSION_DENIED:return D.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case be.ABORTED:return D.ABORTED;case be.OUT_OF_RANGE:return D.OUT_OF_RANGE;case be.UNIMPLEMENTED:return D.UNIMPLEMENTED;case be.DATA_LOSS:return D.DATA_LOSS;default:return Q(39323,{code:t})}}(oe=be||(be={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new ar([4294967295,4294967295],0);function Zg(t){const e=yR().encode(t),n=new V0;return n.update(e),new Uint8Array(n.digest())}function ey(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ar([n,r],0),new ar([i,s],0)]}class xf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zs(`Invalid padding: ${n}`);if(r<0)throw new zs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zs(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ar.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ar.fromNumber(r)));return i.compare(vR)===1&&(i=new ar([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Zg(e),[r,i]=ey(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new xf(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=Zg(e),[r,i]=ey(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,qo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sc(Y.min(),i,new Ie(ie),Cn(),se())}}class qo{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new qo(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Tw{constructor(e,n){this.targetId=e,this.Ce=n}}class Iw{constructor(e,n,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ty{constructor(){this.ve=0,this.Fe=ny(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:s})}}),new qo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ny()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _R{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cn(),this.Je=ka(),this.He=ka(),this.Ye=new Ie(ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Gh(s))if(r===0){const o=new K(s.path);this.et(n,o,nt.newNoDocument(o,Y.min()))}else ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,c;try{o=mr(r).toUint8Array()}catch(u){if(u instanceof G0)return $i("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new xf(o,i,s)}catch(u){return $i(u instanceof zs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const c=this.ot(o);if(c){if(s.current&&Gh(c.target)){const u=new K(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,nt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=se();this.He.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Sc(e,n,this.Ye,this.je,r);return this.je=Cn(),this.Je=ka(),this.He=ka(),this.Ye=new Ie(ie),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ty,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fe(ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fe(ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ty),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ka(){return new Ie(K.comparator)}function ny(){return new Ie(K.comparator)}const wR=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),ER=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),xR=(()=>({and:"AND",or:"OR"}))();class TR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yh(t,e){return t.useProto3Json||vc(e)?e:{value:e}}function Wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IR(t,e){return Wl(t,e.toTimestamp())}function an(t){return ce(!!t,49232),Y.fromTimestamp(function(n){const r=pr(n);return new ve(r.seconds,r.nanos)}(t))}function Tf(t,e){return Xh(t,e).canonicalString()}function Xh(t,e){const n=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Aw(t){const e=pe.fromString(t);return ce(bw(e),10190,{key:e.toString()}),e}function Jh(t,e){return Tf(t.databaseId,e.path)}function Ou(t,e){const n=Aw(e);if(n.get(1)!==t.databaseId.projectId)throw new W(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(Rw(n))}function Cw(t,e){return Tf(t.databaseId,e)}function SR(t){const e=Aw(t);return e.length===4?pe.emptyPath():Rw(e)}function Zh(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Rw(t){return ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ry(t,e,n){return{name:Jh(t,e),fields:n.value.mapValue.fields}}function AR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(ce(p===void 0||typeof p=="string",58123),Qe.fromBase64String(p||"")):(ce(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Qe.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const p=d.code===void 0?D.UNKNOWN:xw(d.code);return new W(p,d.message||"")}(o);n=new Iw(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ou(t,r.document.name),s=an(r.document.updateTime),o=r.document.createTime?an(r.document.createTime):Y.min(),c=new ft({mapValue:{fields:r.document.fields}}),u=nt.newFoundDocument(i,s,o,c),d=r.targetIds||[],p=r.removedTargetIds||[];n=new Ja(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ou(t,r.document),s=r.readTime?an(r.readTime):Y.min(),o=nt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new Ja([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ou(t,r.document),s=r.removedTargetIds||[];n=new Ja([],s,i,null)}else{if(!("filter"in e))return Q(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new mR(i,s),c=r.targetId;n=new Tw(c,o)}}return n}function CR(t,e){let n;if(e instanceof Wo)n={update:ry(t,e.key,e.value)};else if(e instanceof Ic)n={delete:Jh(t,e.key)};else if(e instanceof Sr)n={update:ry(t,e.key,e.data),updateMask:LR(e.fieldMask)};else{if(!(e instanceof dR))return Q(16599,{Vt:e.type});n={verify:Jh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const c=o.transform;if(c instanceof Bl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ko)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Po)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof zl)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Q(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:IR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(t,e.precondition)),n}function RR(t,e){return t&&t.length>0?(ce(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?an(i.updateTime):an(s);return o.isEqual(Y.min())&&(o=an(s)),new cR(o,i.transformResults||[])}(n,e))):[]}function kR(t,e){return{documents:[Cw(t,e.path)]}}function PR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cw(t,i);const s=function(d){if(d.length!==0)return Pw(Gt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(p=>function(y){return{field:ui(y.field),direction:NR(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Yh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function bR(t){let e=SR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ce(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const y=kw(m);return y instanceof Gt&&iw(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(P){return new Ul(hi(P.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(m){let y;return y=typeof m=="object"?m.value:m,vc(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(m){const y=!!m.before,C=m.values||[];return new Fl(C,y)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const y=!m.before,C=m.values||[];return new Fl(C,y)}(n.endAt)),YC(e,i,o,s,c,"F",u,d)}function jR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hi(n.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=hi(n.unaryFilter.field);return Ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=hi(n.unaryFilter.field);return Ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hi(n.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ne.create(hi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gt.create(n.compositeFilter.filters.map(r=>kw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function NR(t){return wR[t]}function DR(t){return ER[t]}function VR(t){return xR[t]}function ui(t){return{fieldPath:t.canonicalString()}}function hi(t){return He.fromServerFormat(t.fieldPath)}function Pw(t){return t instanceof Ne?function(n){if(n.op==="=="){if(qg(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NAN"}};if(Wg(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qg(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NOT_NAN"}};if(Wg(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ui(n.field),op:DR(n.op),value:n.value}}}(t):t instanceof Gt?function(n){const r=n.getFilters().map(i=>Pw(i));return r.length===1?r[0]:{compositeFilter:{op:VR(n.op),filters:r}}}(t):Q(54877,{filter:t})}function LR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n,r,i,s=Y.min(),o=Y.min(),c=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.yt=e}}function MR(t){const e=bR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.Cn=new UR}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(fr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class UR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fe(pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jw=41943040;class ht{static withCacheSize(e){return new ht(e,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ht.DEFAULT_COLLECTION_PERCENTILE=10,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ht.DEFAULT=new ht(jw,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ht.DISABLED=new ht(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qi(0)}static cr(){return new Qi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="LruGarbageCollector",BR=1048576;function oy([t,e],[n,r]){const i=ie(t,n);return i===0?ie(e,r):i}class zR{constructor(e){this.Ir=e,this.buffer=new Fe(oy),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();oy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class WR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(sy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){is(n)?q(sy,"Ignoring IndexedDB error during garbage collection: ",n):await rs(n)}await this.Vr(3e5)})}}class qR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(yc.ce);const r=new zR(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(iy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iy):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,c,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),li()<=re.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-p}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function $R(t,e){return new qR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.changes=new ni(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ro(r.mutation,i,Tt.empty(),ve.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=Ur();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Bs();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ur();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=Cn();const o=no(),c=function(){return no()}();return n.forEach((u,d)=>{const p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Sr)?s=s.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),ro(p.mutation,d,p.mutation.getFieldMask(),ve.now())):o.set(d.key,Tt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>c.set(d,new GR(p,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=no();let i=new Ie((o,c)=>o-c),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||Tt.empty();p=c.applyToLocalView(d,p),r.set(u,p);const m=(i.get(c.batchId)||se()).add(u);i=i.insert(c.batchId,m)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,p=u.value,m=pw();p.forEach(y=>{if(!s.has(y)){const C=ww(n.get(y),r.get(y));C!==null&&m.set(y,C),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):V.resolve(Ur());let c=So,u=s;return o.next(d=>V.forEach(d,(p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(p)?V.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,se())).next(p=>({batchId:c,changes:fw(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Bs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Bs();return this.indexManager.getCollectionParents(e,s).next(c=>V.forEach(c,u=>{const d=function(m,y){return new zo(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,nt.newInvalidDocument(p)))});let c=Bs();return o.forEach((u,d)=>{const p=s.get(u);p!==void 0&&ro(p.mutation,d,Tt.empty(),ve.now()),Ec(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:an(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:MR(i.bundledQuery),readTime:an(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.overlays=new Ie(K.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ur();return V.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=Ur(),s=n.length+1,o=new K(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ie((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Ur(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=Ur(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return V.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new pR(n,r));let s=this.qr.get(n);s===void 0&&(s=se(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this.Qr=new Fe(Be.$r),this.Ur=new Fe(Be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Be(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new K(new pe([])),r=new Be(n,e),i=new Be(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new K(new pe([])),r=new Be(n,e),i=new Be(n,e+1);let s=se();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Be(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||ie(e.Yr,n.Yr)}static Kr(e,n){return ie(e.Yr,n.Yr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fe(Be.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fR(s,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Be(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?mf:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),i=new Be(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const c=this.Xr(o.Yr);s.push(c)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(ie);return n.forEach(i=>{const s=new Be(i,0),o=new Be(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],c=>{r=r.add(c.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new Be(new K(s),0);let c=new Fe(ie);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)},o),V.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,i=>{const s=new Be(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Be(n,0),i=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.ri=e,this.docs=function(){return new Ie(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=Cn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():nt.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Cn();const o=n.path,c=new K(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||kC(RC(p),r)<=0||(i.has(p.key)||Ec(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ek(this)}getSize(e){return V.resolve(this.size)}}class ek extends HR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.persistence=e,this.si=new ni(n=>vf(n),_f),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.oi=0,this._i=new If,this.targetCount=0,this.ai=Qi.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Qi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){this.ui={},this.overlays={},this.ci=new yc(0),this.li=!1,this.li=!0,this.hi=new XR,this.referenceDelegate=e(this),this.Pi=new tk(this),this.indexManager=new FR,this.remoteDocumentCache=function(i){return new ZR(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new OR(n),this.Ii=new QR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new YR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new JR(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new nk(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class nk extends bC{constructor(e){super(),this.currentSequenceNumber=e}}class Sf{constructor(e){this.persistence=e,this.Ri=new If,this.Vi=null}static mi(e){return new Sf(e)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const i=K.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ql{constructor(e,n){this.persistence=e,this.pi=new ni(r=>DC(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=$R(this,n)}static mi(e,n){return new ql(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?V.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,s.removeEntry(o,Y.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qa(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Af(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return DT()?8:jC(it())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new rk;return this.Ss(e,n,o).next(c=>{if(s.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(li()<=re.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ci(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(li()<=re.DEBUG&&q("QueryEngine","Query:",ci(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(li()<=re.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ci(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(n))):V.resolve())}ys(e,n){if(Kg(n))return V.resolve(null);let r=on(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Qh(n,null,"F"),r=on(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,Qh(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,i){return Kg(n)||i.isEqual(Y.min())?V.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?V.resolve(null):(li()<=re.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ci(n)),this.vs(e,o,n,CC(i,So)).next(c=>c))})}Ds(e,n){let r=new Fe(hw(e));return n.forEach((i,s)=>{Ec(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return li()<=re.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ci(n)),this.ps.getDocumentsMatchingQuery(e,n,fr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="LocalStore",sk=3e8;class ok{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ie(ie),this.xs=new ni(s=>vf(s),_f),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function ak(t,e,n,r){return new ok(t,e,n,r)}async function Dw(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let u=se();for(const d of i){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of s){c.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function lk(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,p){const m=d.batch,y=m.keys();let C=V.resolve();return y.forEach(P=>{C=C.next(()=>p.getEntry(u,P)).next(N=>{const L=d.docVersions.get(P);ce(L!==null,48541),N.version.compareTo(L)<0&&(m.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),p.addEntry(N)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=se();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Vw(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function ck(t,e){const n=X(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach((p,m)=>{const y=i.get(m);if(!y)return;c.push(n.Pi.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(s,p.addedDocuments,m)));let C=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken(Qe.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):p.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(p.resumeToken,r)),i=i.insert(m,C),function(N,L,S){return N.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=sk?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(y,C,p)&&c.push(n.Pi.updateTargetData(s,C))});let u=Cn(),d=se();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(uk(s,o,e.documentUpdates).next(p=>{u=p.ks,d=p.qs})),!r.isEqual(Y.min())){const p=n.Pi.getLastRemoteSnapshotVersion(s).next(m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return V.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.Ms=i,s))}function uk(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Cn();return n.forEach((c,u)=>{const d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):q(Cf,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:i}})}function hk(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=mf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dk(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Qn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ed(t,e,n){const r=X(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!is(o))throw o;q(Cf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function ay(t,e,n){const r=X(t);let i=Y.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const m=X(u),y=m.xs.get(p);return y!==void 0?V.resolve(m.Ms.get(y)):m.Pi.getTargetData(d,p)}(r,o,on(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:se())).next(c=>(fk(r,JC(e),c),{documents:c,Qs:s})))}function fk(t,e,n){let r=t.Os.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class ly{constructor(){this.activeTargetIds=iR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pk{constructor(){this.Mo=new ly,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ly,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="ConnectivityMonitor";class uy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(cy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(cy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa=null;function td(){return Pa===null?Pa=function(){return 268435456+Math.round(2147483648*Math.random())}():Pa++,"0x"+Pa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu="RestConnection",gk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ol?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=td(),c=this.zo(e,n.toUriEncodedString());q(Mu,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:d}=new URL(c),p=es(d);return this.Jo(e,c,u,r,p).then(m=>(q(Mu,`Received RPC '${e}' ${o}: `,m),m),m=>{throw $i(Mu,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ns}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=gk[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class _k extends yk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=td();return new Promise((c,u)=>{const d=new L0;d.setWithCredentials(!0),d.listenOnce(O0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ka.NO_ERROR:const m=d.getResponseJson();q(Ze,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case Ka.TIMEOUT:q(Ze,`RPC '${e}' ${o} timed out`),u(new W(D.DEADLINE_EXCEEDED,"Request time out"));break;case Ka.HTTP_ERROR:const y=d.getStatus();if(q(Ze,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let C=d.getResponseJson();Array.isArray(C)&&(C=C[0]);const P=C==null?void 0:C.error;if(P&&P.status&&P.message){const N=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(w)>=0?w:D.UNKNOWN}(P.status);u(new W(N,P.message))}else u(new W(D.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new W(D.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{q(Ze,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);q(Ze,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",p,r,15)})}T_(e,n,r){const i=td(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=U0(),c=F0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");q(Ze,`Creating RPC '${e}' stream ${i}: ${p}`,u);const m=o.createWebChannel(p,u);this.I_(m);let y=!1,C=!1;const P=new vk({Yo:L=>{C?q(Ze,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(y||(q(Ze,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),q(Ze,`RPC '${e}' stream ${i} sending:`,L),m.send(L))},Zo:()=>m.close()}),N=(L,S,w)=>{L.listen(S,T=>{try{w(T)}catch(j){setTimeout(()=>{throw j},0)}})};return N(m,Us.EventType.OPEN,()=>{C||(q(Ze,`RPC '${e}' stream ${i} transport opened.`),P.o_())}),N(m,Us.EventType.CLOSE,()=>{C||(C=!0,q(Ze,`RPC '${e}' stream ${i} transport closed`),P.a_(),this.E_(m))}),N(m,Us.EventType.ERROR,L=>{C||(C=!0,$i(Ze,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),P.a_(new W(D.UNAVAILABLE,"The operation could not be completed")))}),N(m,Us.EventType.MESSAGE,L=>{var S;if(!C){const w=L.data[0];ce(!!w,16349);const T=w,j=(T==null?void 0:T.error)||((S=T[0])==null?void 0:S.error);if(j){q(Ze,`RPC '${e}' stream ${i} received error:`,j);const F=j.status;let U=function(E){const I=be[E];if(I!==void 0)return xw(I)}(F),_=j.message;U===void 0&&(U=D.INTERNAL,_="Unknown error status: "+F+" with message "+j.message),C=!0,P.a_(new W(U,_)),m.close()}else q(Ze,`RPC '${e}' stream ${i} received:`,w),P.u_(w)}}),N(c,M0.STAT_EVENT,L=>{L.stat===zh.PROXY?q(Ze,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===zh.NOPROXY&&q(Ze,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.__()},0),P}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Fu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(t){return new TR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="PersistentStream";class Ow{constructor(e,n,r,i,s,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Lw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new W(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(hy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(q(hy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wk extends Ow{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=AR(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?an(o.readTime):Y.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Zh(this.serializer),n.addTarget=function(s,o){let c;const u=o.target;if(c=Gh(u)?{documents:kR(s,u)}:{query:PR(s,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Sw(s,o.resumeToken);const d=Yh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=Wl(s,o.snapshotVersion.toTimestamp());const d=Yh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=jR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Zh(this.serializer),n.removeTarget=e,this.q_(n)}}class Ek extends Ow{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=RR(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Zh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>CR(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{}class Tk extends xk{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new W(D.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Xh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(D.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,Xh(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(D.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Ik{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(An(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="RemoteStore";class Sk{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ri(this)&&(q(Jr,"Restarting streams for network reachability change."),await async function(u){const d=X(u);d.Ea.add(4),await $o(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Cc(d)}(this))})}),this.Ra=new Ik(r,i)}}async function Cc(t){if(ri(t))for(const e of t.da)await e(!0)}async function $o(t){for(const e of t.da)await e(!1)}function Mw(t,e){const n=X(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),bf(n)?Pf(n):ss(n).O_()&&kf(n,e))}function Rf(t,e){const n=X(t),r=ss(n);n.Ia.delete(e),r.O_()&&Fw(n,e),n.Ia.size===0&&(r.O_()?r.L_():ri(n)&&n.Ra.set("Unknown"))}function kf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ss(t).Y_(e)}function Fw(t,e){t.Va.Ue(e),ss(t).Z_(e)}function Pf(t){t.Va=new _R({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ss(t).start(),t.Ra.ua()}function bf(t){return ri(t)&&!ss(t).x_()&&t.Ia.size>0}function ri(t){return X(t).Ea.size===0}function Uw(t){t.Va=void 0}async function Ak(t){t.Ra.set("Online")}async function Ck(t){t.Ia.forEach((e,n)=>{kf(t,e)})}async function Rk(t,e){Uw(t),bf(t)?(t.Ra.ha(e),Pf(t)):t.Ra.set("Unknown")}async function kk(t,e,n){if(t.Ra.set("Online"),e instanceof Iw&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))}(t,e)}catch(r){q(Jr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $l(t,r)}else if(e instanceof Ja?t.Va.Ze(e):e instanceof Tw?t.Va.st(e):t.Va.tt(e),!n.isEqual(Y.min()))try{const r=await Vw(t.localStore);n.compareTo(r)>=0&&await function(s,o){const c=s.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.Ia.get(d);p&&s.Ia.set(d,p.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const p=s.Ia.get(u);if(!p)return;s.Ia.set(u,p.withResumeToken(Qe.EMPTY_BYTE_STRING,p.snapshotVersion)),Fw(s,u);const m=new Qn(p.target,u,d,p.sequenceNumber);kf(s,m)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){q(Jr,"Failed to raise snapshot:",r),await $l(t,r)}}async function $l(t,e,n){if(!is(e))throw e;t.Ea.add(1),await $o(t),t.Ra.set("Offline"),n||(n=()=>Vw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Jr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Cc(t)})}function Bw(t,e){return e().catch(n=>$l(t,n,e))}async function Rc(t){const e=X(t),n=yr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mf;for(;Pk(e);)try{const i=await hk(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,bk(e,i)}catch(i){await $l(e,i)}zw(e)&&Ww(e)}function Pk(t){return ri(t)&&t.Ta.length<10}function bk(t,e){t.Ta.push(e);const n=yr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function zw(t){return ri(t)&&!yr(t).x_()&&t.Ta.length>0}function Ww(t){yr(t).start()}async function jk(t){yr(t).ra()}async function Nk(t){const e=yr(t);for(const n of t.Ta)e.ea(n.mutations)}async function Dk(t,e,n){const r=t.Ta.shift(),i=Ef.from(r,e,n);await Bw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Rc(t)}async function Vk(t,e){e&&yr(t).X_&&await async function(r,i){if(function(o){return gR(o)&&o!==D.ABORTED}(i.code)){const s=r.Ta.shift();yr(r).B_(),await Bw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Rc(r)}}(t,e),zw(t)&&Ww(t)}async function dy(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),q(Jr,"RemoteStore received new credentials");const r=ri(n);n.Ea.add(3),await $o(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Cc(n)}async function Lk(t,e){const n=X(t);e?(n.Ea.delete(2),await Cc(n)):e||(n.Ea.add(2),await $o(n),n.Ra.set("Unknown"))}function ss(t){return t.ma||(t.ma=function(n,r,i){const s=X(n);return s.sa(),new wk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:Ak.bind(null,t),t_:Ck.bind(null,t),r_:Rk.bind(null,t),H_:kk.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),bf(t)?Pf(t):t.Ra.set("Unknown")):(await t.ma.stop(),Uw(t))})),t.ma}function yr(t){return t.fa||(t.fa=function(n,r,i){const s=X(n);return s.sa(),new Ek(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:jk.bind(null,t),r_:Vk.bind(null,t),ta:Nk.bind(null,t),na:Dk.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Rc(t)):(await t.fa.stop(),t.Ta.length>0&&(q(Jr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,c=new jf(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nf(t,e){if(An("AsyncQueue",`${e}: ${t}`),is(t))return new W(D.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{static emptySet(e){return new Ni(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Bs(),this.sortedSet=new Ie(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ni)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ni;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.ga=new Ie(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Yi{constructor(e,n,r,i,s,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Yi(e,n,Ni.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Mk{constructor(){this.queries=py(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=X(n),s=i.queries;i.queries=py(),s.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new W(D.ABORTED,"Firestore shutting down"))}}function py(){return new ni(t=>uw(t),wc)}async function Fk(t,e){const n=X(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Ok,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=Nf(o,`Initialization of query '${ci(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Df(n)}async function Uk(t,e){const n=X(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Bk(t,e){const n=X(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&Df(n)}function zk(t,e,n){const r=X(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Df(t){t.Ca.forEach(e=>{e.next()})}var nd,my;(my=nd||(nd={})).Ma="default",my.Cache="cache";class Wk{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Yi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Yi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this.key=e}}class $w{constructor(e){this.key=e}}class qk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=hw(e),this.tu=new Ni(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new fy,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const y=i.get(p),C=Ec(this.query,m)?m:null,P=!!y&&this.mutatedKeys.has(y.key),N=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let L=!1;y&&C?y.data.isEqual(C.data)?P!==N&&(r.track({type:3,doc:C}),L=!0):this.su(y,C)||(r.track({type:2,doc:C}),L=!0,(u&&this.eu(C,u)>0||d&&this.eu(C,d)<0)&&(c=!0)):!y&&C?(r.track({type:0,doc:C}),L=!0):y&&!C&&(r.track({type:1,doc:y}),L=!0,(u||d)&&(c=!0)),L&&(C?(o=o.add(C),s=N?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:c,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,m)=>function(C,P){const N=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:L})}};return N(C)-N(P)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Yi(this.query,e.tu,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new $w(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new qw(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Yi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vf="SyncEngine";class $k{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Hk{constructor(e){this.key=e,this.hu=!1}}class Gk{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ni(c=>uw(c),wc),this.Iu=new Map,this.Eu=new Set,this.du=new Ie(K.comparator),this.Au=new Map,this.Ru=new If,this.Vu={},this.mu=new Map,this.fu=Qi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Kk(t,e,n=!0){const r=Xw(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Hw(r,e,n,!0),i}async function Qk(t,e){const n=Xw(t);await Hw(n,e,!0,!1)}async function Hw(t,e,n,r){const i=await dk(t.localStore,on(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await Yk(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Mw(t.remoteStore,i),c}async function Yk(t,e,n,r,i){t.pu=(m,y,C)=>async function(N,L,S,w){let T=L.view.ru(S);T.Cs&&(T=await ay(N.localStore,L.query,!1).then(({documents:_})=>L.view.ru(_,T)));const j=w&&w.targetChanges.get(L.targetId),F=w&&w.targetMismatches.get(L.targetId)!=null,U=L.view.applyChanges(T,N.isPrimaryClient,j,F);return yy(N,L.targetId,U.au),U.snapshot}(t,m,y,C);const s=await ay(t.localStore,e,!0),o=new qk(e,s.Qs),c=o.ru(s.documents),u=qo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);yy(t,n,d.au);const p=new $k(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function Xk(t,e,n){const r=X(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!wc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ed(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Rf(r.remoteStore,i.targetId),rd(r,i.targetId)}).catch(rs)):(rd(r,i.targetId),await ed(r.localStore,i.targetId,!0))}async function Jk(t,e){const n=X(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rf(n.remoteStore,r.targetId))}async function Zk(t,e,n){const r=oP(t);try{const i=await function(o,c){const u=X(o),d=ve.now(),p=c.reduce((C,P)=>C.add(P.key),se());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let P=Cn(),N=se();return u.Ns.getEntries(C,p).next(L=>{P=L,P.forEach((S,w)=>{w.isValidDocument()||(N=N.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,P)).next(L=>{m=L;const S=[];for(const w of c){const T=hR(w,m.get(w.key).overlayedDocument);T!=null&&S.push(new Sr(w.key,T,tw(T.value.mapValue),vt.exists(!0)))}return u.mutationQueue.addMutationBatch(C,d,S,c)}).next(L=>{y=L;const S=L.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(C,L.batchId,S)})}).then(()=>({batchId:y.batchId,changes:fw(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ie(ie)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,i.batchId,n),await Ho(r,i.changes),await Rc(r.remoteStore)}catch(i){const s=Nf(i,"Failed to persist write");n.reject(s)}}async function Gw(t,e){const n=X(t);try{const r=await ck(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ce(o.hu,14607):i.removedDocuments.size>0&&(ce(o.hu,42227),o.hu=!1))}),await Ho(n,r,e)}catch(r){await rs(r)}}function gy(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=X(o);u.onlineState=c;let d=!1;u.queries.forEach((p,m)=>{for(const y of m.Sa)y.va(c)&&(d=!0)}),d&&Df(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eP(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ie(K.comparator);o=o.insert(s,nt.newNoDocument(s,Y.min()));const c=se().add(s),u=new Sc(Y.min(),new Map,new Ie(ie),o,c);await Gw(r,u),r.du=r.du.remove(s),r.Au.delete(e),Lf(r)}else await ed(r.localStore,e,!1).then(()=>rd(r,e,n)).catch(rs)}async function tP(t,e){const n=X(t),r=e.batch.batchId;try{const i=await lk(n.localStore,e);Qw(n,r,null),Kw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ho(n,i)}catch(i){await rs(i)}}async function nP(t,e,n){const r=X(t);try{const i=await function(o,c){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(ce(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);Qw(r,e,n),Kw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ho(r,i)}catch(i){await rs(i)}}function Kw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Qw(t,e,n){const r=X(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function rd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Yw(t,r)})}function Yw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Rf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Lf(t))}function yy(t,e,n){for(const r of n)r instanceof qw?(t.Ru.addReference(r.key,e),rP(t,r)):r instanceof $w?(q(Vf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Yw(t,r.key)):Q(19791,{wu:r})}function rP(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(q(Vf,"New document in limbo: "+n),t.Eu.add(r),Lf(t))}function Lf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(pe.fromString(e)),r=t.fu.next();t.Au.set(r,new Hk(n)),t.du=t.du.insert(n,r),Mw(t.remoteStore,new Qn(on(lw(n.path)),r,"TargetPurposeLimboResolution",yc.ce))}}async function Ho(t,e,n){const r=X(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Af.As(u.targetId,d);s.push(m)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,d){const p=X(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(d,y=>V.forEach(y.Es,C=>p.persistence.referenceDelegate.addReference(m,y.targetId,C)).next(()=>V.forEach(y.ds,C=>p.persistence.referenceDelegate.removeReference(m,y.targetId,C)))))}catch(m){if(!is(m))throw m;q(Cf,"Failed to update sequence numbers: "+m)}for(const m of d){const y=m.targetId;if(!m.fromCache){const C=p.Ms.get(y),P=C.snapshotVersion,N=C.withLastLimboFreeSnapshotVersion(P);p.Ms=p.Ms.insert(y,N)}}}(r.localStore,s))}async function iP(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){q(Vf,"User change. New user:",e.toKey());const r=await Dw(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(c=>{c.forEach(u=>{u.reject(new W(D.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ho(n,r.Ls)}}function sP(t,e){const n=X(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let i=se();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function Xw(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eP.bind(null,e),e.Pu.H_=Bk.bind(null,e.eventManager),e.Pu.yu=zk.bind(null,e.eventManager),e}function oP(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nP.bind(null,e),e}class Hl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ac(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ak(this.persistence,new ik,e.initialUser,this.serializer)}Cu(e){return new Nw(Sf.mi,this.serializer)}Du(e){return new pk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hl.provider={build:()=>new Hl};class aP extends Hl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ce(this.persistence.referenceDelegate instanceof ql,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new WR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ht.withCacheSize(this.cacheSizeBytes):ht.DEFAULT;return new Nw(r=>ql.mi(r,n),this.serializer)}}class id{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iP.bind(null,this.syncEngine),await Lk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Mk}()}createDatastore(e){const n=Ac(e.databaseInfo.databaseId),r=function(s){return new _k(s)}(e.databaseInfo);return function(s,o,c,u){return new Tk(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new Sk(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>gy(this.syncEngine,n,0),function(){return uy.v()?new uy:new mk}())}createSyncEngine(e,n){return function(i,s,o,c,u,d,p){const m=new Gk(i,s,o,c,u,d);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=X(i);q(Jr,"RemoteStore shutting down."),s.Ea.add(5),await $o(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}id.provider={build:()=>new id};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="FirestoreClient";class cP{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=pf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q(vr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(vr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Nf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uu(t,e){t.asyncQueue.verifyOperationInProgress(),q(vr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Dw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uP(t);q(vr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>dy(e.remoteStore,i)),t._onlineComponents=e}async function uP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(vr,"Using user provided OfflineComponentProvider");try{await Uu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===D.FAILED_PRECONDITION||i.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;$i("Error using user provided cache. Falling back to memory cache: "+n),await Uu(t,new Hl)}}else q(vr,"Using default OfflineComponentProvider"),await Uu(t,new aP(void 0));return t._offlineComponents}async function Jw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(vr,"Using user provided OnlineComponentProvider"),await vy(t,t._uninitializedComponentsProvider._online)):(q(vr,"Using default OnlineComponentProvider"),await vy(t,new id))),t._onlineComponents}function hP(t){return Jw(t).then(e=>e.syncEngine)}async function dP(t){const e=await Jw(t),n=e.eventManager;return n.onListen=Kk.bind(null,e.syncEngine),n.onUnlisten=Xk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Qk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Jk.bind(null,e.syncEngine),n}function fP(t,e,n={}){const r=new lr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const p=new lP({next:y=>{p.Nu(),o.enqueueAndForget(()=>Uk(s,m)),y.fromCache&&u.source==="server"?d.reject(new W(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new Wk(c,p,{includeMetadataChanges:!0,qa:!0});return Fk(s,m)}(await dP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firestore.googleapis.com",wy=!0;class Ey{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=e1,this.ssl=wy}else this.host=e.host,this.ssl=e.ssl??wy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BR)throw new W(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ey({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ey(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gC;switch(r.type){case"firstParty":return new wC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=_y.get(n);r&&(q("ComponentProvider","Removing Datastore"),_y.delete(n),r.terminate())}(this),Promise.resolve()}}function pP(t,e,n,r={}){var d;t=dr(t,kc);const i=es(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(K_(`https://${c}`),Q_("Firestore",!0)),s.host!==e1&&s.host!==c&&$i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:c,ssl:i,emulatorOptions:r};if(!Kr(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=et.MOCK_USER;else{p=ST(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new W(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new et(y)}t._authCredentials=new yC(new z0(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class Me{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Me(this.firestore,e,this._key)}toJSON(){return{type:Me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Bo(n,Me._jsonSchema))return new Me(e,r||null,new K(pe.fromString(n.referencePath)))}}Me._jsonSchemaVersion="firestore/documentReference/1.0",Me._jsonSchema={type:De("string",Me._jsonSchemaVersion),referencePath:De("string")};class cr extends os{constructor(e,n,r){super(e,n,lw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new K(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function Za(t,e,...n){if(t=ke(t),W0("collection","path",e),t instanceof kc){const r=pe.fromString(e,...n);return Dg(r),new cr(t,null,r)}{if(!(t instanceof Me||t instanceof cr))throw new W(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return Dg(r),new cr(t.firestore,null,r)}}function el(t,e,...n){if(t=ke(t),arguments.length===1&&(e=pf.newId()),W0("doc","path",e),t instanceof kc){const r=pe.fromString(e,...n);return Ng(r),new Me(t,null,new K(r))}{if(!(t instanceof Me||t instanceof cr))throw new W(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return Ng(r),new Me(t.firestore,t instanceof cr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="AsyncQueue";class Ty{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Lw(this,"async_queue_retry"),this._c=()=>{const r=Fu();r&&q(xy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Fu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Fu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new lr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!is(e))throw e;q(xy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,An("INTERNAL UNHANDLED ERROR: ",Iy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=jf.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Q(47125,{Pc:Iy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Iy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class as extends kc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ty,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ty(e),this._firestoreClient=void 0,await e}}}function mP(t,e){const n=typeof t=="object"?t:Z_(),r=typeof t=="string"?t:e||Ol,i=nf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=TT("firestore");s&&pP(i,...s)}return i}function Of(t){if(t._terminated)throw new W(D.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gP(t),t._firestoreClient}function gP(t){var r,i,s;const e=t._freezeSettings(),n=function(c,u,d,p){return new OC(c,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Zw(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new cP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bt(Qe.fromBase64String(e))}catch(n){throw new W(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bt(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bo(e,bt._jsonSchema))return bt.fromBase64String(e.bytes)}}bt._jsonSchemaVersion="firestore/bytes/1.0",bt._jsonSchema={type:De("string",bt._jsonSchemaVersion),bytes:De("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ln._jsonSchemaVersion}}static fromJSON(e){if(Bo(e,ln._jsonSchema))return new ln(e.latitude,e.longitude)}}ln._jsonSchemaVersion="firestore/geoPoint/1.0",ln._jsonSchema={type:De("string",ln._jsonSchemaVersion),latitude:De("number"),longitude:De("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:cn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bo(e,cn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new cn(e.vectorValues);throw new W(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cn._jsonSchemaVersion="firestore/vectorValue/1.0",cn._jsonSchema={type:De("string",cn._jsonSchemaVersion),vectorValues:De("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=/^__.*__$/;class vP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Sr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wo(e,this.data,n,this.fieldTransforms)}}class t1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Sr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function n1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:t})}}class Ff{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ff({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Gl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(n1(this.Ac)&&yP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _P{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ac(e)}Cc(e,n,r,i=!1){return new Ff({Ac:e,methodName:n,Dc:r,path:He.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pc(t){const e=t._freezeSettings(),n=Ac(t._databaseId);return new _P(t._databaseId,!!e.ignoreUndefinedProperties,n)}function r1(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Uf("Data must be an object, but it was:",o,r);const c=o1(r,o);let u,d;if(s.merge)u=new Tt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const y=sd(e,m,n);if(!o.contains(y))throw new W(D.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);l1(p,y)||p.push(y)}u=new Tt(p),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new vP(new ft(c),u,d)}class bc extends Mf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bc}}function i1(t,e,n,r){const i=t.Cc(1,e,n);Uf("Data must be an object, but it was:",i,r);const s=[],o=ft.empty();Ir(r,(u,d)=>{const p=Bf(e,u,n);d=ke(d);const m=i.yc(p);if(d instanceof bc)s.push(p);else{const y=Ko(d,m);y!=null&&(s.push(p),o.set(p,y))}});const c=new Tt(s);return new t1(o,c,i.fieldTransforms)}function s1(t,e,n,r,i,s){const o=t.Cc(1,e,n),c=[sd(e,r,n)],u=[i];if(s.length%2!=0)throw new W(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)c.push(sd(e,s[y])),u.push(s[y+1]);const d=[],p=ft.empty();for(let y=c.length-1;y>=0;--y)if(!l1(d,c[y])){const C=c[y];let P=u[y];P=ke(P);const N=o.yc(C);if(P instanceof bc)d.push(C);else{const L=Ko(P,N);L!=null&&(d.push(C),p.set(C,L))}}const m=new Tt(d);return new t1(p,m,o.fieldTransforms)}function wP(t,e,n,r=!1){return Ko(n,t.Cc(r?4:3,e))}function Ko(t,e){if(a1(t=ke(t)))return Uf("Unsupported field value:",e,t),o1(t,e);if(t instanceof Mf)return function(r,i){if(!n1(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const c of r){let u=Ko(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ve.fromDate(r);return{timestampValue:Wl(i.serializer,s)}}if(r instanceof ve){const s=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wl(i.serializer,s)}}if(r instanceof ln)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bt)return{bytesValue:Sw(i.serializer,r._byteString)};if(r instanceof Me){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Tf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cn)return function(o,c){return{mapValue:{fields:{[J0]:{stringValue:ew},[Ml]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return wf(c.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${gc(r)}`)}(t,e)}function o1(t,e){const n={};return H0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ir(t,(r,i)=>{const s=Ko(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function a1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof ln||t instanceof bt||t instanceof Me||t instanceof Mf||t instanceof cn)}function Uf(t,e,n){if(!a1(n)||!q0(n)){const r=gc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function sd(t,e,n){if((e=ke(e))instanceof Go)return e._internalPath;if(typeof e=="string")return Bf(t,e);throw Gl("Field path arguments must be of type string or ",t,!1,void 0,n)}const EP=new RegExp("[~\\*/\\[\\]]");function Bf(t,e,n){if(e.search(EP)>=0)throw Gl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Go(...e.split("."))._internalPath}catch{throw Gl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new W(D.INVALID_ARGUMENT,c+t+u)}function l1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xP extends c1{data(){return super.data()}}function zf(t,e){return typeof e=="string"?Bf(t,e):e instanceof Go?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wf{}class IP extends Wf{}function SP(t,e,...n){let r=[];e instanceof Wf&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof qf).length,c=s.filter(u=>u instanceof jc).length;if(o>1||o>0&&c>0)throw new W(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jc extends IP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jc(e,n,r)}_apply(e){const n=this._parse(e);return u1(e._query,n),new os(e.firestore,e.converter,Kh(e._query,n))}_parse(e){const n=Pc(e.firestore);return function(s,o,c,u,d,p,m){let y;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new W(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Ay(m,p);const P=[];for(const N of m)P.push(Sy(u,s,N));y={arrayValue:{values:P}}}else y=Sy(u,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Ay(m,p),y=wP(c,o,m,p==="in"||p==="not-in");return Ne.create(d,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function AP(t,e,n){const r=e,i=zf("where",t);return jc._create(i,r,n)}class qf extends Wf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new qf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const u of c)u1(o,u),o=Kh(o,u)}(e._query,n),new os(e.firestore,e.converter,Kh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Sy(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new W(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cw(e)&&n.indexOf("/")!==-1)throw new W(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!K.isDocumentKey(r))throw new W(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zg(t,new K(r))}if(n instanceof Me)return zg(t,n._key);throw new W(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gc(n)}.`)}function Ay(t,e){if(!Array.isArray(t)||t.length===0)throw new W(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function u1(t,e){const n=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class CP{convertValue(e,n="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ir(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Ml].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ce(o.doubleValue));return new cn(n)}convertGeoPoint(e){return new ln(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=_c(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ao(e));default:return null}}convertTimestamp(e){const n=pr(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);ce(bw(r),9688,{name:e});const i=new Co(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||An(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ba{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Di extends c1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Di._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Di._jsonSchemaVersion="firestore/documentSnapshot/1.0",Di._jsonSchema={type:De("string",Di._jsonSchemaVersion),bundleSource:De("string","DocumentSnapshot"),bundleName:De("string"),bundle:De("string")};class tl extends Di{data(e={}){return super.data(e)}}class Vi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ba(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new tl(this._firestore,this._userDataWriter,r.key,r,new ba(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new tl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ba(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const u=new tl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ba(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:RP(c.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}Vi._jsonSchemaVersion="firestore/querySnapshot/1.0",Vi._jsonSchema={type:De("string",Vi._jsonSchemaVersion),bundleSource:De("string","QuerySnapshot"),bundleName:De("string"),bundle:De("string")};class kP extends CP{constructor(e){super(),this.firestore=e}convertBytes(e){return new bt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,n)}}function d1(t){t=dr(t,os);const e=dr(t.firestore,as),n=Of(e),r=new kP(e);return TP(t._query),fP(n,t._query).then(i=>new Vi(e,r,t,i))}function Cy(t,e,n,...r){t=dr(t,Me);const i=dr(t.firestore,as),s=Pc(i);let o;return o=typeof(e=ke(e))=="string"||e instanceof Go?s1(s,"updateDoc",t._key,e,n,r):i1(s,"updateDoc",t._key,e),Nc(i,[o.toMutation(t._key,vt.exists(!0))])}function PP(t){return Nc(dr(t.firestore,as),[new Ic(t._key,vt.none())])}function bP(t,e){const n=dr(t.firestore,as),r=el(t),i=h1(t.converter,e);return Nc(n,[r1(Pc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function Nc(t,e){return function(r,i){const s=new lr;return r.asyncQueue.enqueueAndForget(async()=>Zk(await hP(r),i,s)),s.promise}(Of(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pc(e)}set(e,n,r){this._verifyNotCommitted();const i=Bu(e,this._firestore),s=h1(i.converter,n,r),o=r1(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,vt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Bu(e,this._firestore);let o;return o=typeof(n=ke(n))=="string"||n instanceof Go?s1(this._dataReader,"WriteBatch.update",s._key,n,r,i):i1(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Bu(e,this._firestore);return this._mutations=this._mutations.concat(new Ic(n._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bu(t,e){if((t=ke(t)).firestore!==e)throw new W(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){return Of(t=dr(t,as)),new jP(t,e=>Nc(t,e))}(function(e,n=!0){(function(i){ns=i})(ts),Wi(new Qr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),c=new as(new vC(r.getProvider("auth-internal")),new EC(o,r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(d.options.projectId,p)}(o,i),o);return s={useFetchStreams:n,...s},c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),or(kg,Pg,e),or(kg,Pg,"esm2020")})();var DP="firebase",VP="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(DP,VP,"app");const LP={apiKey:"AIzaSyA6KgmU6DE_dQY9VM5Wn8dM-yhE3IGjYs4",authDomain:"marlin-ec-training.firebaseapp.com",projectId:"marlin-ec-training",storageBucket:"marlin-ec-training.firebasestorage.app",messagingSenderId:"909399010808",appId:"1:909399010808:web:f433c10f7b5eafe22f7a0d"},f1=J_(LP),Jt=pC(f1),Vr=mP(f1),p1=ee.createContext(),OP={url:window.location.origin+"/Marlin-EC-Training/",handleCodeInApp:!0},MP=new fn;function Qo(){return ee.useContext(p1)}function FP({children:t}){const[e,n]=ee.useState(null),[r,i]=ee.useState([]),[s,o]=ee.useState(!0),[c,u]=ee.useState("");async function d(w){try{const T=SP(Za(Vr,"whitelist"),AP("email","==",w.toLowerCase())),j=await d1(T);if(j.empty)return console.error("User is not in whitelist, access denied"),{allowed:!1,roles:[]};const U=j.docs[0].data(),_=U.role||U.roles||[];return{allowed:!0,roles:Array.isArray(_)?_:_?[_]:[]}}catch(T){return console.error("Whitelist check failed:",T),{allowed:!1,roles:[]}}}function p(w){return r.includes(w)}function m(w){return w.some(T=>r.includes(T))}async function y(w,T){return u(""),JS(Jt,w,T)}async function C(w){u("");const{allowed:T}=await d(w);if(!T)throw new Error("This email is not authorized to access this platform.");await ZS(Jt,w,OP),window.localStorage.setItem("emailForSignIn",w)}async function P(){if(vg(Jt,window.location.href)){let w=window.localStorage.getItem("emailForSignIn");w||(w=window.prompt("Please provide your email for confirmation"));const T=await eA(Jt,w,window.location.href);return window.localStorage.removeItem("emailForSignIn"),window.history.replaceState({},document.title,window.location.pathname),T}return null}async function N(){return u(""),TA(Jt,MP)}function L(){return i([]),Du(Jt)}ee.useEffect(()=>{vg(Jt,window.location.href)&&P().catch(w=>{console.error("Sign in failed:",w),u(w.message)})},[]),ee.useEffect(()=>rA(Jt,async T=>{if(o(!0),!T){n(null),i([]),o(!1);return}try{const{allowed:j,roles:F}=await d(T.email);j?(n(T),i(F),u("")):(await Du(Jt),n(null),i([]),u("This email is not authorized to access this platform."))}catch(j){console.error("Auth check failed:",j),await Du(Jt),n(null),i([]),u("Failed to verify access. Please try again later.")}finally{o(!1)}}),[]);const S={currentUser:e,userRoles:r,hasRole:p,hasAnyRole:m,loginWithPassword:y,sendLoginLink:C,completeSignIn:P,loginWithGoogle:N,logout:L,error:c};return a.jsx(p1.Provider,{value:S,children:!s&&t})}function UP({onLoginSuccess:t}){const[e,n]=ee.useState(""),[r,i]=ee.useState(""),[s,o]=ee.useState(""),[c,u]=ee.useState(""),[d,p]=ee.useState(!1),[m,y]=ee.useState("google"),{loginWithPassword:C,sendLoginLink:P,loginWithGoogle:N,currentUser:L}=Qo();ee.useEffect(()=>{L&&t()},[L,t]);async function S(){o("");try{p(!0),await N(),t()}catch(j){o(j.message||"Failed to sign in with Google")}p(!1)}async function w(j){j.preventDefault(),o(""),u("");try{p(!0),await P(e),u("Check your email for the login link!")}catch(F){o(F.message||"Failed to send login link")}p(!1)}async function T(j){j.preventDefault(),o("");try{p(!0),await C(e,r),t()}catch(F){o(F.message||"Failed to sign in")}p(!1)}return a.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f8fafc",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",width:"100%",maxWidth:"400px"},children:[a.jsx("h1",{style:{textAlign:"center",color:"#1e40af",marginBottom:"0.5rem"},children:"Marlin Training Hub"}),a.jsx("p",{style:{textAlign:"center",color:"#64748b",marginBottom:"1.5rem"},children:"Sign in to access the platform"}),s&&a.jsx("div",{style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:s}),c&&a.jsx("div",{style:{backgroundColor:"#dcfce7",color:"#16a34a",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:c}),a.jsxs("button",{onClick:S,disabled:d,style:{width:"100%",padding:"0.75rem",backgroundColor:"#ffffff",color:"#333333",border:"1px solid #dadce0",borderRadius:"6px",fontSize:"1rem",fontWeight:"500",cursor:d?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[a.jsx("path",{fill:"#4285F4",d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"}),a.jsx("path",{fill:"#34A853",d:"M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"}),a.jsx("path",{fill:"#FBBC05",d:"M3.964 10.71c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z"}),a.jsx("path",{fill:"#EA4335",d:"M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"})]}),"Sign in with Google"]}),a.jsx("div",{style:{textAlign:"center",color:"#94a3b8",margin:"1rem 0",fontSize:"0.875rem"},children:" or "}),a.jsxs("div",{style:{display:"flex",marginBottom:"1rem",borderRadius:"6px",overflow:"hidden",border:"1px solid #e2e8f0"},children:[a.jsx("button",{onClick:()=>y("email-link"),style:{flex:1,padding:"0.5rem",border:"none",backgroundColor:m==="email-link"?"#1e40af":"#ffffff",color:m==="email-link"?"#ffffff":"#64748b",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},children:"Email Link"}),a.jsx("button",{onClick:()=>y("password"),style:{flex:1,padding:"0.5rem",border:"none",backgroundColor:m==="password"?"#1e40af":"#ffffff",color:m==="password"?"#ffffff":"#64748b",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},children:"Password"})]}),m==="email-link"&&a.jsxs("form",{onSubmit:w,children:[a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#334155"},children:"Email"}),a.jsx("input",{type:"email",value:e,onChange:j=>n(j.target.value),required:!0,placeholder:"you@snorkel.ai",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"1rem",boxSizing:"border-box"}})]}),a.jsx("button",{type:"submit",disabled:d,style:{width:"100%",padding:"0.75rem",backgroundColor:"#1e40af",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"1rem",fontWeight:"600",cursor:d?"not-allowed":"pointer",opacity:d?.7:1},children:d?"Sending...":"Send Login Link"})]}),m==="password"&&a.jsxs("form",{onSubmit:T,children:[a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#334155"},children:"Email"}),a.jsx("input",{type:"email",value:e,onChange:j=>n(j.target.value),required:!0,placeholder:"you@snorkel.ai",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"1rem",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#334155"},children:"Password"}),a.jsx("input",{type:"password",value:r,onChange:j=>i(j.target.value),required:!0,placeholder:"",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"1rem",boxSizing:"border-box"}})]}),a.jsx("button",{type:"submit",disabled:d,style:{width:"100%",padding:"0.75rem",backgroundColor:"#1e40af",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"1rem",fontWeight:"600",cursor:d?"not-allowed":"pointer",opacity:d?.7:1},children:d?"Signing in...":"Sign In"})]})]})})}function Ns({title:t,children:e,defaultOpen:n=!1}){const[r,i]=ee.useState(n);return a.jsxs("div",{className:"collapsible-phase",children:[a.jsxs("button",{className:"collapsible-phase-header",onClick:()=>i(!r),children:[a.jsx("span",{children:t}),a.jsx("span",{className:"collapsible-phase-icon",children:r?"":"+"})]}),r&&a.jsx("div",{className:"collapsible-phase-content",children:e})]})}function BP({onNavigate:t,onLogout:e}){const{hasRole:n}=Qo(),[r,i]=ee.useState(1),[s,o]=ee.useState({x:0,y:0}),[c,u]=ee.useState(!1),[d,p]=ee.useState({x:0,y:0}),m=ee.useRef(null),y=()=>i(T=>Math.min(T+.25,3)),C=()=>i(T=>Math.max(T-.25,.5)),P=()=>{i(1),o({x:0,y:0})},N=T=>{r>1&&(u(!0),p({x:T.clientX-s.x,y:T.clientY-s.y}))},L=T=>{c&&o({x:T.clientX-d.x,y:T.clientY-d.y})},S=()=>u(!1),w=T=>{T.preventDefault(),i(j=>T.deltaY<0?Math.min(j+.1,3):Math.max(j-.1,.5))};return a.jsxs("div",{className:"landing-page",children:[a.jsx("header",{className:"header",children:a.jsxs("nav",{className:"nav",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"#1e40af",letterSpacing:"-0.02em"},children:"Snorkel"}),a.jsx("div",{className:"logo",children:"Marlin Training Hub"})]}),a.jsxs("ul",{className:"nav-links",children:[a.jsx("li",{children:a.jsx("a",{href:"#home",children:"Home"})}),a.jsx("li",{children:a.jsx("a",{href:"#resources",children:"Training Resources"})}),a.jsx("li",{children:a.jsx("button",{onClick:()=>t("glossary"),style:{background:"none",border:"none",color:"#4b5563",textDecoration:"none",fontWeight:500,cursor:"pointer",fontSize:"1rem",fontFamily:"inherit"},children:"Glossary"})}),a.jsx("li",{children:a.jsx("button",{onClick:()=>t("faq"),style:{background:"none",border:"none",color:"#4b5563",textDecoration:"none",fontWeight:500,cursor:"pointer",fontSize:"1rem",fontFamily:"inherit"},children:"FAQ"})}),n("swe")&&a.jsx("li",{children:a.jsx("button",{onClick:()=>t("sweguidelines"),style:{background:"none",border:"none",color:"#7c3aed",textDecoration:"none",fontWeight:600,cursor:"pointer",fontSize:"1rem",fontFamily:"inherit"},children:"SWE Guidelines"})}),n("generalist")&&a.jsx("li",{children:a.jsx("button",{onClick:()=>t("generalistguidelines"),style:{background:"none",border:"none",color:"#7c3aed",textDecoration:"none",fontWeight:600,cursor:"pointer",fontSize:"1rem",fontFamily:"inherit"},children:"Generalist Guidelines"})}),n("admin")&&a.jsx("li",{children:a.jsx("button",{onClick:()=>t("adminpanel"),style:{background:"none",border:"none",color:"#dc2626",textDecoration:"none",fontWeight:600,cursor:"pointer",fontSize:"1rem",fontFamily:"inherit"},children:"Admin Panel"})}),a.jsxs("li",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n("admin")&&a.jsx("span",{style:{background:"#dc2626",color:"#fff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase"},children:"Admin"}),n("swe")&&a.jsx("span",{style:{background:"#2563eb",color:"#fff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase"},children:"SWE"}),n("generalist")&&a.jsx("span",{style:{background:"#7c3aed",color:"#fff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase"},children:"Generalist"}),a.jsx("button",{onClick:e,style:{background:"none",border:"1px solid #dc2626",color:"#dc2626",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:500},children:"Logout"})]})]})]})}),a.jsxs("main",{className:"main-content",children:[a.jsxs("section",{className:"overview-section",children:[a.jsx("h2",{className:"section-title",children:"Project Overview"}),a.jsx("div",{style:{backgroundColor:"#dbeafe",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #2563eb",marginBottom:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#1e40af",fontWeight:600},children:[" ",a.jsx("strong",{children:"Important:"})," For Prompt Review submissions, please use ",a.jsx("strong",{children:"Marlin-Prompt-Review V2"})," on the Snorkel platform."]})}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"0.75rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginBottom:"2rem"},children:a.jsxs("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:[" ",a.jsx("strong",{children:"Minimum 3 turns required."})," All submissions must include at least three turns of iteration with the model."]})}),a.jsx("p",{className:"overview-intro",children:"We're excited to welcome you to Project Marlin, an initiative focused on advancing AI-assisted software engineering through high-quality Python development and structured collaboration with state-of-the-art AI models."}),a.jsxs("div",{style:{width:"100%",maxWidth:"1200px",margin:"2rem auto"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[a.jsx("button",{onClick:C,style:{padding:"0.5rem 1rem",backgroundColor:"#1e40af",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:""}),a.jsxs("button",{onClick:P,style:{padding:"0.5rem 1rem",backgroundColor:"#64748b",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:500,fontSize:"0.875rem"},children:["Reset (",Math.round(r*100),"%)"]}),a.jsx("button",{onClick:y,style:{padding:"0.5rem 1rem",backgroundColor:"#1e40af",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"+"})]}),a.jsx("div",{ref:m,onMouseDown:N,onMouseMove:L,onMouseUp:S,onMouseLeave:S,onWheel:w,style:{overflow:"hidden",borderRadius:"12px",border:"1px solid #e2e8f0",cursor:r>1?c?"grabbing":"grab":"default",backgroundColor:"#f8fafc"},children:a.jsx("img",{src:"/Marlin-EC-Training/media/images/Workflow.svg",alt:"Project Marlin Workflow",draggable:!1,style:{width:"100%",display:"block",transform:`scale(${r}) translate(${s.x/r}px, ${s.y/r}px)`,transformOrigin:"center center",transition:c?"none":"transform 0.1s ease-out"}})}),a.jsx("p",{style:{textAlign:"center",color:"#94a3b8",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Use scroll wheel to zoom  Drag to pan when zoomed in"})]}),a.jsx(Ns,{title:"Step 1: Assessment",children:a.jsxs("div",{className:"phase-item",children:[a.jsx("p",{children:"This step evaluates your ability to review Python code changes critically."}),a.jsx("p",{children:"You'll be given a repository and a set of changes generated by a model. Your task is to assess whether those changes are correct, incomplete, or flawed, and explain your reasoning clearly."}),a.jsx("p",{children:"We're looking for careful analysis, attention to detail, and clear technical explanations  not generic answers or over-reliance on automated tools."}),a.jsxs("div",{style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"62.42774566473989%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/b45caf30507149bfb43d3cc20c4513ef",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})}),a.jsx(Ns,{title:"Step 2: Repository & Pull Request Selection",children:a.jsxs("div",{className:"phase-item",children:[a.jsx("p",{children:"In this step, you select the repository and pull request you'll work on for the remainder of the workflow."}),a.jsx("p",{children:"You'll review available options, inspect the codebase, and choose a pull request that introduces meaningful behavior changes. The task should require real engineering judgment and should be complex enough to warrant careful planning and iteration."}),a.jsx("p",{children:"Choose work you can reasonably understand and evaluate. A strong selection has clear intent but non-trivial implementation details."}),a.jsxs("div",{style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"62.42774566473989%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/a212b65a295c4593bad11ac8bb94055e",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})}),a.jsx(Ns,{title:"Step 3: Prompt Preparation",children:a.jsxs("div",{className:"phase-item",children:[a.jsx("p",{children:"Before running any tools, you plan the work."}),a.jsx("p",{children:"You'll describe what the repository does, what the pull request is intended to change, and write a prompt that will guide the model in implementing those changes using the CLI tool."}),a.jsx("p",{children:"The goal of this step is to remove ambiguity and define a prompt that clearly describes the expected outcome."}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginTop:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:[" ",a.jsx("strong",{children:"Do not use role-based prompting."}),' Avoid phrases like "You are a senior software engineer..." or "Act as an expert developer...". Write clear, direct instructions that describe exactly what needs to be done.']})}),a.jsxs("div",{style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"56.84210526315789%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/2280f00825ec460e836575df2544aeb2",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})}),a.jsx(Ns,{title:"Step 4: Execution & Finalization",children:a.jsxs("div",{className:"phase-item",children:[a.jsx("p",{children:"This is where the planned work is carried out."}),a.jsx("p",{children:"You'll run the task using the provided tools, review the generated changes, and iterate as needed until the result matches your intent. You'll compare multiple outputs, discard incorrect approaches, and refine the solution across turns."}),a.jsx("p",{children:"Once complete, you'll select the stronger of the two model responses and submit your work for review."}),a.jsx("div",{style:{backgroundColor:"#dbeafe",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #2563eb",marginTop:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#1e40af",fontWeight:500},children:[" ",a.jsx("strong",{children:"Note:"})," For final submission, use ",a.jsx("strong",{children:"Marlin-Prompt-Review V2"})," on the Snorkel platform."]})}),a.jsxs("div",{style:{backgroundColor:"#fef3c7",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #f59e0b",marginTop:"1rem"},children:[a.jsxs("p",{style:{margin:0,marginBottom:"0.5rem",color:"#92400e",fontWeight:600},children:[" ",a.jsx("strong",{children:"Important:"})," Do not check out the PR branch (e.g. ",a.jsx("code",{style:{backgroundColor:"#fde68a",padding:"0.125rem 0.375rem",borderRadius:"4px"},children:"pr-833"}),") when working on a Marlin submission. PR branches already contain the requested changes."]}),a.jsx("p",{style:{margin:0,color:"#92400e"},children:"Always use the pre-PR repository state provided in the approval email after Prompt-Preparation. If you're unsure you're on the correct version, ask in Slack before proceeding."})]}),a.jsxs("div",{style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86161251504213%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/d368f4ece5d248a3af7ed53edca7ed20",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})}),a.jsx("p",{className:"overview-closing",children:"Thank you for being part of the Snorkel Expert community. We look forward to working with you as we push the boundaries of AI-assisted software engineering through Project Marlin."}),a.jsx("h2",{className:"section-title",children:"Guidelines"}),a.jsxs("div",{className:"resource-buttons",children:[a.jsxs("button",{className:"resource-button",onClick:()=>t("overview"),children:[a.jsx("span",{className:"button-text",children:"Overview"}),a.jsx("span",{className:"button-description",children:"Provides a high-level explanation of the project, how the full workflow fits together."})]}),a.jsxs("button",{className:"resource-button",onClick:()=>t("prselection"),children:[a.jsx("span",{className:"button-text",children:"Step 2: PR Selection"}),a.jsx("span",{className:"button-description",children:"Covers how to choose a valid repository and pull request with the right level of complexity."})]}),a.jsxs("button",{className:"resource-button",onClick:()=>t("promptpreparation"),children:[a.jsx("span",{className:"button-text",children:"Step 3: Prompt Preparation"}),a.jsx("span",{className:"button-description",children:"Explains how to outline expected behavior, edge cases, tests, and write a strong prompt."})]}),a.jsxs("button",{className:"resource-button",onClick:()=>t("modelworkspace"),children:[a.jsx("span",{className:"button-text",children:"Step 4: CLI and Final Submission"}),a.jsx("span",{className:"button-description",children:"Shows how to run the model, iterate across turns, review updates, and finalize your submission. Use Marlin-Prompt-Review V2."})]}),a.jsxs("button",{className:"resource-button",onClick:()=>t("rulesandrequirements"),children:[a.jsx("span",{className:"button-text",children:"Rules & Requirements"}),a.jsx("span",{className:"button-description",children:"Details OS requirements, allowed tools, time limits, and project policies you must follow."})]}),a.jsxs("button",{className:"resource-button",onClick:()=>t("cli"),children:[a.jsx("span",{className:"button-text",children:"CLI Setup"}),a.jsx("span",{className:"button-description",children:"How to setup the CLI tool to start tasking."})]})]})]}),a.jsx("div",{style:{borderTop:"2px solid #e2e8f0",marginTop:"3rem",paddingTop:"2rem"},children:a.jsxs("section",{id:"resources",className:"resources-section",children:[a.jsx("h2",{className:"section-title",children:"Training Resources"}),a.jsx("div",{style:{width:"100%",marginBottom:"2rem"},children:a.jsxs("div",{style:{marginTop:"3rem"},children:[a.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1e293b",marginBottom:"1.5rem",textAlign:"center"},children:"Resources Hub"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"resource-hub-card",children:[a.jsx("h4",{className:"resource-hub-card-title",children:" Essential Resources"}),a.jsxs("ul",{className:"resource-hub-list",children:[a.jsx("li",{children:a.jsx("a",{href:"https://expert.snorkel.ai",target:"_blank",rel:"noopener noreferrer",children:"Snorkel Expert Platform"})}),a.jsx("li",{children:a.jsx("a",{href:"https://snorkel-team.enterprise.slack.com/docs/TFHL9C8JG/F0A1J0370E8",target:"_blank",rel:"noopener noreferrer",children:"PR Suggestion Form"})})]})]}),a.jsxs("div",{className:"resource-hub-card",children:[a.jsx("h4",{className:"resource-hub-card-title",children:" Need Help?"}),a.jsxs("ul",{className:"resource-hub-list",children:[a.jsxs("li",{children:[a.jsx("a",{href:"https://snorkel-team.enterprise.slack.com/archives/C0A1GKLJQVA",target:"_blank",rel:"noopener noreferrer",style:{color:"#1e40af",fontWeight:600},children:"#ec-marlin-support-v2"}),"  Slack channel for project questions"]}),a.jsxs("li",{children:[a.jsx("a",{href:"https://snorkel-team.enterprise.slack.com/docs/TFHL9C8JG/F0A1J0370E8",target:"_blank",rel:"noopener noreferrer",children:"Marlin Issue Tracker"}),"  Report platform problems"]}),a.jsxs("li",{children:[a.jsx("a",{href:"https://snorkel-team.enterprise.slack.com/docs/TFHL9C8JG/F0A1J0370E8",target:"_blank",rel:"noopener noreferrer",children:"PR Suggestion Form"}),"  Suggest repos/PRs"]}),a.jsxs("li",{children:[a.jsx("a",{href:"https://snorkel.freshdesk.com/support/tickets/new",target:"_blank",rel:"noopener noreferrer",children:"Expert Support Ticket"}),"  General support"]})]})]})]}),a.jsxs("div",{className:"resource-hub-card",style:{marginBottom:"2rem"},children:[a.jsx("h4",{className:"resource-hub-card-title",children:" Updates"}),a.jsx("div",{style:{color:"#64748b"},children:a.jsxs("p",{style:{margin:"0.5rem 0"},children:[a.jsx("strong",{children:"December 3rd:"})," #ec-marlin-support-v2 launched!"]})})]}),a.jsx(Ns,{title:"Code of Conduct",children:a.jsxs("div",{className:"phase-item",children:[a.jsx("p",{children:"It is important to the Snorkel team that our communication channels remain a safe, professional, and welcoming environment for all Expert Contributors (ECs) and Snorkel staff."}),a.jsx("p",{children:a.jsx("strong",{children:"We are dedicated to the following:"})}),a.jsxs("ul",{children:[a.jsx("li",{children:"Maintaining respectful and professional relations with Snorkel staff and other ECs."}),a.jsx("li",{children:"No threats toward Snorkel staff or other ECsthese will not be tolerated."}),a.jsx("li",{children:"No use of profane or obscene comments directed at others."}),a.jsx("li",{children:a.jsx("strong",{children:"Do not share this project information with anyone outside the project."})})]}),a.jsx("p",{children:"The purpose of this Code of Conduct is not to prevent ECs from expressing concerns or dissatisfaction. If something feels wrong, we encourage you to report it in a respectful manner aligned with the community ethos."}),a.jsx("p",{style:{fontSize:"0.9rem",color:"#94a3b8",marginTop:"1rem"},children:"Violations will be addressed privately. Persistent violations may result in revoked Slack access or offboarding from Snorkel work."})]})})]})}),a.jsxs("div",{style:{display:"flex",gap:"2rem",justifyContent:"center",flexWrap:"wrap",marginBottom:"3rem"},children:[a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",maxWidth:"550px",minWidth:"480px",width:"100%"},children:a.jsxs("div",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"12px",padding:"2rem",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",width:"100%"},children:[a.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:700,color:"#ffffff",marginBottom:"1.5rem",textAlign:"center"},children:"Onboarding Session"}),a.jsxs("div",{children:[a.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:600,color:"#ffffff",marginBottom:"1rem",textAlign:"center"},children:"Onboarding Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"53.60262008733624%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/82f96f08bc964f54829703971ea81b2f",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",maxWidth:"550px",minWidth:"480px",width:"100%"},children:a.jsxs("div",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"12px",padding:"2rem",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",width:"100%"},children:[a.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:700,color:"#ffffff",marginBottom:"1.5rem",textAlign:"center"},children:"Tutorial"}),a.jsxs("div",{children:[a.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:600,color:"#ffffff",marginBottom:"1rem",textAlign:"center"},children:"CLI Tool Walkthrough"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.94708994708994%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/888ac13d11c24d1099f7ff6b6eaa334b",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:600,color:"#ffffff",marginBottom:"1rem",textAlign:"center"},children:"Multi-Turn Workflow"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/6537574a3bb64ee0aba07dcf2feca433",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})})]})]})})]}),a.jsx("footer",{className:"footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function zP({onNavigate:t}){return a.jsxs("div",{className:"videos-page",children:[a.jsxs("header",{className:"videos-header",children:[a.jsx("button",{className:"back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("div",{className:"videos-logo",children:"FAQ"})]}),a.jsxs("main",{className:"videos-content",children:[a.jsx("h1",{className:"videos-title",children:"Frequently Asked Questions"}),a.jsxs("div",{className:"faq-container",children:[a.jsx("h2",{className:"faq-section-title",children:"Workflow & Sequencing"}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"What is the overall workflow?"}),a.jsx("p",{className:"faq-answer",children:"The workflow follows a fixed sequence:"}),a.jsx("p",{className:"faq-answer",children:a.jsx("strong",{children:"Repository & Pull Request Selection  Prompt Preparation  Execution & Finalization  Submission Review"})}),a.jsx("p",{className:"faq-answer",children:"Each step builds on the previous one and must be completed in order."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"Can I skip steps or jump ahead?"}),a.jsx("p",{className:"faq-answer",children:"No. Steps must be completed sequentially to proceed through the workflow."})]}),a.jsx("h2",{className:"faq-section-title",children:"Repository & Pull Request Selection"}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"What am I selecting in this step?"}),a.jsx("p",{className:"faq-answer",children:"You select one or more repositories and associated pull requests that will be used as the basis for your work."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"Can I select multiple pull requests?"}),a.jsx("p",{className:"faq-answer",children:"Yes. You may select multiple pull requests. You are responsible for managing your workload and completing each task thoroughly."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"How should I choose a pull request?"}),a.jsx("p",{className:"faq-answer",children:"Choose pull requests that introduce meaningful behavior changes and require real technical judgment to evaluate. You should be comfortable understanding the codebase well enough to review and explain the changes."})]}),a.jsx("h2",{className:"faq-section-title",children:"Prompt Preparation"}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"Is the prompt the same thing as the pull request?"}),a.jsx("p",{className:"faq-answer",children:"No. The pull request defines what should change. The prompt defines how the model should implement those changes."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"How detailed should my answers be?"}),a.jsx("p",{className:"faq-answer",children:"Be specific and concrete. Clearly describe current behavior, expected behavior, edge cases, and acceptance criteria. Avoid vague or high-level statements."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"What prompting style should I use?"}),a.jsx("p",{className:"faq-answer",children:"Use clear, direct, and structured instructions. Do not use role-based prompting or conversational language."})]}),a.jsx("h2",{className:"faq-section-title",children:"Execution & Platform Use"}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"Can I use external LLMs or AI tools to help?"}),a.jsx("p",{className:"faq-answer",children:"No. Using external LLMs or AI tools to analyze code, write prompts, review outputs, or draft explanations is not allowed. All reasoning and evaluation must be your own."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"Why do I see two model responses?"}),a.jsx("p",{className:"faq-answer",children:"Each execution turn produces two alternative outputs. You are expected to review both carefully, compare them, and select the stronger result."})]}),a.jsx("h2",{className:"faq-section-title",children:"Troubleshooting"}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"What should I do if something goes wrong?"}),a.jsx("p",{className:"faq-answer",children:"If you encounter an issue that is not covered in the dedicated tooling or CLI documentation, report it through the appropriate support channel with clear details about what happened and where it occurred."})]})]})]}),a.jsx("footer",{className:"videos-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function WP({onNavigate:t}){return a.jsxs("div",{className:"videos-page",children:[a.jsxs("header",{className:"videos-header",children:[a.jsx("button",{className:"back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("div",{className:"videos-logo",children:"Glossary"})]}),a.jsxs("main",{className:"videos-content",children:[a.jsx("h1",{className:"videos-title",children:"Glossary"}),a.jsx("div",{className:"content-body",style:{maxWidth:"1000px",margin:"0 auto",textAlign:"left"},children:a.jsxs("div",{className:"glossary-grid",children:[a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Alias Email"}),a.jsx("p",{style:{marginBottom:0},children:"A project-specific email account used only to access required tools and platforms. Not for personal communication or external use."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Assessment"}),a.jsx("p",{style:{marginBottom:0},children:"The initial qualification step where you review model-generated Python code and explain whether the changes are correct, incomplete, or flawed."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Baseline Repository"}),a.jsx("p",{style:{marginBottom:0},children:"The original state of the codebase before any changes are generated during execution."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Blocking Issue"}),a.jsx("p",{style:{marginBottom:0},children:"A problem that makes a result unacceptable, such as broken logic, missing required changes, failing tests, or incorrect file placement."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Client Platform"}),a.jsx("p",{style:{marginBottom:0},children:"The environment where execution tasks are run and model outputs are reviewed."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Code of Conduct"}),a.jsx("p",{style:{marginBottom:0},children:"Rules governing professional behavior, confidentiality, and appropriate communication within the project."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Complexity Requirement"}),a.jsx("p",{style:{marginBottom:0},children:"The expectation that selected work is substantial enough to require planning, iteration, and technical judgment."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Context Setting"}),a.jsx("p",{style:{marginBottom:0},children:"The section where you explain what the codebase does and what the selected change is intended to accomplish."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Current Behavior"}),a.jsx("p",{style:{marginBottom:0},children:"How the code behaves before the intended changes are applied."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Dependency Setup"}),a.jsx("p",{style:{marginBottom:0},children:"Installing and configuring the tools and packages required to run the project locally."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Diff Review"}),a.jsx("p",{style:{marginBottom:0},children:"A file-by-file review of changes to confirm what was modified and whether it matches the intended behavior."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"EC (Expert Contributor)"}),a.jsx("p",{style:{marginBottom:0},children:"You  the participant responsible for reviewing code, writing prompts, evaluating outputs, and submitting final results."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Edge Case"}),a.jsx("p",{style:{marginBottom:0},children:"A non-standard scenario that the updated code must still handle correctly."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Expected Behavior"}),a.jsx("p",{style:{marginBottom:0},children:"How the code should behave after the intended changes are fully implemented."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Feedback Fields"}),a.jsx("p",{style:{marginBottom:0},children:"Where you compare model outputs, explain tradeoffs, and select the preferred result."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"File Structure Correctness"}),a.jsx("p",{style:{marginBottom:0},children:"Whether files were added or modified in the correct locations and follow expected project structure."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Initial Prompt"}),a.jsx("p",{style:{marginBottom:0},children:"The first structured instruction used to begin execution."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Iteration"}),a.jsx("p",{style:{marginBottom:0},children:"A cycle of refining instructions and reviewing outputs to improve correctness across turns."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Last-Mile Edits"}),a.jsx("p",{style:{marginBottom:0},children:"Small, limited cleanups made after review (for example: removing duplicates or minor naming fixes). Significant logic changes must be handled through iteration."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Local Environment"}),a.jsx("p",{style:{marginBottom:0},children:"Your machine setup used to run, test, and review the code."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Model Output (Option A / Option B)"}),a.jsx("p",{style:{marginBottom:0},children:"Two alternative outputs generated for the same prompt, which you review and compare before selecting one."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Non-Blocking Issue"}),a.jsx("p",{style:{marginBottom:0},children:"A minor problem that does not prevent correctness but should be noted."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Prompt Preparation"}),a.jsx("p",{style:{marginBottom:0},children:"The planning stage where you define expected behavior, edge cases, acceptance criteria, and the execution prompt."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Prompt Review Submission"}),a.jsx("p",{style:{marginBottom:0},children:"The final step where you select the best result, provide required details, and report issues if needed."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Task Approach"}),a.jsx("p",{style:{marginBottom:0},children:"Your written plan describing how the change should be implemented and validated."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Turn"}),a.jsx("p",{style:{marginBottom:0},children:"One execution cycle: you submit a prompt, review the model's outputs, and decide how to proceed."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"URL Requirement"}),a.jsx("p",{style:{marginBottom:0},children:"The requirement that the selected pull request link follows the correct format so the platform can track the task."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Workflow Pipeline"}),a.jsx("p",{style:{marginBottom:0},children:"The full sequence of steps from assessment through selection, planning, execution, and final submission."})]})]})})]}),a.jsx("footer",{className:"videos-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function qP({onNavigate:t}){return a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"Overview"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"About This Project"}),a.jsx("p",{children:"This project focuses on reviewing and executing Python code changes using real repositories and pull requests."}),a.jsx("p",{children:"Participants work with model-generated responses that attempt to modify existing code. The goal is to evaluate those changes, determine whether they correctly implement the intended behavior, and guide the model toward a correct and complete result."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Workflow Structure"}),a.jsx("p",{children:"The workflow is structured as a sequence of practical steps. It begins with reviewing model-generated code to assess technical judgment. From there, participants select a repository and pull request that will serve as the basis for the task. They then plan the work by writing a prompt that clearly describes the expected changes, and use the provided tools to execute, review, and refine the results."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"What We Evaluate"}),a.jsx("p",{children:"At each stage, the focus is on concrete outcomes: whether the code behaves as intended, whether changes are complete and consistent, and whether technical decisions can be clearly explained. The project evaluates the ability to work through real codebases, reason about behavior, and make informed decisions when interacting with model-generated output."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Getting Started"}),a.jsx("p",{children:"The guides below explain each step in detail and outline how to approach the work from initial review to final submission."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Tutorial Videos"}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"Step 1: Assessment"}),a.jsx("div",{style:{position:"relative",paddingBottom:"62.42774566473989%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/b45caf30507149bfb43d3cc20c4513ef",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"Step 2: Repository & Pull Request Selection"}),a.jsx("div",{style:{position:"relative",paddingBottom:"62.42774566473989%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/a212b65a295c4593bad11ac8bb94055e",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"Step 3: Prompt Preparation"}),a.jsx("div",{style:{position:"relative",paddingBottom:"56.84210526315789%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/2280f00825ec460e836575df2544aeb2",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"Step 4: Execution & Finalization"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86161251504213%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/d368f4ece5d248a3af7ed53edca7ed20",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"CLI Tool Walkthrough"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.94708994708994%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/888ac13d11c24d1099f7ff6b6eaa334b",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"Multi-Turn Workflow"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/6537574a3bb64ee0aba07dcf2feca433",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function $P({onNavigate:t}){return ee.useEffect(()=>{window.scrollTo(0,0)},[]),a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"PR Selection"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Phase 3: Select Your Repo and Pull Request"}),a.jsx("p",{style:{fontSize:"1.1rem",color:"#1e40af",fontWeight:600},children:"Marlin-PR-Selection Instructions"})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"62.42774566473989%",height:0,borderRadius:"8px",overflow:"hidden",marginBottom:"1.5rem"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/a212b65a295c4593bad11ac8bb94055e",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Step 1: Understand the Interface"}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/PR-Selection.png",alt:"PR Selection Interface",style:{maxWidth:"100%",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginBottom:"1.5rem"}}),a.jsx("p",{children:'The application interface is a "split-screen" layout:'}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Left Side:"})," Displays our PR Glossary consisting of many repositories each with a number of available pull requests"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Right Side:"})," Here you will select your repository along with which corresponding pull request you want to work with"]})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Step 2: Review and Identify a Suitable PR"}),a.jsx("p",{children:"Read through the repositories and pull requests to identify one you feel comfortable with."}),a.jsxs("div",{style:{backgroundColor:"#fef3c7",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #f59e0b",marginTop:"1rem"},children:[a.jsx("p",{style:{margin:0,color:"#92400e",fontWeight:500},children:" Double check that the pull request is sufficiently complex:"}),a.jsxs("ul",{style:{margin:"0.75rem 0 0 0",color:"#92400e"},children:[a.jsxs("li",{children:["You'd expect a human engineer to take ",a.jsx("strong",{children:"at least 2 hours"})," to complete it"]}),a.jsxs("li",{children:["You'd expect a model to struggle to complete the request on its ",a.jsx("strong",{children:"1st or 2nd try"})]}),a.jsxs("li",{children:["It primarily involves ",a.jsx("strong",{children:"Python coding"})]})]})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Step 3: Make Your Selection"}),a.jsxs("ol",{children:[a.jsxs("li",{children:["Select your repository under ",a.jsx("strong",{children:"'Multi-dimensional radio'"})]}),a.jsxs("li",{children:["Select your corresponding pull request under ",a.jsx("strong",{children:"'Sub-topic required'"})]}),a.jsxs("li",{children:["Hit ",a.jsx("strong",{children:"SUBMIT"})]})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Step 4: Wait for Processing"}),a.jsxs("p",{children:["Wait ",a.jsx("strong",{children:"1-2 minutes"})," for Snorkel systems to process your choice before moving onto ",a.jsx("strong",{children:"Marlin-Prompt-Preparation"}),"."]}),a.jsx("div",{style:{backgroundColor:"#dbeafe",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #3b82f6",marginTop:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#1e40af"},children:[" ",a.jsx("strong",{children:"Tip:"})," Use this time to start thinking about how you'll approach the prompt preparation phase."]})})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function HP({onNavigate:t}){return a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"Prompt Preparation"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"56.84210526315789%",height:0,borderRadius:"8px",overflow:"hidden",marginBottom:"1.5rem"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/2280f00825ec460e836575df2544aeb2",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsx("section",{className:"content-card-section",children:a.jsx("h2",{children:"What You Need to Prepare"})}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h3",{children:"1. Repository and Pull Request Context"}),a.jsx("p",{children:"Provide the background needed to understand the task."}),a.jsx("p",{children:"Explain what the repository does, what the selected pull request is intended to change or fix, and why that change is necessary. This should be written clearly enough that someone unfamiliar with the codebase can understand the purpose and intent of the work."}),a.jsx("p",{children:"Focus on behavior and impact rather than implementation history."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h3",{children:"2. Task Approach"}),a.jsx("p",{children:"Describe how the change should be implemented and how correctness will be evaluated."}),a.jsx("p",{children:"Explain the current behavior and how it should differ after the change. Identify the files, functions, or components involved, and note any dependencies or interactions that may be affected."}),a.jsx("p",{children:"Call out relevant edge cases explicitly. These should be concrete and verifiable, not hypothetical. If tests need to be added or updated, describe what they should cover and how they validate the expected behavior."}),a.jsx("p",{children:"Define acceptance criteria that clearly indicate when the task should be considered complete."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h3",{children:"3. Prompt Definition"}),a.jsx("p",{children:"Write the prompt that will be used during execution."}),a.jsx("p",{children:"The prompt must be self-contained and describe exactly what the model is expected to do. Instructions should be clear, objective, and structured. Avoid conversational language and do not use role-based prompting."}),a.jsx("p",{children:"Someone reading the prompt alone should be able to understand the task without additional context."}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginTop:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:[" ",a.jsx("strong",{children:"Do not use role-based prompting."}),' Avoid phrases like "You are a senior software engineer..." or "Act as an expert developer...". Write clear, direct instructions that describe exactly what needs to be done.']})})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h3",{children:"4. Effort and Complexity"}),a.jsx("p",{children:"Briefly describe the level of engineering effort required."}),a.jsx("p",{children:"Explain why the pull request is non-trivial. This may include the number of files involved, the complexity of the logic, interactions between components, or the need to handle edge cases carefully."}),a.jsx("p",{children:"The goal is to demonstrate that the task requires real analysis and deliberate engineering decisions."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Quality Expectations"}),a.jsx("p",{children:"Your responses should be precise and technically grounded."}),a.jsx("p",{children:"Avoid vague language. Claims about behavior should be testable, and descriptions of edge cases, tests, and acceptance criteria should align with one another. Inconsistencies between expected behavior, validation, and testing will lead to issues during execution."}),a.jsx("p",{children:"Work should reflect your own reasoning and understanding of the codebase."})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function GP({onNavigate:t}){return a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"Execution & Finalization"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("div",{style:{backgroundColor:"#dbeafe",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #2563eb",marginBottom:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#1e40af",fontWeight:600},children:[" ",a.jsx("strong",{children:"Important:"})," For final submission, use ",a.jsx("strong",{children:"Marlin-Prompt-Review V2"})," on the Snorkel platform."]})}),a.jsxs("div",{style:{backgroundColor:"#fef3c7",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #f59e0b"},children:[a.jsx("p",{style:{margin:0,marginBottom:"0.75rem",color:"#92400e",fontWeight:600},children:" Important Note on PR Checkout (Please Read)"}),a.jsxs("p",{style:{margin:0,marginBottom:"0.75rem",color:"#92400e"},children:["When working on a Marlin submission, do ",a.jsx("strong",{children:"NOT"})," check out the Pull Request branch itself (e.g. ",a.jsx("code",{style:{backgroundColor:"#fde68a",padding:"0.125rem 0.375rem",borderRadius:"4px"},children:"pr-833"}),") as your working state."]}),a.jsx("p",{style:{margin:0,marginBottom:"0.75rem",color:"#92400e"},children:"Checking out the PR branch will load code that already contains the feature or fix being requested, which defeats the purpose of the task and can invalidate your submission."}),a.jsxs("p",{style:{margin:0,marginBottom:"0.75rem",color:"#92400e"},children:["Always start from the ",a.jsx("strong",{children:"pre-PR state"})," of the repository, which represents the code before the PR changes were introduced."]}),a.jsxs("ul",{style:{margin:"0.75rem 0",color:"#92400e",paddingLeft:"1.25rem"},children:[a.jsx("li",{children:"If your Prompt-Preparation task is approved, you will receive an email with a link to the correct version of the repository."}),a.jsx("li",{children:"This repository snapshot is already set to the appropriate pre-PR baseline and should be used with the CLI tool."}),a.jsx("li",{children:"You should not need to manually check out the PR branch or attempt to reconstruct it yourself."})]}),a.jsx("p",{style:{margin:0,color:"#92400e",fontWeight:500},children:"If you are ever unsure whether you're on the correct repo state, do not proceed  reach out in Slack for confirmation before continuing."})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86161251504213%",height:0,borderRadius:"8px",overflow:"hidden",marginBottom:"1.5rem"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/d368f4ece5d248a3af7ed53edca7ed20",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Purpose of This Stage"}),a.jsx("p",{children:"Execution & Finalization is where the planned work is carried out, evaluated, and finalized."}),a.jsx("p",{children:"In this stage, you use the provided tools to run the task, review the model's outputs, iterate as needed, and select the best result. This is where planning is tested against real code changes, and where correctness, completeness, and judgment matter most."}),a.jsx("p",{children:"This step determines what is ultimately submitted for review."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Key Components You Must Complete"}),a.jsx("h3",{children:"1. Task Execution"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Run the task using the provided CLI and tools"}),a.jsx("li",{children:"Generate model responses based on your prepared prompt"}),a.jsx("li",{children:"Ensure execution follows the intent defined in the preparation stage"})]}),a.jsx("h3",{children:"2. Output Review"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Review all generated code changes carefully"}),a.jsx("li",{children:"Compare outputs against the expected behavior"}),a.jsx("li",{children:"Identify missing logic, incorrect assumptions, or unintended changes"}),a.jsx("li",{children:"Verify that updates follow the repository's structure and conventions"})]}),a.jsx("h3",{children:"3. Iteration and Refinement"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Iterate on the prompt if outputs are incomplete or incorrect"}),a.jsx("li",{children:"Discard approaches that do not meet requirements"}),a.jsx("li",{children:"Refine the solution across turns until it satisfies the acceptance criteria"})]}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginTop:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:[" ",a.jsx("strong",{children:"Minimum 3 turns required."})," Your submission must include at least three turns of iteration with the model. Single-turn or two-turn submissions will not be accepted."]})}),a.jsx("div",{style:{backgroundColor:"#fef3c7",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #f59e0b",marginTop:"1rem"},children:a.jsx("p",{style:{margin:0,color:"#92400e"},children:" Iterations must be intentional and justified. Re-running prompts without clear reasoning is strongly discouraged."})}),a.jsx("h3",{style:{marginTop:"1.5rem"},children:"4. Response Selection"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Compare the multiple model responses provided"}),a.jsx("li",{children:"Select the response that best implements the intended behavior"}),a.jsx("li",{children:"Be prepared to clearly justify why this response was chosen over the alternative"})]}),a.jsx("h3",{children:"5. Finalization and Submission"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Perform a final line-by-line review of all modified files"}),a.jsx("li",{children:"Confirm that only relevant changes were made"}),a.jsx("li",{children:"Ensure behavior, edge cases, and tests (if applicable) are handled correctly"}),a.jsx("li",{children:"Claim and submit your work for review"})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Use of LLMs and External Tools"}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginBottom:"1rem"},children:a.jsx("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:" The use of external LLMs or automated tools outside the provided platform is strictly prohibited."})}),a.jsx("p",{children:"Relying on external LLMs to analyze code, generate reasoning, or draft explanations undermines the purpose of this stage. Submissions that show signs of heavy or direct LLM usage may be rejected during review."}),a.jsx("p",{children:"This stage evaluates your technical judgment and decision-making. The model outputs you review should come only from the provided tools, and all reasoning and evaluation must be your own."})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function KP({onNavigate:t}){return a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"Rules & Requirements"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"CLI Tool Tutorial"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.94708994708994%",height:0,borderRadius:"8px",overflow:"hidden",marginBottom:"1.5rem"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/888ac13d11c24d1099f7ff6b6eaa334b",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Operating System Requirements"}),a.jsx("p",{children:"You must use macOS or Linux."}),a.jsx("p",{children:"Windows is not supported unless you can run Linux reliably."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Required Tools"}),a.jsx("p",{children:"You need the following installed and working before you start:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:["VS Code, with the ",a.jsx("code",{children:"code"})," command available in your terminal (added to PATH)"]}),a.jsx("li",{children:"tmux, installed through your system package manager"}),a.jsx("li",{children:"Git and terminal/CLI access"}),a.jsx("li",{children:"Python installed and available from the command line"}),a.jsx("li",{children:"A stable internet connection (required for access and authentication)"})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Execution Requirements"}),a.jsx("p",{children:"Some requirements are easy to miss but will block progress if they're not followed:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"The CLI tool must be run from the root of the repository directory"}),a.jsx("li",{children:"The workflow opens two workspaces (Trajectory A and Trajectory B) for comparison"}),a.jsx("li",{children:"You must review changes using diffs (VS Code does not always highlight changed lines automatically)"}),a.jsx("li",{children:"Multi-turn work may require restarting the CLI using the continue flow between turns"})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Project Rules"}),a.jsx("h3",{children:"No External LLMs (Strict)"}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginBottom:"1rem"},children:a.jsx("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:" Using external LLMs or AI tools outside the provided platform is not allowed."})}),a.jsx("p",{children:"This includes using external tools to:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Write or rewrite prompts"}),a.jsx("li",{children:"Generate explanations or reasoning"}),a.jsx("li",{children:"Review model outputs"}),a.jsx("li",{children:"Analyze the pull request"}),a.jsx("li",{children:"Draft any part of your submission text"})]}),a.jsx("p",{children:"If your submission shows signs of external LLM-generated content or automated reasoning, it may be rejected. This project evaluates your technical judgment and your ability to explain decisions based on the code."}),a.jsx("h3",{children:"Time Limits"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Prompt Preparation:"})," 4 hours from the moment you start"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Execution:"})," Tasks are expected to progress through multiple iterations/turns, not a single pass"]})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Common Errors to Watch For"}),a.jsx("p",{children:"These are frequent causes of low-quality submissions:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Missing required file changes"}),a.jsx("li",{children:"Tests not added or not updated when needed"}),a.jsx("li",{children:"Duplicate code blocks or repeated logic"}),a.jsx("li",{children:"Incorrect paths, imports, or module references"}),a.jsx("li",{children:"Changes that don't match the intended behavior or acceptance criteria"}),a.jsx("li",{children:"Claiming the model made updates that are not present in the diff"}),a.jsx("li",{children:"Skipping a full diff review of all modified files"})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Reporting Issues"}),a.jsx("p",{children:"If you hit a bug or platform issue, report it with:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Date the issue occurred"}),a.jsx("li",{children:"UUID (or task identifier, if shown)"}),a.jsx("li",{children:"Where it occurred (tool, page, step, or screen)"}),a.jsx("li",{children:"A detailed description of what happened"}),a.jsx("li",{children:"Screenshot (optional but helpful)"}),a.jsx("li",{children:"Time lost due to the issue"})]})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function QP({onNavigate:t}){return ee.useEffect(()=>{window.scrollTo(0,0)},[]),a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"CLI Tool Installation Guide"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"1. System Requirements"}),a.jsx("p",{children:"Before beginning, ensure that your system has:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Git"}),a.jsx("li",{children:"VS Code (added to PATH)"}),a.jsx("li",{children:"Terminal access"}),a.jsx("li",{children:"Internet connection"}),a.jsx("li",{children:"Python"})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"2. Add VS Code to PATH"}),a.jsx("p",{children:"The CLI tool requires VS Code to be accessible from the command line. Follow the instructions for your operating system."}),a.jsx("h3",{children:"macOS"}),a.jsx("p",{children:a.jsx("strong",{children:"Method 1: From inside VS Code (recommended)"})}),a.jsxs("ol",{children:[a.jsx("li",{children:"Open VS Code."}),a.jsxs("li",{children:["Press ",a.jsx("code",{children:"Cmd + Shift + P"})," to open the Command Palette."]}),a.jsxs("li",{children:["Type: ",a.jsx("code",{children:"Shell Command: Install 'code' command in PATH"})]}),a.jsx("li",{children:"Press Enter."})]}),a.jsx("p",{children:"Verify the installation:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"code --version"}),a.jsx("p",{children:"If you see version info, the setup is complete."}),a.jsx("p",{children:a.jsx("strong",{children:"Method 2: Add manually (if Method 1 does not work)"})}),a.jsx("p",{children:"VS Code installs its binary here:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"/Applications/Visual Studio Code.app/Contents/Resources/app/bin"}),a.jsx("p",{children:"Add to PATH in your shell config (zsh):"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:`echo 'export PATH="/Applications/Visual Studio Code.app/Contents/Resources/app/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc`}),a.jsx("h3",{children:"Linux"}),a.jsx("p",{children:"If installed via a package manager (snap, apt, yum), VS Code often adds itself to PATH automatically."}),a.jsxs("p",{children:["If not, add manually by appending the following to your ",a.jsx("code",{children:".bashrc"})," or ",a.jsx("code",{children:".zshrc"}),":"]}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:'export PATH="$PATH:/usr/share/code/bin"'}),a.jsx("p",{children:"Then reload your shell:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"source ~/.bashrc"})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"3. Install Required Dependencies"}),a.jsx("p",{children:"The CLI tool relies on tmux to display and manage live model sessions. Install it before continuing."}),a.jsx("h3",{children:"macOS (Homebrew)"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"brew install tmux"}),a.jsx("h3",{children:"Linux"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:`sudo apt update
sudo apt install tmux`}),a.jsx("h3",{children:"Verify installation"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"tmux -V"})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"4. Download and Prepare the Repository"}),a.jsx("p",{children:"After your Prompt-Preparation submission is accepted, you will receive an email with a link to download the repository tarball."}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/submission-email.png",alt:"Submission email",style:{maxWidth:"800px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginBottom:"1rem"}}),a.jsxs("p",{children:["Download the tarball using the ",a.jsx("strong",{children:"repo link"})," from the email, then unpack and initialize it:"]}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:`# Download the tarball from the email link
# Then unpack it:
tar -xvf <downloaded-file>.tar

# Navigate into the unpacked directory
cd <repo-folder>

# Initialize git in the repository
git init`}),a.jsxs("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af"},children:["Make sure to run ",a.jsx("code",{children:"git init"})," inside the root of the unpacked directory. This is required for the CLI tool to track changes."]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"5. Access the Anthropic Tool"}),a.jsx("p",{children:"Open the following URL:"}),a.jsx("p",{children:a.jsx("a",{href:"https://feedback.anthropic.com/claude_code?email_login=true",target:"_blank",rel:"noopener noreferrer",style:{color:"#1e40af",fontWeight:600},children:"https://feedback.anthropic.com/claude_code?email_login=true"})})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"6. Authenticate Using Your Alias Email"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Enter your Alias email address."}),a.jsx("li",{children:"A verification code will be sent to your Alias inbox."}),a.jsx("li",{children:"Enter the code to complete login."})]}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/Login.png",alt:"Login screen",style:{maxWidth:"500px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginTop:"1rem"}}),a.jsx("p",{style:{backgroundColor:"#fee2e2",padding:"0.75rem",borderRadius:"6px",color:"#dc2626",marginTop:"1rem"},children:'Do not use "Sign in with Google." If authentication fails on the first attempt, simply repeat the login.'})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"7. Download the Appropriate CLI Tool Build"}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/version.png",alt:"Version comparison",style:{maxWidth:"800px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginBottom:"1rem"}}),a.jsx("p",{children:"Select the binary that matches your operating system and CPU architecture:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"macOS (Intel)"}),a.jsx("li",{children:"macOS (ARM)"}),a.jsx("li",{children:"Linux"})]}),a.jsxs("p",{children:["The file will download to ",a.jsx("code",{children:"~/Downloads"})," by default."]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"8. Move and Prepare the CLI Tool"}),a.jsx("p",{children:"From within the root of your cloned repository, move the downloaded file into place and make it executable:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:`mv ~/Downloads/<downloaded-filename> claude-hfi
chmod +x claude-hfi`}),a.jsx("p",{children:"Example:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:`mv ~/Downloads/darwin-arm64 claude-hfi
chmod +x claude-hfi

ls
claude-hfi    README.md`}),a.jsxs("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af"},children:["Every repository you work on must contain its own copy of ",a.jsx("code",{children:"claude-hfi"})," placed at the root. You will need to repeat this step (moving the tool to the repo root) for each new repository you work on."]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"9. Launch the CLI Tool in VS Code Mode"}),a.jsx("p",{children:"Run the following command from the repository root:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"./claude-hfi --vscode"}),a.jsx("p",{children:"This initializes the tool, performs authentication if required, and prepares the environment. Two separate VS Code windows (Trajectory A and Trajectory B) will be opened automatically during execution."}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",fontSize:"0.85rem"},children:`./claude-hfi --vscode

Trajectory A:
  Worktree: /Users/chong/.cache/claude-hfi/-Users-chong-Documents-Project-Test/A
  Terminal: tmux attach -t 2ba1f138-1233-4f40-903a-5b4f35919683-A

Trajectory B:
  Worktree: /Users/chong/.cache/claude-hfi/-Users-chong-Documents-Project-Test/B
  Terminal: tmux attach -t 2ba1f138-1233-4f40-903a-5b4f35919683-B

HFI - Human Feedback Interface

Please enter the interface code:`}),a.jsx("p",{style:{backgroundColor:"#fef3c7",padding:"0.75rem",borderRadius:"6px",color:"#92400e"},children:"Recommendation: Run this command from a terminal outside of VS Code (e.g., the built-in macOS Terminal or iTerm). Otherwise, the two new VS Code windows for Trajectory A and Trajectory B may not open correctly."}),a.jsx("p",{style:{backgroundColor:"#fef3c7",padding:"0.75rem",borderRadius:"6px",color:"#92400e",marginTop:"0.5rem"},children:'Important: If you are working entirely inside VS Code, you must use Git Diff to inspect all file changes. VS Code does not automatically highlight which lines or files have changed. You must manually review differences using the Source Control panel or "Compare with Previous" functionality.'})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"10. Resume a Previous Session"}),a.jsxs("p",{children:["If you closed your session and want to continue working on a previous task, use the ",a.jsx("code",{children:"--continue"})," flag:"]}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"./claude-hfi --continue"}),a.jsx("p",{children:"This will restore your previous session and allow you to pick up where you left off."}),a.jsx("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af"},children:"Use this flag when resuming work after closing VS Code or your terminal. It reconnects to your existing trajectories without starting a new session."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"11. Enter the Interface Code"}),a.jsx("p",{children:"When prompted for the Interface Code, enter:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"cc_agentic_coding"}),a.jsx("p",{children:"This enables the correct workflow mode for the project."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"12. Attach to tmux Sessions"}),a.jsx("p",{children:"In each VS Code window, open the integrated terminal and attach to the appropriate tmux session:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"tmux attach -t <session-id>-A"}),a.jsx("p",{children:"and"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"tmux attach -t <session-id>-B"}),a.jsx("p",{children:"These sessions display live model output, including command execution, file generation, testing activity, and any required user interaction."}),a.jsx("p",{style:{backgroundColor:"#fee2e2",padding:"0.75rem",borderRadius:"6px",color:"#dc2626"},children:"Make sure you run the correct tmux attach command in the correct VS Code window. Trajectory A's command should be run in Trajectory A's VS Code window, and Trajectory B's command in Trajectory B's window."}),a.jsx("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af",marginTop:"0.5rem"},children:"If tmux reports the session name is invalid, use tab completion to identify the correct session ID."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"13. Provide Your Initial Prompt"}),a.jsx("p",{children:"Paste the full prompt you completed during Prompt-Preparation. Press Enter to begin model execution."}),a.jsx("p",{children:"The CLI tool will start two independent trajectories, each in its own VS Code instance."}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",fontSize:"0.85rem"},children:`> Create a riddle and add it to readme.md

Waiting for trajectories to complete.
Check tmux session "2ba1f138-...-A" and session "2ba1f138-...-B" for possible tool permission requests.`})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"14. Wait for Trajectory Completion"}),a.jsx("p",{children:"In the main terminal, the tool will display:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"Waiting for trajectories to complete..."}),a.jsx("p",{style:{backgroundColor:"#fee2e2",padding:"0.75rem",borderRadius:"6px",color:"#dc2626"},children:"Do not proceed until both trajectories have finished running."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"15. Review All Generated Files"}),a.jsx("p",{children:"When execution completes, carefully review the outputs of both trajectories."}),a.jsx("p",{style:{backgroundColor:"#fef3c7",padding:"0.75rem",borderRadius:"6px",color:"#92400e"},children:"Important: If you are working entirely inside VS Code, you must use Git Diff to inspect all file changes. VS Code does not automatically highlight which lines or files have changed."}),a.jsx("h3",{children:"Review Procedure"}),a.jsxs("ol",{children:[a.jsx("li",{children:"Open the VS Code Source Control panel."}),a.jsx("li",{children:"Click on every modified file."}),a.jsx("li",{children:"Examine each line-level diff."}),a.jsx("li",{children:"Confirm that all requested behavior has been implemented."}),a.jsx("li",{children:"Ensure the model did not introduce unnecessary changes or files."}),a.jsx("li",{children:"Verify that no required functionality is missing."}),a.jsx("li",{children:"If the repository includes tests, run them and confirm they pass."}),a.jsx("li",{children:"If new functionality requires additional tests, ensure they exist and are correct."})]}),a.jsx("p",{style:{backgroundColor:"#fee2e2",padding:"0.75rem",borderRadius:"6px",color:"#dc2626"},children:"Thorough file review is mandatory. Missing or incorrect diff inspection is a common cause of rejected submissions."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"16. Compare Trajectory Versions"}),a.jsx("p",{children:"After both trajectories complete, compare the differences between Version A and Version B:"}),a.jsx("h3",{children:"Version A:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",fontSize:"0.85rem"},children:`git diff

--- a/README.md
+++ b/README.md
@@ -1 +1,14 @@
 # Test

+## Riddle
+
+I have keys but no locks,
+I have space but no room,
+You can enter but can't go inside.
+
+What am I?`}),a.jsx("h3",{children:"Version B:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",fontSize:"0.85rem"},children:`git diff

diff --git a/README.md b/README.md
index 8ae0569..d73214a 100644
--- a/README.md
+++ b/README.md
@@ -1 +1,7 @@
 # Test
+
+## Riddle of the Day
+
+I speak without a mouth and hear without ears. 
+I have no body, but I come alive with wind. What am I?
+
+*Answer: An echo*`}),a.jsx("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af"},children:"Review both versions carefully and select the one that best meets the acceptance criteria."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"17. Exit tmux Sessions"}),a.jsx("p",{children:"Once review is complete, close each tmux session:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"exit"})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"18. Uninstall / Cleanup"}),a.jsx("p",{children:"To remove the CLI tool from a repository:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"rm claude-hfi"}),a.jsx("p",{children:"To clear cached worktrees:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"rm -rf ~/.cache/claude-hfi"}),a.jsx("p",{children:"To kill all tmux sessions:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"tmux kill-server"})]}),a.jsxs("section",{className:"content-card-section",style:{borderTop:"3px solid #dc2626",paddingTop:"2rem",marginTop:"3rem"},children:[a.jsx("h2",{style:{color:"#dc2626"},children:" Troubleshooting"}),a.jsxs("div",{style:{backgroundColor:"#fef2f2",borderRadius:"12px",padding:"2rem",marginBottom:"2rem",border:"3px solid #dc2626",boxShadow:"0 4px 12px rgba(220, 38, 38, 0.15)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[a.jsx("span",{style:{fontSize:"1.5rem"},children:""}),a.jsx("h3",{style:{color:"#dc2626",margin:0,fontSize:"1.35rem",fontWeight:700},children:"Multi-Turn Workflow Requires Restarting the CLI Between Turns"})]}),a.jsxs("p",{style:{backgroundColor:"#fee2e2",padding:"1rem",borderRadius:"8px",color:"#991b1b",fontWeight:600,marginBottom:"1.5rem"},children:[a.jsx("strong",{children:" Key Takeaway:"})," The current multi-turn workflow requires quitting and restarting the CLI between turns to maintain stability."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Issue:"})," In some cases, attempting to proceed directly to a second (or later) turn within the same CLI session can result in unstable behavior, including VS Code or tmux inconsistencies."]}),a.jsxs("p",{style:{marginTop:"1rem"},children:[a.jsx("strong",{children:"Workaround (Confirmed Working):"})," Explicitly exit and relaunch the CLI tool between turns using the ",a.jsx("code",{children:"--continue"})," flag."]}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86%",height:0,marginTop:"1.5rem",marginBottom:"1.5rem",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/6537574a3bb64ee0aba07dcf2feca433",frameBorder:"0",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})}),a.jsx("p",{style:{marginTop:"1.5rem",marginBottom:"0.75rem",fontWeight:600,fontSize:"1.1rem"},children:"Recommended Multi-Turn Process:"}),a.jsxs("ol",{children:[a.jsxs("li",{children:["Start the CLI tool normally:",a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",marginTop:"0.5rem",marginBottom:"0.5rem"},children:"./claude-hfi --vscode"})]}),a.jsxs("li",{children:["Complete the first turn as usual:",a.jsxs("ul",{style:{marginTop:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx("li",{children:"Review both trajectories"}),a.jsx("li",{children:"Submit preference feedback"}),a.jsx("li",{children:'Press Enter on "submit feedback"'})]})]}),a.jsxs("li",{children:[a.jsx("strong",{style:{color:"#dc2626"},children:"Do not enter a second-turn prompt."})," When prompted for the next turn, immediately exit the tool:",a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",marginTop:"0.5rem",marginBottom:"0.5rem"},children:"Ctrl + C"})]}),a.jsxs("li",{children:["Relaunch the CLI using the continue flag:",a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",marginTop:"0.5rem",marginBottom:"0.5rem"},children:"./claude-hfi --vscode --continue"})]}),a.jsx("li",{children:"Enter the second-turn prompt and complete the turn normally."}),a.jsxs("li",{children:["After submitting feedback for that turn, again:",a.jsxs("ul",{style:{marginTop:"0.5rem",marginBottom:"0.5rem"},children:[a.jsxs("li",{children:["Press ",a.jsx("code",{children:"Ctrl + C"})," to exit"]}),a.jsxs("li",{children:["Relaunch with ",a.jsx("code",{children:"--continue"})]})]})]}),a.jsx("li",{children:"Repeat this exit  relaunch cycle for as many turns as necessary."})]}),a.jsx("p",{style:{marginTop:"1.5rem"},children:a.jsx("strong",{children:"Additional Notes:"})}),a.jsxs("ul",{children:[a.jsxs("li",{children:["tmux sessions generally persist correctly across restarts when using ",a.jsx("code",{children:"--continue"}),"."]}),a.jsx("li",{children:"Any VS Code instability observed during this process may be environment-specific rather than tool-related."}),a.jsxs("li",{children:["If unexpected tmux behavior occurs, verify session attachment using:",a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",marginTop:"0.5rem"},children:"tmux display-message -p '#S'"})]})]})]}),a.jsxs("div",{style:{backgroundColor:"#fef2f2",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",borderLeft:"4px solid #dc2626"},children:[a.jsx("h3",{style:{color:"#dc2626",marginBottom:"1rem"},children:"VS Code Window Closes After Launching the CLI"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Issue:"})," When launching the CLI tool, two VS Code windows (Trajectory A and Trajectory B) briefly open, but one of them closes automatically, leaving only one trajectory visible."]}),a.jsx("p",{style:{marginTop:"1rem"},children:a.jsx("strong",{children:"Observed Behavior:"})}),a.jsxs("ul",{children:[a.jsx("li",{children:"Both VS Code windows initially open as expected."}),a.jsx("li",{children:"Shortly after launch, either Trajectory A or Trajectory B closes."}),a.jsx("li",{children:"This behavior did not occur in earlier versions of the tool."}),a.jsx("li",{children:"The issue has been observed across multiple submissions."})]}),a.jsx("p",{style:{marginTop:"1rem"},children:a.jsx("strong",{children:"Known Context:"})}),a.jsxs("ul",{children:[a.jsxs("li",{children:["VS Code was fully closed prior to running the CLI (closed via ",a.jsx("code",{children:"Cmd + Q"})," on macOS)."]}),a.jsx("li",{children:"It is unclear whether this behavior is caused by local VS Code settings or the CLI tool itself."})]}),a.jsx("p",{style:{marginTop:"1rem",marginBottom:"0.5rem"},children:a.jsx("strong",{children:"Workaround:"})}),a.jsxs("ol",{children:[a.jsxs("li",{children:["Open a new VS Code window manually: ",a.jsx("code",{children:"File  New Window"})]}),a.jsxs("li",{children:["Then: ",a.jsx("code",{children:"File  Open Folder"})]}),a.jsx("li",{children:"Navigate to the trajectory worktree, typically located at:"})]}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",marginTop:"0.5rem"},children:"~/.cache/claude-hfi/<project-path>/A"}),a.jsx("p",{children:"or"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"~/.cache/claude-hfi/<project-path>/B"}),a.jsx("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af",marginTop:"1rem"},children:"Both worktrees are still created correctly, even if one window closes automatically."})]}),a.jsxs("div",{style:{backgroundColor:"#fef2f2",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",borderLeft:"4px solid #dc2626"},children:[a.jsx("h3",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Lost Main Terminal Session During Execution"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Issue:"})," The main CLI terminal session is lost or closed during execution, but:"]}),a.jsxs("ul",{children:[a.jsx("li",{children:"VS Code windows remain open"}),a.jsx("li",{children:"tmux sessions are still attached and running"})]}),a.jsxs("p",{style:{marginTop:"1rem"},children:[a.jsx("strong",{children:"Recommended Solution:"})," Use the CLI's continue option to resume from the latest state."]}),a.jsx("p",{children:"Run the following command from the repository root:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"./claude-hfi --continue --vscode"}),a.jsx("p",{style:{marginTop:"1rem"},children:a.jsx("strong",{children:"Notes:"})}),a.jsxs("ul",{children:[a.jsxs("li",{children:["The ",a.jsx("code",{children:"--continue"})," flag must be used together with ",a.jsx("code",{children:"--vscode"}),"."]}),a.jsxs("li",{children:["Running ",a.jsx("code",{children:"./claude-hfi --continue"})," without ",a.jsx("code",{children:"--vscode"}),' may result in a "No such file or directory" error, even if the binary exists.']}),a.jsx("li",{children:"This command resumes from the most recent saved state and does not require restarting the task from the beginning."})]})]}),a.jsxs("div",{style:{backgroundColor:"#fef2f2",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",borderLeft:"4px solid #dc2626"},children:[a.jsx("h3",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Verifying You Are Attached to the Correct tmux Session"}),a.jsx("p",{children:"If you are unsure whether a VS Code terminal is attached to the correct tmux session, run the following command inside each trajectory terminal:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"tmux display-message -p '#S'"}),a.jsx("p",{style:{marginTop:"1rem"},children:"This prints the current tmux session name, allowing you to confirm whether you are attached to:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"the Trajectory A session, or"}),a.jsx("li",{children:"the Trajectory B session"})]}),a.jsx("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af",marginTop:"1rem"},children:"This can be useful when reconnecting after interruptions or reopening VS Code windows."})]})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function YP({onNavigate:t}){const{hasRole:e}=Qo();return ee.useEffect(()=>{window.scrollTo(0,0)},[]),!e("swe")&&!e("admin")?a.jsxs("div",{className:"access-denied",children:[a.jsx("h1",{children:"Access Denied"}),a.jsx("p",{children:"You don't have permission to view this page."}),a.jsx("button",{onClick:()=>t("home"),className:"back-button",children:"Back to Home"})]}):a.jsxs("div",{className:"guidelines",children:[a.jsx("header",{className:"guidelines-header",children:a.jsx("button",{className:"back-button",onClick:()=>t("home"),children:" Back to Home"})}),a.jsx("main",{className:"guidelines-main",style:{marginLeft:0},children:a.jsxs("div",{className:"guide-container",children:[a.jsx("h1",{className:"guide-title",children:"SWE Reviewer Guide"}),a.jsx("p",{className:"guide-subtitle",children:"How to Review Marlin-Prompt-Review-V2 Submissions"}),a.jsxs("section",{className:"guide-section",children:[a.jsx("h2",{className:"section-heading",children:"Reviewer Interface Overview"}),a.jsxs("div",{className:"info-card",children:[a.jsx("h3",{children:"Accept / Reject Selector"}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/4.png",style:{maxWidth:"800px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginBottom:"1rem"}})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("h3",{children:"Evaluation Fields"}),a.jsxs("ul",{className:"guide-list",children:[a.jsx("li",{children:a.jsx("strong",{children:"What evals did you agree with / were able to confirm?"})}),a.jsx("li",{children:a.jsx("strong",{children:"What evals did you disagree with / disprove?"})}),a.jsx("li",{children:"Pros/cons/justification elements you investigated and whether you confirmed or disagreed."})]})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("h3",{children:"Rejection Notes Field"}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/5.png",style:{maxWidth:"800px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginBottom:"1rem"}})]})]}),a.jsxs("section",{className:"guide-section",children:[a.jsx("h2",{className:"section-heading",children:"Your Responsibilities as an SWE Reviewer"}),a.jsx("p",{children:"As a reviewer, your job is to validate the technical accuracy of a submitter's work. This includes:"}),a.jsxs("ul",{className:"guide-list",children:[a.jsx("li",{children:"Checking whether the chosen model turn is valid."}),a.jsx("li",{children:"Verifying claims in the submitter's pros/cons and justification sections."}),a.jsx("li",{children:"Confirming or disproving evaluations (evals) based on diffs, logic, and expected behavior."}),a.jsx("li",{children:"Ensuring the submission is internally consistent and aligned with the project workflow."})]}),a.jsxs("div",{className:"callout callout-warning",children:[a.jsx("strong",{children:" Time Limit:"})," This review is time-boxed to ~15 minutes. Focus on correctness, clarity, and consistency."]})]}),a.jsxs("section",{className:"guide-section",children:[a.jsx("h2",{className:"section-heading",children:"What You Must Investigate"}),a.jsxs("div",{className:"callout callout-danger",children:[a.jsx("h3",{children:"1. Serious Technical Issues"}),a.jsx("p",{children:"Examples include:"}),a.jsxs("ul",{className:"guide-list",children:[a.jsx("li",{children:"Incorrect, missing, or incomplete file updates."}),a.jsx("li",{children:"Logic errors or broken behavior in the proposed changes."}),a.jsx("li",{children:"Tests that fail or would fail based on the modifications."}),a.jsx("li",{children:"Claims that contradict the actual diff or model output."}),a.jsx("li",{children:"Features requested in the PR or prompt that were not implemented."})]})]}),a.jsxs("div",{className:"callout callout-info",children:[a.jsx("h3",{children:"2. Evaluation Accuracy"}),a.jsx("p",{children:a.jsx("strong",{children:"If evals flagged issues:"})}),a.jsx("ul",{className:"guide-list",children:a.jsx("li",{children:"Start with the most severe ones and confirm or dispute them."})}),a.jsx("p",{children:a.jsx("strong",{children:"If evals did not flag issues:"})}),a.jsx("ul",{className:"guide-list",children:a.jsx("li",{children:"Select a few of the submitter's own pros/cons or justification items and check whether their claims are technically correct."})})]})]}),a.jsxs("section",{className:"guide-section",children:[a.jsx("h2",{className:"section-heading",children:'How to Decide "Accept" vs. "Reject"'}),a.jsxs("div",{className:"decision-grid",children:[a.jsxs("div",{className:"decision-card decision-accept",children:[a.jsx("h3",{children:" Accept when:"}),a.jsxs("ul",{className:"guide-list",children:[a.jsx("li",{children:"The submitter's reasoning is technically sound."}),a.jsx("li",{children:"Their chosen model turn is appropriate and defensible."}),a.jsx("li",{children:"Their justifications match the actual diffs and behavior."}),a.jsx("li",{children:"No major missed errors or contradictions exist."}),a.jsx("li",{children:"All required fields are filled out clearly and consistently."})]})]}),a.jsxs("div",{className:"decision-card decision-reject",children:[a.jsx("h3",{children:" Reject when:"}),a.jsxs("ul",{className:"guide-list",children:[a.jsx("li",{children:"The reasoning contains clear technical misunderstandings."}),a.jsx("li",{children:"Major model errors were missed or incorrectly evaluated."}),a.jsx("li",{children:"The submission contradicts the diffs, tests, or expected behavior."}),a.jsx("li",{children:"Pros/cons, eval ratings, and justification do not align."}),a.jsx("li",{children:"Critical claims made by the submitter are demonstrably incorrect."})]})]})]})]}),a.jsxs("section",{className:"guide-section",children:[a.jsx("h2",{className:"section-heading",children:"How to Fill Out Each Field"}),a.jsxs("div",{className:"info-card",children:[a.jsx("h3",{children:"1. Pros/Cons/Justification Elements You Investigated"}),a.jsx("p",{children:"Describe which elements you checked and whether you confirmed or disagreed."}),a.jsxs("div",{className:"code-example",children:[a.jsxs("p",{children:[" Submitter claimed Option A updated file X correctly  ",a.jsx("strong",{children:"Disagreed"}),"; diff shows missing change."]}),a.jsxs("p",{children:[" Submitter stated Option B added redundant logic  ",a.jsx("strong",{children:"Confirmed"}),"."]})]})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("h3",{children:"2. Evals You Disagreed With / Disproved"}),a.jsx("p",{children:"Use this to correct incorrect evaluation results."}),a.jsxs("div",{className:"code-example",children:[a.jsxs("p",{children:[" Eval flagged missing tests, but tests are present  ",a.jsx("strong",{children:"Disproved"}),"."]}),a.jsxs("p",{children:[" Eval passed file-structure check, but file placement is incorrect  ",a.jsx("strong",{children:"Disagreed"}),"."]})]})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("h3",{children:"3. Evals You Agreed With / Were Able to Confirm"}),a.jsx("p",{children:"Indicate which evals are correct and validated."}),a.jsxs("div",{className:"code-example",children:[a.jsxs("p",{children:[" Eval correctly identified missing error handling  ",a.jsx("strong",{children:"Confirmed via diff"}),"."]}),a.jsxs("p",{children:[" Eval flagged incorrect import path  ",a.jsx("strong",{children:"Confirmed"}),"."]})]})]})]}),a.jsxs("section",{className:"guide-section",children:[a.jsx("h2",{className:"section-heading",children:"Rejection Notes (When Applicable)"}),a.jsx("p",{children:"If you choose Reject, you must write clear, constructive notes explaining:"}),a.jsxs("ul",{className:"guide-list",children:[a.jsx("li",{children:"Why the submission cannot be accepted."}),a.jsx("li",{children:"Which specific mistakes or inconsistencies caused the rejection."}),a.jsx("li",{children:"How the submitter can improve in future reviews."})]}),a.jsx("p",{children:a.jsx("em",{children:"This section is visible to the submitter, so keep it professional, precise, and actionable."})}),a.jsxs("div",{className:"info-card",children:[a.jsx("h3",{children:"Examples of acceptable rejection explanations:"}),a.jsxs("div",{className:"code-example",children:[a.jsx("p",{children:" The submission missed core issues in the model's diff, including missing feature implementation and incorrect logic paths."}),a.jsx("p",{children:" Several evals were marked as correct, but investigation showed incorrect conclusions."}),a.jsx("p",{children:" Pros/cons did not match the preference ratings, creating inconsistency in the reasoning."})]})]}),a.jsxs("div",{className:"callout callout-warning",children:[a.jsx("strong",{children:" Clarification on LLM-related issues:"}),a.jsx("p",{children:"If the writing shows clear signs that the submitter did not perform the technical evaluation themselves, you may include this in the Rejection Notes, but only as part of explaining why their reasoning was invalid (e.g., generic, non-technical, or contradictory analysis). You should not diagnose LLM use directlyonly describe observable issues."})]})]}),a.jsxs("section",{className:"guide-section",children:[a.jsx("h2",{className:"section-heading",children:"Final Reviewer Checklist"}),a.jsx("p",{children:"Before submitting your review, ensure you:"}),a.jsxs("ul",{className:"checklist",children:[a.jsx("li",{children:"Investigated at least the most important technical claims."}),a.jsx("li",{children:"Confirmed or disputed evals with evidence."}),a.jsx("li",{children:"Checked alignment between ratings, pros/cons, and justification."}),a.jsx("li",{children:"Provided a clear and defensible Accept/Reject decision."}),a.jsx("li",{children:"Wrote constructive Rejection Notes when rejecting."})]})]})]})}),a.jsx("footer",{className:"guidelines-footer",style:{marginLeft:0},children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}const nl=[{value:"",label:"Contributor",color:"#64748b",desc:"Regular contributor (default)"},{value:"swe",label:"SWE",color:"#2563eb",desc:"Software engineer"},{value:"generalist",label:"Generalist",color:"#7c3aed",desc:"LLM reviewer"}],Ry=[...nl,{value:"admin",label:"Admin",color:"#dc2626",desc:"Full access + user management"}];function XP({onNavigate:t}){const{userRoles:e,hasRole:n,currentUser:r}=Qo(),[i,s]=ee.useState([]),[o,c]=ee.useState(!0),[u,d]=ee.useState(""),[p,m]=ee.useState(""),[y,C]=ee.useState(""),[P,N]=ee.useState(""),[L,S]=ee.useState(""),[w,T]=ee.useState({type:"",text:""}),[j,F]=ee.useState("single");if(!n("admin"))return a.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f1f5f9"},children:a.jsxs("div",{style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[a.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Access Denied"}),a.jsx("p",{children:"You need admin privileges to access this page."})]})});ee.useEffect(()=>{U()},[]);async function U(){try{c(!0);const ne=(await d1(Za(Vr,"whitelist"))).docs.map(ae=>({id:ae.id,email:ae.data().email,role:ae.data().role||""}));s(ne.sort((ae,O)=>ae.email.localeCompare(O.email)))}catch(z){console.error("Failed to fetch users:",z),_("error","Failed to load users")}finally{c(!1)}}function _(z,ne){T({type:z,text:ne}),setTimeout(()=>T({type:"",text:""}),4e3)}async function v(){const z=y.trim().toLowerCase();if(!z)return _("error","Please enter an email");if(!z.includes("@"))return _("error","Invalid email format");if(i.find(ne=>ne.email===z))return _("error","User already exists");try{const ne={email:z};P&&(ne.role=P);const ae=await bP(Za(Vr,"whitelist"),ne);s([...i,{id:ae.id,email:z,role:P}].sort((O,H)=>O.email.localeCompare(H.email))),C(""),_("success",`Added ${z}`)}catch(ne){console.error("Failed to add user:",ne),_("error","Failed to add user")}}async function E(){const z=u.split(/[\n,]/).map(O=>O.trim().toLowerCase()).filter(O=>O&&O.includes("@"));if(z.length===0)return _("error","No valid emails found");const ne=z.filter(O=>i.find(H=>H.email===O)),ae=z.filter(O=>!i.find(H=>H.email===O));if(ae.length===0)return _("error","All emails already exist");try{const O=NP(Vr),H=[];for(const ue of ae){const fe=el(Za(Vr,"whitelist")),Kt={email:ue};p&&(Kt.role=p),O.set(fe,Kt),H.push({id:fe.id,email:ue,role:p})}await O.commit(),s([...i,...H].sort((ue,fe)=>ue.email.localeCompare(fe.email))),d("");const J=ne.length>0?`Added ${ae.length} users (${ne.length} already existed)`:`Added ${ae.length} users`;_("success",J)}catch(O){console.error("Bulk add failed:",O),_("error","Failed to add users")}}async function I(z,ne){if(ne===(r==null?void 0:r.email))return _("error","You can't remove yourself");try{await PP(el(Vr,"whitelist",z)),s(i.filter(ae=>ae.id!==z)),_("success",`Removed ${ne}`)}catch(ae){console.error("Failed to remove user:",ae),_("error","Failed to remove user")}}async function A(z,ne,ae){if(ne===(r==null?void 0:r.email)&&ae!=="admin")return _("error","You can't remove your own admin role");try{const O=el(Vr,"whitelist",z);ae?await Cy(O,{role:ae}):await Cy(O,{role:""}),s(i.map(H=>H.id===z?{...H,role:ae}:H)),_("success",`Updated role for ${ne}`)}catch(O){console.error("Failed to update role:",O),_("error","Failed to update role")}}const k=z=>{const ne=Array.isArray(z)?z[0]||"":z,ae=Ry.find(O=>O.value===ne)||Ry[0];return{backgroundColor:ae.color+"20",color:ae.color,border:`1px solid ${ae.color}40`}},x=z=>Array.isArray(z)?z.length>0?z.join(", "):"Contributor":z||"Contributor",Pe=i.filter(z=>{const ne=L.toLowerCase(),ae=z.email.toLowerCase().includes(ne),H=(Array.isArray(z.role)?z.role.join(" "):z.role||"contributor").toLowerCase().includes(ne);return ae||H});return o?a.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f1f5f9"},children:a.jsx("p",{style:{color:"#64748b"},children:"Loading users..."})}):a.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f1f5f9",padding:"2rem"},children:a.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("button",{onClick:()=>t("home"),style:{background:"none",border:"none",color:"#1e40af",cursor:"pointer",fontSize:"1rem",fontWeight:"500",padding:"0",marginBottom:"1rem"},children:" Back to Home"}),a.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#1e293b"},children:" User Management"}),a.jsx("p",{style:{color:"#64748b",marginTop:"0.25rem"},children:"Add and manage whitelisted users"})]}),w.text&&a.jsx("div",{style:{padding:"1rem",borderRadius:"8px",marginBottom:"1rem",backgroundColor:w.type==="success"?"#dcfce7":"#fee2e2",color:w.type==="success"?"#16a34a":"#dc2626"},children:w.text}),a.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[a.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"1px solid #e2e8f0",paddingBottom:"1rem"},children:[a.jsx("button",{onClick:()=>F("single"),style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"none",cursor:"pointer",fontWeight:"500",backgroundColor:j==="single"?"#1e40af":"#f1f5f9",color:j==="single"?"#fff":"#64748b"},children:" Add Single User"}),a.jsx("button",{onClick:()=>F("bulk"),style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"none",cursor:"pointer",fontWeight:"500",backgroundColor:j==="bulk"?"#1e40af":"#f1f5f9",color:j==="bulk"?"#fff":"#64748b"},children:" Bulk Import"})]}),j==="single"?a.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[a.jsx("input",{type:"email",value:y,onChange:z=>C(z.target.value),placeholder:"email@example.com",style:{flex:"1",minWidth:"200px",padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"0.95rem"},onKeyDown:z=>z.key==="Enter"&&v()}),a.jsx("select",{value:P,onChange:z=>N(z.target.value),style:{padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"0.95rem",minWidth:"140px"},children:nl.map(z=>a.jsx("option",{value:z.value,children:z.label},z.value))}),a.jsx("button",{onClick:v,style:{padding:"0.75rem 1.5rem",backgroundColor:"#1e40af",color:"#fff",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:"Add User"})]}):a.jsxs("div",{children:[a.jsx("p",{style:{color:"#64748b",fontSize:"0.875rem",marginBottom:"0.75rem"},children:"Paste emails separated by commas or new lines"}),a.jsx("textarea",{value:u,onChange:z=>d(z.target.value),placeholder:`user1@example.com
user2@company.com
user3@org.net`,rows:5,style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"0.95rem",resize:"vertical",boxSizing:"border-box",fontFamily:"inherit"}}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"0.75rem",alignItems:"center",flexWrap:"wrap"},children:[a.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:"Assign role:"}),a.jsx("select",{value:p,onChange:z=>m(z.target.value),style:{padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"0.95rem"},children:nl.map(z=>a.jsxs("option",{value:z.value,children:[z.label," - ",z.desc]},z.value))}),a.jsx("button",{onClick:E,style:{padding:"0.75rem 1.5rem",backgroundColor:"#16a34a",color:"#fff",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer",marginLeft:"auto"},children:"Import All"})]})]})]}),a.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("h2",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#1e293b"},children:[" Whitelisted Users (",i.length,")"]}),a.jsx("input",{type:"text",value:L,onChange:z=>S(z.target.value),placeholder:" Search users...",style:{padding:"0.5rem 0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"0.875rem",width:"200px"}})]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{borderBottom:"2px solid #e2e8f0"},children:[a.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"#64748b",fontWeight:"600",fontSize:"0.875rem"},children:"Email"}),a.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"#64748b",fontWeight:"600",fontSize:"0.875rem"},children:"Role"}),a.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"#64748b",fontWeight:"600",fontSize:"0.875rem"},children:"Actions"})]})}),a.jsxs("tbody",{children:[Pe.map(z=>a.jsxs("tr",{style:{borderBottom:"1px solid #f1f5f9"},children:[a.jsxs("td",{style:{padding:"0.75rem",fontSize:"0.95rem",color:"#334155"},children:[z.email,z.email===(r==null?void 0:r.email)&&a.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.75rem",color:"#64748b"},children:"(you)"})]}),a.jsx("td",{style:{padding:"0.75rem"},children:Array.isArray(z.role)?a.jsx("span",{style:{padding:"0.35rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500",...k(z.role)},children:x(z.role)}):a.jsx("select",{value:z.role,onChange:ne=>A(z.id,z.email,ne.target.value),style:{padding:"0.35rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500",cursor:"pointer",...k(z.role)},children:nl.map(ne=>a.jsx("option",{value:ne.value,children:ne.label},ne.value))})}),a.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:a.jsx("button",{onClick:()=>I(z.id,z.email),style:{padding:"0.4rem 0.6rem",backgroundColor:"#fee2e2",color:"#dc2626",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},title:"Remove user",children:" Remove"})})]},z.id)),Pe.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:3,style:{padding:"2rem",textAlign:"center",color:"#94a3b8"},children:L?"No users match your search":"No users added yet"})})]})]})})]})]})})}function JP(){const[t,e]=ee.useState("home"),{currentUser:n,logout:r}=Qo(),i=s=>{e(s)};return n?a.jsxs("div",{className:"app",children:[t==="home"&&a.jsx(BP,{onNavigate:i,onLogout:r}),t==="faq"&&a.jsx(zP,{onNavigate:i}),t==="glossary"&&a.jsx(WP,{onNavigate:i}),t==="overview"&&a.jsx(qP,{onNavigate:i}),t==="prselection"&&a.jsx($P,{onNavigate:i}),t==="promptpreparation"&&a.jsx(HP,{onNavigate:i}),t==="modelworkspace"&&a.jsx(GP,{onNavigate:i}),t==="rulesandrequirements"&&a.jsx(KP,{onNavigate:i}),t==="cli"&&a.jsx(QP,{onNavigate:i}),t==="sweguidelines"&&a.jsx(YP,{onNavigate:i}),t==="adminpanel"&&a.jsx(XP,{onNavigate:i})]}):a.jsx(UP,{onLoginSuccess:()=>e("home")})}function ZP(){return a.jsx(FP,{children:a.jsx(JP,{})})}B_(document.getElementById("root")).render(a.jsx(ee.StrictMode,{children:a.jsx(ZP,{})}));
