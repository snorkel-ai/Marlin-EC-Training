(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var by={exports:{}},Ql={},Py={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=Symbol.for("react.element"),q1=Symbol.for("react.portal"),$1=Symbol.for("react.fragment"),H1=Symbol.for("react.strict_mode"),G1=Symbol.for("react.profiler"),K1=Symbol.for("react.provider"),Q1=Symbol.for("react.context"),Y1=Symbol.for("react.forward_ref"),X1=Symbol.for("react.suspense"),J1=Symbol.for("react.memo"),Z1=Symbol.for("react.lazy"),$p=Symbol.iterator;function ex(t){return t===null||typeof t!="object"?null:(t=$p&&t[$p]||t["@@iterator"],typeof t=="function"?t:null)}var jy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ny=Object.assign,Dy={};function Ji(t,e,n){this.props=t,this.context=e,this.refs=Dy,this.updater=n||jy}Ji.prototype.isReactComponent={};Ji.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ji.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vy(){}Vy.prototype=Ji.prototype;function ad(t,e,n){this.props=t,this.context=e,this.refs=Dy,this.updater=n||jy}var ld=ad.prototype=new Vy;ld.constructor=ad;Ny(ld,Ji.prototype);ld.isPureReactComponent=!0;var Hp=Array.isArray,Ly=Object.prototype.hasOwnProperty,cd={current:null},Oy={key:!0,ref:!0,__self:!0,__source:!0};function My(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ly.call(e,r)&&!Oy.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:jo,type:t,key:s,ref:o,props:i,_owner:cd.current}}function tx(t,e){return{$$typeof:jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ud(t){return typeof t=="object"&&t!==null&&t.$$typeof===jo}function nx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gp=/\/+/g;function ru(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nx(""+t.key):e.toString(36)}function Na(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case jo:case q1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ru(o,0):r,Hp(i)?(n="",t!=null&&(n=t.replace(Gp,"$&/")+"/"),Na(i,e,n,"",function(d){return d})):i!=null&&(ud(i)&&(i=tx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Hp(t))for(var c=0;c<t.length;c++){s=t[c];var u=r+ru(s,c);o+=Na(s,e,n,u,i)}else if(u=ex(t),typeof u=="function")for(t=u.call(t),c=0;!(s=t.next()).done;)s=s.value,u=r+ru(s,c++),o+=Na(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ca(t,e,n){if(t==null)return t;var r=[],i=0;return Na(t,r,"","",function(s){return e.call(n,s,i++)}),r}function rx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ct={current:null},Da={transition:null},ix={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:Da,ReactCurrentOwner:cd};function Fy(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:ca,forEach:function(t,e,n){ca(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ca(t,function(){e++}),e},toArray:function(t){return ca(t,function(e){return e})||[]},only:function(t){if(!ud(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Ji;te.Fragment=$1;te.Profiler=G1;te.PureComponent=ad;te.StrictMode=H1;te.Suspense=X1;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ix;te.act=Fy;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ny({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=cd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Ly.call(e,u)&&!Oy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:jo,type:t.type,key:i,ref:s,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:Q1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:K1,_context:t},t.Consumer=t};te.createElement=My;te.createFactory=function(t){var e=My.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:Y1,render:t}};te.isValidElement=ud;te.lazy=function(t){return{$$typeof:Z1,_payload:{_status:-1,_result:t},_init:rx}};te.memo=function(t,e){return{$$typeof:J1,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Da.transition;Da.transition={};try{t()}finally{Da.transition=e}};te.unstable_act=Fy;te.useCallback=function(t,e){return ct.current.useCallback(t,e)};te.useContext=function(t){return ct.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return ct.current.useDeferredValue(t)};te.useEffect=function(t,e){return ct.current.useEffect(t,e)};te.useId=function(){return ct.current.useId()};te.useImperativeHandle=function(t,e,n){return ct.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return ct.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return ct.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return ct.current.useMemo(t,e)};te.useReducer=function(t,e,n){return ct.current.useReducer(t,e,n)};te.useRef=function(t){return ct.current.useRef(t)};te.useState=function(t){return ct.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return ct.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return ct.current.useTransition()};te.version="18.3.1";Py.exports=te;var ee=Py.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx=ee,ox=Symbol.for("react.element"),ax=Symbol.for("react.fragment"),lx=Object.prototype.hasOwnProperty,cx=sx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ux={key:!0,ref:!0,__self:!0,__source:!0};function Uy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lx.call(e,r)&&!ux.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ox,type:t,key:s,ref:o,props:i,_owner:cx.current}}Ql.Fragment=ax;Ql.jsx=Uy;Ql.jsxs=Uy;by.exports=Ql;var a=by.exports,By={exports:{}},Ct={},zy={exports:{}},Wy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,H){var J=O.length;O.push(H);e:for(;0<J;){var ue=J-1>>>1,fe=O[ue];if(0<i(fe,H))O[ue]=H,O[J]=fe,J=ue;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var H=O[0],J=O.pop();if(J!==H){O[0]=J;e:for(var ue=0,fe=O.length,Kt=fe>>>1;ue<Kt;){var At=2*(ue+1)-1,Cr=O[At],Ot=At+1,Pn=O[Ot];if(0>i(Cr,J))Ot<fe&&0>i(Pn,Cr)?(O[ue]=Pn,O[Ot]=J,ue=Ot):(O[ue]=Cr,O[At]=J,ue=At);else if(Ot<fe&&0>i(Pn,J))O[ue]=Pn,O[Ot]=J,ue=Ot;else break e}}return H}function i(O,H){var J=O.sortIndex-H.sortIndex;return J!==0?J:O.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],p=1,m=null,y=3,R=!1,b=!1,N=!1,L=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(O){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=O)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(d)}}function j(O){if(N=!1,T(O),!b)if(n(u)!==null)b=!0,ne(F);else{var H=n(d);H!==null&&ae(j,H.startTime-O)}}function F(O,H){b=!1,N&&(N=!1,S(v),v=-1),R=!0;var J=y;try{for(T(H),m=n(u);m!==null&&(!(m.expirationTime>H)||O&&!C());){var ue=m.callback;if(typeof ue=="function"){m.callback=null,y=m.priorityLevel;var fe=ue(m.expirationTime<=H);H=t.unstable_now(),typeof fe=="function"?m.callback=fe:m===n(u)&&r(u),T(H)}else r(u);m=n(u)}if(m!==null)var Kt=!0;else{var At=n(d);At!==null&&ae(j,At.startTime-H),Kt=!1}return Kt}finally{m=null,y=J,R=!1}}var U=!1,_=null,v=-1,x=5,I=-1;function C(){return!(t.unstable_now()-I<x)}function k(){if(_!==null){var O=t.unstable_now();I=O;var H=!0;try{H=_(!0,O)}finally{H?E():(U=!1,_=null)}}else U=!1}var E;if(typeof w=="function")E=function(){w(k)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,z=be.port2;be.port1.onmessage=k,E=function(){z.postMessage(null)}}else E=function(){L(k,0)};function ne(O){_=O,U||(U=!0,E())}function ae(O,H){v=L(function(){O(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){b||R||(b=!0,ne(F))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(y){case 1:case 2:case 3:var H=3;break;default:H=y}var J=y;y=H;try{return O()}finally{y=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,H){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var J=y;y=O;try{return H()}finally{y=J}},t.unstable_scheduleCallback=function(O,H,J){var ue=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ue+J:ue):J=ue,O){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=J+fe,O={id:p++,callback:H,priorityLevel:O,startTime:J,expirationTime:fe,sortIndex:-1},J>ue?(O.sortIndex=J,e(d,O),n(u)===null&&O===n(d)&&(N?(S(v),v=-1):N=!0,ae(j,J-ue))):(O.sortIndex=fe,e(u,O),b||R||(b=!0,ne(F))),O},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(O){var H=y;return function(){var J=y;y=H;try{return O.apply(this,arguments)}finally{y=J}}}})(Wy);zy.exports=Wy;var hx=zy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx=ee,St=hx;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qy=new Set,so={};function Zr(t,e){Oi(t,e),Oi(t+"Capture",e)}function Oi(t,e){for(so[t]=e,t=0;t<e.length;t++)qy.add(e[t])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=Object.prototype.hasOwnProperty,fx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kp={},Qp={};function px(t){return Wu.call(Qp,t)?!0:Wu.call(Kp,t)?!1:fx.test(t)?Qp[t]=!0:(Kp[t]=!0,!1)}function mx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gx(t,e,n,r){if(e===null||typeof e>"u"||mx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ke[t]=new ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ke[e]=new ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ke[t]=new ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ke[t]=new ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ke[t]=new ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ke[t]=new ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ke[t]=new ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ke[t]=new ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ke[t]=new ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var hd=/[\-:]([a-z])/g;function dd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hd,dd);Ke[e]=new ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hd,dd);Ke[e]=new ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hd,dd);Ke[e]=new ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ke[t]=new ut(t,1,!1,t.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ke[t]=new ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function fd(t,e,n,r){var i=Ke.hasOwnProperty(e)?Ke[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gx(e,n,i,r)&&(n=null),r||i===null?px(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var An=dx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ua=Symbol.for("react.element"),fi=Symbol.for("react.portal"),pi=Symbol.for("react.fragment"),pd=Symbol.for("react.strict_mode"),qu=Symbol.for("react.profiler"),$y=Symbol.for("react.provider"),Hy=Symbol.for("react.context"),md=Symbol.for("react.forward_ref"),$u=Symbol.for("react.suspense"),Hu=Symbol.for("react.suspense_list"),gd=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),Gy=Symbol.for("react.offscreen"),Yp=Symbol.iterator;function Ss(t){return t===null||typeof t!="object"?null:(t=Yp&&t[Yp]||t["@@iterator"],typeof t=="function"?t:null)}var Te=Object.assign,iu;function Vs(t){if(iu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);iu=e&&e[1]||""}return`
`+iu+t}var su=!1;function ou(t,e){if(!t||su)return"";su=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,c=s.length-1;1<=o&&0<=c&&i[o]!==s[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==s[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==s[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{su=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vs(t):""}function yx(t){switch(t.tag){case 5:return Vs(t.type);case 16:return Vs("Lazy");case 13:return Vs("Suspense");case 19:return Vs("SuspenseList");case 0:case 2:case 15:return t=ou(t.type,!1),t;case 11:return t=ou(t.type.render,!1),t;case 1:return t=ou(t.type,!0),t;default:return""}}function Gu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pi:return"Fragment";case fi:return"Portal";case qu:return"Profiler";case pd:return"StrictMode";case $u:return"Suspense";case Hu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hy:return(t.displayName||"Context")+".Consumer";case $y:return(t._context.displayName||"Context")+".Provider";case md:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gd:return e=t.displayName||null,e!==null?e:Gu(t.type)||"Memo";case Un:e=t._payload,t=t._init;try{return Gu(t(e))}catch{}}return null}function vx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gu(e);case 8:return e===pd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ky(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _x(t){var e=Ky(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ha(t){t._valueTracker||(t._valueTracker=_x(t))}function Qy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ky(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function il(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ku(t,e){var n=e.checked;return Te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Yy(t,e){e=e.checked,e!=null&&fd(t,"checked",e,!1)}function Qu(t,e){Yy(t,e);var n=ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yu(t,e.type,ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yu(t,e,n){(e!=="number"||il(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ls=Array.isArray;function Si(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ur(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Xu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Ls(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ur(n)}}function Xy(t,e){var n=ur(e.value),r=ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function em(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Jy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Jy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var da,Zy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(da=da||document.createElement("div"),da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wx=["Webkit","ms","Moz","O"];Object.keys(qs).forEach(function(t){wx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qs[e]=qs[t]})});function ev(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qs.hasOwnProperty(t)&&qs[t]?(""+e).trim():e+"px"}function tv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ev(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xx=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zu(t,e){if(e){if(xx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function eh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var th=null;function yd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nh=null,Ci=null,Ri=null;function tm(t){if(t=Vo(t)){if(typeof nh!="function")throw Error(M(280));var e=t.stateNode;e&&(e=ec(e),nh(t.stateNode,t.type,e))}}function nv(t){Ci?Ri?Ri.push(t):Ri=[t]:Ci=t}function rv(){if(Ci){var t=Ci,e=Ri;if(Ri=Ci=null,tm(t),e)for(t=0;t<e.length;t++)tm(e[t])}}function iv(t,e){return t(e)}function sv(){}var au=!1;function ov(t,e,n){if(au)return t(e,n);au=!0;try{return iv(t,e,n)}finally{au=!1,(Ci!==null||Ri!==null)&&(sv(),rv())}}function ao(t,e){var n=t.stateNode;if(n===null)return null;var r=ec(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var rh=!1;if(wn)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){rh=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{rh=!1}function Ex(t,e,n,r,i,s,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var $s=!1,sl=null,ol=!1,ih=null,Tx={onError:function(t){$s=!0,sl=t}};function Ix(t,e,n,r,i,s,o,c,u){$s=!1,sl=null,Ex.apply(Tx,arguments)}function Sx(t,e,n,r,i,s,o,c,u){if(Ix.apply(this,arguments),$s){if($s){var d=sl;$s=!1,sl=null}else throw Error(M(198));ol||(ol=!0,ih=d)}}function ei(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function av(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nm(t){if(ei(t)!==t)throw Error(M(188))}function Cx(t){var e=t.alternate;if(!e){if(e=ei(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nm(i),t;if(s===r)return nm(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function lv(t){return t=Cx(t),t!==null?cv(t):null}function cv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cv(t);if(e!==null)return e;t=t.sibling}return null}var uv=St.unstable_scheduleCallback,rm=St.unstable_cancelCallback,Rx=St.unstable_shouldYield,Ax=St.unstable_requestPaint,Ae=St.unstable_now,kx=St.unstable_getCurrentPriorityLevel,vd=St.unstable_ImmediatePriority,hv=St.unstable_UserBlockingPriority,al=St.unstable_NormalPriority,bx=St.unstable_LowPriority,dv=St.unstable_IdlePriority,Yl=null,nn=null;function Px(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Yl,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:Dx,jx=Math.log,Nx=Math.LN2;function Dx(t){return t>>>=0,t===0?32:31-(jx(t)/Nx|0)|0}var fa=64,pa=4194304;function Os(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ll(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=Os(c):(s&=o,s!==0&&(r=Os(s)))}else o=n&~i,o!==0?r=Os(o):s!==0&&(r=Os(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wt(e),i=1<<n,r|=t[n],e&=~i;return r}function Vx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Wt(s),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=Vx(c,e)):u<=e&&(t.expiredLanes|=c),s&=~c}}function sh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fv(){var t=fa;return fa<<=1,!(fa&4194240)&&(fa=64),t}function lu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function No(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wt(e),t[e]=n}function Ox(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function _d(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var he=0;function pv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mv,wd,gv,yv,vv,oh=!1,ma=[],Yn=null,Xn=null,Jn=null,lo=new Map,co=new Map,zn=[],Mx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function im(t,e){switch(t){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":lo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(e.pointerId)}}function Rs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vo(e),e!==null&&wd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Fx(t,e,n,r,i){switch(e){case"focusin":return Yn=Rs(Yn,t,e,n,r,i),!0;case"dragenter":return Xn=Rs(Xn,t,e,n,r,i),!0;case"mouseover":return Jn=Rs(Jn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return lo.set(s,Rs(lo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,co.set(s,Rs(co.get(s)||null,t,e,n,r,i)),!0}return!1}function _v(t){var e=Lr(t.target);if(e!==null){var n=ei(e);if(n!==null){if(e=n.tag,e===13){if(e=av(n),e!==null){t.blockedOn=e,vv(t.priority,function(){gv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Va(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ah(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);th=r,n.target.dispatchEvent(r),th=null}else return e=Vo(n),e!==null&&wd(e),t.blockedOn=n,!1;e.shift()}return!0}function sm(t,e,n){Va(t)&&n.delete(e)}function Ux(){oh=!1,Yn!==null&&Va(Yn)&&(Yn=null),Xn!==null&&Va(Xn)&&(Xn=null),Jn!==null&&Va(Jn)&&(Jn=null),lo.forEach(sm),co.forEach(sm)}function As(t,e){t.blockedOn===e&&(t.blockedOn=null,oh||(oh=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,Ux)))}function uo(t){function e(i){return As(i,t)}if(0<ma.length){As(ma[0],t);for(var n=1;n<ma.length;n++){var r=ma[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yn!==null&&As(Yn,t),Xn!==null&&As(Xn,t),Jn!==null&&As(Jn,t),lo.forEach(e),co.forEach(e),n=0;n<zn.length;n++)r=zn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zn.length&&(n=zn[0],n.blockedOn===null);)_v(n),n.blockedOn===null&&zn.shift()}var Ai=An.ReactCurrentBatchConfig,cl=!0;function Bx(t,e,n,r){var i=he,s=Ai.transition;Ai.transition=null;try{he=1,xd(t,e,n,r)}finally{he=i,Ai.transition=s}}function zx(t,e,n,r){var i=he,s=Ai.transition;Ai.transition=null;try{he=4,xd(t,e,n,r)}finally{he=i,Ai.transition=s}}function xd(t,e,n,r){if(cl){var i=ah(t,e,n,r);if(i===null)vu(t,e,r,ul,n),im(t,r);else if(Fx(i,t,e,n,r))r.stopPropagation();else if(im(t,r),e&4&&-1<Mx.indexOf(t)){for(;i!==null;){var s=Vo(i);if(s!==null&&mv(s),s=ah(t,e,n,r),s===null&&vu(t,e,r,ul,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else vu(t,e,r,null,n)}}var ul=null;function ah(t,e,n,r){if(ul=null,t=yd(r),t=Lr(t),t!==null)if(e=ei(t),e===null)t=null;else if(n=e.tag,n===13){if(t=av(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ul=t,null}function wv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kx()){case vd:return 1;case hv:return 4;case al:case bx:return 16;case dv:return 536870912;default:return 16}default:return 16}}var Gn=null,Ed=null,La=null;function xv(){if(La)return La;var t,e=Ed,n=e.length,r,i="value"in Gn?Gn.value:Gn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return La=i.slice(t,1<r?1-r:void 0)}function Oa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ga(){return!0}function om(){return!1}function Rt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ga:om,this.isPropagationStopped=om,this}return Te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),e}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Td=Rt(Zi),Do=Te({},Zi,{view:0,detail:0}),Wx=Rt(Do),cu,uu,ks,Xl=Te({},Do,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Id,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ks&&(ks&&t.type==="mousemove"?(cu=t.screenX-ks.screenX,uu=t.screenY-ks.screenY):uu=cu=0,ks=t),cu)},movementY:function(t){return"movementY"in t?t.movementY:uu}}),am=Rt(Xl),qx=Te({},Xl,{dataTransfer:0}),$x=Rt(qx),Hx=Te({},Do,{relatedTarget:0}),hu=Rt(Hx),Gx=Te({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Kx=Rt(Gx),Qx=Te({},Zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yx=Rt(Qx),Xx=Te({},Zi,{data:0}),lm=Rt(Xx),Jx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eE[t])?!!e[t]:!1}function Id(){return tE}var nE=Te({},Do,{key:function(t){if(t.key){var e=Jx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Oa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Id,charCode:function(t){return t.type==="keypress"?Oa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rE=Rt(nE),iE=Te({},Xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cm=Rt(iE),sE=Te({},Do,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Id}),oE=Rt(sE),aE=Te({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),lE=Rt(aE),cE=Te({},Xl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uE=Rt(cE),hE=[9,13,27,32],Sd=wn&&"CompositionEvent"in window,Hs=null;wn&&"documentMode"in document&&(Hs=document.documentMode);var dE=wn&&"TextEvent"in window&&!Hs,Ev=wn&&(!Sd||Hs&&8<Hs&&11>=Hs),um=String.fromCharCode(32),hm=!1;function Tv(t,e){switch(t){case"keyup":return hE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mi=!1;function fE(t,e){switch(t){case"compositionend":return Iv(e);case"keypress":return e.which!==32?null:(hm=!0,um);case"textInput":return t=e.data,t===um&&hm?null:t;default:return null}}function pE(t,e){if(mi)return t==="compositionend"||!Sd&&Tv(t,e)?(t=xv(),La=Ed=Gn=null,mi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ev&&e.locale!=="ko"?null:e.data;default:return null}}var mE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mE[t.type]:e==="textarea"}function Sv(t,e,n,r){nv(r),e=hl(e,"onChange"),0<e.length&&(n=new Td("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gs=null,ho=null;function gE(t){Lv(t,0)}function Jl(t){var e=vi(t);if(Qy(e))return t}function yE(t,e){if(t==="change")return e}var Cv=!1;if(wn){var du;if(wn){var fu="oninput"in document;if(!fu){var fm=document.createElement("div");fm.setAttribute("oninput","return;"),fu=typeof fm.oninput=="function"}du=fu}else du=!1;Cv=du&&(!document.documentMode||9<document.documentMode)}function pm(){Gs&&(Gs.detachEvent("onpropertychange",Rv),ho=Gs=null)}function Rv(t){if(t.propertyName==="value"&&Jl(ho)){var e=[];Sv(e,ho,t,yd(t)),ov(gE,e)}}function vE(t,e,n){t==="focusin"?(pm(),Gs=e,ho=n,Gs.attachEvent("onpropertychange",Rv)):t==="focusout"&&pm()}function _E(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jl(ho)}function wE(t,e){if(t==="click")return Jl(e)}function xE(t,e){if(t==="input"||t==="change")return Jl(e)}function EE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:EE;function fo(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Wu.call(e,i)||!Ht(t[i],e[i]))return!1}return!0}function mm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gm(t,e){var n=mm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mm(n)}}function Av(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Av(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kv(){for(var t=window,e=il();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=il(t.document)}return e}function Cd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TE(t){var e=kv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Av(n.ownerDocument.documentElement,n)){if(r!==null&&Cd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=gm(n,s);var o=gm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IE=wn&&"documentMode"in document&&11>=document.documentMode,gi=null,lh=null,Ks=null,ch=!1;function ym(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ch||gi==null||gi!==il(r)||(r=gi,"selectionStart"in r&&Cd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ks&&fo(Ks,r)||(Ks=r,r=hl(lh,"onSelect"),0<r.length&&(e=new Td("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gi)))}function ya(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yi={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},pu={},bv={};wn&&(bv=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function Zl(t){if(pu[t])return pu[t];if(!yi[t])return t;var e=yi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bv)return pu[t]=e[n];return t}var Pv=Zl("animationend"),jv=Zl("animationiteration"),Nv=Zl("animationstart"),Dv=Zl("transitionend"),Vv=new Map,vm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(t,e){Vv.set(t,e),Zr(e,[t])}for(var mu=0;mu<vm.length;mu++){var gu=vm[mu],SE=gu.toLowerCase(),CE=gu[0].toUpperCase()+gu.slice(1);_r(SE,"on"+CE)}_r(Pv,"onAnimationEnd");_r(jv,"onAnimationIteration");_r(Nv,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(Dv,"onTransitionEnd");Oi("onMouseEnter",["mouseout","mouseover"]);Oi("onMouseLeave",["mouseout","mouseover"]);Oi("onPointerEnter",["pointerout","pointerover"]);Oi("onPointerLeave",["pointerout","pointerover"]);Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ms));function _m(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Sx(r,e,void 0,t),t.currentTarget=null}function Lv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==s&&i.isPropagationStopped())break e;_m(i,c,d),s=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==s&&i.isPropagationStopped())break e;_m(i,c,d),s=u}}}if(ol)throw t=ih,ol=!1,ih=null,t}function ye(t,e){var n=e[ph];n===void 0&&(n=e[ph]=new Set);var r=t+"__bubble";n.has(r)||(Ov(e,t,2,!1),n.add(r))}function yu(t,e,n){var r=0;e&&(r|=4),Ov(n,t,r,e)}var va="_reactListening"+Math.random().toString(36).slice(2);function po(t){if(!t[va]){t[va]=!0,qy.forEach(function(n){n!=="selectionchange"&&(RE.has(n)||yu(n,!1,t),yu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[va]||(e[va]=!0,yu("selectionchange",!1,e))}}function Ov(t,e,n,r){switch(wv(e)){case 1:var i=Bx;break;case 4:i=zx;break;default:i=xd}n=i.bind(null,e,n,t),i=void 0,!rh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=Lr(c),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}c=c.parentNode}}r=r.return}ov(function(){var d=s,p=yd(n),m=[];e:{var y=Vv.get(t);if(y!==void 0){var R=Td,b=t;switch(t){case"keypress":if(Oa(n)===0)break e;case"keydown":case"keyup":R=rE;break;case"focusin":b="focus",R=hu;break;case"focusout":b="blur",R=hu;break;case"beforeblur":case"afterblur":R=hu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=am;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=$x;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=oE;break;case Pv:case jv:case Nv:R=Kx;break;case Dv:R=lE;break;case"scroll":R=Wx;break;case"wheel":R=uE;break;case"copy":case"cut":case"paste":R=Yx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=cm}var N=(e&4)!==0,L=!N&&t==="scroll",S=N?y!==null?y+"Capture":null:y;N=[];for(var w=d,T;w!==null;){T=w;var j=T.stateNode;if(T.tag===5&&j!==null&&(T=j,S!==null&&(j=ao(w,S),j!=null&&N.push(mo(w,j,T)))),L)break;w=w.return}0<N.length&&(y=new R(y,b,null,n,p),m.push({event:y,listeners:N}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",y&&n!==th&&(b=n.relatedTarget||n.fromElement)&&(Lr(b)||b[xn]))break e;if((R||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,R?(b=n.relatedTarget||n.toElement,R=d,b=b?Lr(b):null,b!==null&&(L=ei(b),b!==L||b.tag!==5&&b.tag!==6)&&(b=null)):(R=null,b=d),R!==b)){if(N=am,j="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=cm,j="onPointerLeave",S="onPointerEnter",w="pointer"),L=R==null?y:vi(R),T=b==null?y:vi(b),y=new N(j,w+"leave",R,n,p),y.target=L,y.relatedTarget=T,j=null,Lr(p)===d&&(N=new N(S,w+"enter",b,n,p),N.target=T,N.relatedTarget=L,j=N),L=j,R&&b)t:{for(N=R,S=b,w=0,T=N;T;T=ai(T))w++;for(T=0,j=S;j;j=ai(j))T++;for(;0<w-T;)N=ai(N),w--;for(;0<T-w;)S=ai(S),T--;for(;w--;){if(N===S||S!==null&&N===S.alternate)break t;N=ai(N),S=ai(S)}N=null}else N=null;R!==null&&wm(m,y,R,N,!1),b!==null&&L!==null&&wm(m,L,b,N,!0)}}e:{if(y=d?vi(d):window,R=y.nodeName&&y.nodeName.toLowerCase(),R==="select"||R==="input"&&y.type==="file")var F=yE;else if(dm(y))if(Cv)F=xE;else{F=_E;var U=vE}else(R=y.nodeName)&&R.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(F=wE);if(F&&(F=F(t,d))){Sv(m,F,n,p);break e}U&&U(t,y,d),t==="focusout"&&(U=y._wrapperState)&&U.controlled&&y.type==="number"&&Yu(y,"number",y.value)}switch(U=d?vi(d):window,t){case"focusin":(dm(U)||U.contentEditable==="true")&&(gi=U,lh=d,Ks=null);break;case"focusout":Ks=lh=gi=null;break;case"mousedown":ch=!0;break;case"contextmenu":case"mouseup":case"dragend":ch=!1,ym(m,n,p);break;case"selectionchange":if(IE)break;case"keydown":case"keyup":ym(m,n,p)}var _;if(Sd)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else mi?Tv(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Ev&&n.locale!=="ko"&&(mi||v!=="onCompositionStart"?v==="onCompositionEnd"&&mi&&(_=xv()):(Gn=p,Ed="value"in Gn?Gn.value:Gn.textContent,mi=!0)),U=hl(d,v),0<U.length&&(v=new lm(v,t,null,n,p),m.push({event:v,listeners:U}),_?v.data=_:(_=Iv(n),_!==null&&(v.data=_)))),(_=dE?fE(t,n):pE(t,n))&&(d=hl(d,"onBeforeInput"),0<d.length&&(p=new lm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=_))}Lv(m,e)})}function mo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ao(t,n),s!=null&&r.unshift(mo(t,s,i)),s=ao(t,e),s!=null&&r.push(mo(t,s,i))),t=t.return}return r}function ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wm(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=ao(n,s),u!=null&&o.unshift(mo(n,u,c))):i||(u=ao(n,s),u!=null&&o.push(mo(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AE=/\r\n?/g,kE=/\u0000|\uFFFD/g;function xm(t){return(typeof t=="string"?t:""+t).replace(AE,`
`).replace(kE,"")}function _a(t,e,n){if(e=xm(e),xm(t)!==e&&n)throw Error(M(425))}function dl(){}var uh=null,hh=null;function dh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fh=typeof setTimeout=="function"?setTimeout:void 0,bE=typeof clearTimeout=="function"?clearTimeout:void 0,Em=typeof Promise=="function"?Promise:void 0,PE=typeof queueMicrotask=="function"?queueMicrotask:typeof Em<"u"?function(t){return Em.resolve(null).then(t).catch(jE)}:fh;function jE(t){setTimeout(function(){throw t})}function _u(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),uo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);uo(e)}function Zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var es=Math.random().toString(36).slice(2),tn="__reactFiber$"+es,go="__reactProps$"+es,xn="__reactContainer$"+es,ph="__reactEvents$"+es,NE="__reactListeners$"+es,DE="__reactHandles$"+es;function Lr(t){var e=t[tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xn]||n[tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tm(t);t!==null;){if(n=t[tn])return n;t=Tm(t)}return e}t=n,n=t.parentNode}return null}function Vo(t){return t=t[tn]||t[xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function ec(t){return t[go]||null}var mh=[],_i=-1;function wr(t){return{current:t}}function _e(t){0>_i||(t.current=mh[_i],mh[_i]=null,_i--)}function me(t,e){_i++,mh[_i]=t.current,t.current=e}var hr={},rt=wr(hr),mt=wr(!1),Wr=hr;function Mi(t,e){var n=t.type.contextTypes;if(!n)return hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function gt(t){return t=t.childContextTypes,t!=null}function fl(){_e(mt),_e(rt)}function Im(t,e,n){if(rt.current!==hr)throw Error(M(168));me(rt,e),me(mt,n)}function Mv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,vx(t)||"Unknown",i));return Te({},n,r)}function pl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Wr=rt.current,me(rt,t),me(mt,mt.current),!0}function Sm(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=Mv(t,e,Wr),r.__reactInternalMemoizedMergedChildContext=t,_e(mt),_e(rt),me(rt,t)):_e(mt),me(mt,n)}var dn=null,tc=!1,wu=!1;function Fv(t){dn===null?dn=[t]:dn.push(t)}function VE(t){tc=!0,Fv(t)}function xr(){if(!wu&&dn!==null){wu=!0;var t=0,e=he;try{var n=dn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}dn=null,tc=!1}catch(i){throw dn!==null&&(dn=dn.slice(t+1)),uv(vd,xr),i}finally{he=e,wu=!1}}return null}var wi=[],xi=0,ml=null,gl=0,kt=[],bt=0,qr=null,pn=1,mn="";function jr(t,e){wi[xi++]=gl,wi[xi++]=ml,ml=t,gl=e}function Uv(t,e,n){kt[bt++]=pn,kt[bt++]=mn,kt[bt++]=qr,qr=t;var r=pn;t=mn;var i=32-Wt(r)-1;r&=~(1<<i),n+=1;var s=32-Wt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,pn=1<<32-Wt(e)+i|n<<i|r,mn=s+t}else pn=1<<s|n<<i|r,mn=t}function Rd(t){t.return!==null&&(jr(t,1),Uv(t,1,0))}function Ad(t){for(;t===ml;)ml=wi[--xi],wi[xi]=null,gl=wi[--xi],wi[xi]=null;for(;t===qr;)qr=kt[--bt],kt[bt]=null,mn=kt[--bt],kt[bt]=null,pn=kt[--bt],kt[bt]=null}var It=null,Et=null,we=!1,Bt=null;function Bv(t,e){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Cm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,It=t,Et=Zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,It=t,Et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qr!==null?{id:pn,overflow:mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,It=t,Et=null,!0):!1;default:return!1}}function gh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yh(t){if(we){var e=Et;if(e){var n=e;if(!Cm(t,e)){if(gh(t))throw Error(M(418));e=Zn(n.nextSibling);var r=It;e&&Cm(t,e)?Bv(r,n):(t.flags=t.flags&-4097|2,we=!1,It=t)}}else{if(gh(t))throw Error(M(418));t.flags=t.flags&-4097|2,we=!1,It=t}}}function Rm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function wa(t){if(t!==It)return!1;if(!we)return Rm(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dh(t.type,t.memoizedProps)),e&&(e=Et)){if(gh(t))throw zv(),Error(M(418));for(;e;)Bv(t,e),e=Zn(e.nextSibling)}if(Rm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Et=Zn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Et=null}}else Et=It?Zn(t.stateNode.nextSibling):null;return!0}function zv(){for(var t=Et;t;)t=Zn(t.nextSibling)}function Fi(){Et=It=null,we=!1}function kd(t){Bt===null?Bt=[t]:Bt.push(t)}var LE=An.ReactCurrentBatchConfig;function bs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var c=i.refs;o===null?delete c[s]:c[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function xa(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Am(t){var e=t._init;return e(t._payload)}function Wv(t){function e(S,w){if(t){var T=S.deletions;T===null?(S.deletions=[w],S.flags|=16):T.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function i(S,w){return S=rr(S,w),S.index=0,S.sibling=null,S}function s(S,w,T){return S.index=T,t?(T=S.alternate,T!==null?(T=T.index,T<w?(S.flags|=2,w):T):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,w,T,j){return w===null||w.tag!==6?(w=Ru(T,S.mode,j),w.return=S,w):(w=i(w,T),w.return=S,w)}function u(S,w,T,j){var F=T.type;return F===pi?p(S,w,T.props.children,j,T.key):w!==null&&(w.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Un&&Am(F)===w.type)?(j=i(w,T.props),j.ref=bs(S,w,T),j.return=S,j):(j=qa(T.type,T.key,T.props,null,S.mode,j),j.ref=bs(S,w,T),j.return=S,j)}function d(S,w,T,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=Au(T,S.mode,j),w.return=S,w):(w=i(w,T.children||[]),w.return=S,w)}function p(S,w,T,j,F){return w===null||w.tag!==7?(w=zr(T,S.mode,j,F),w.return=S,w):(w=i(w,T),w.return=S,w)}function m(S,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ru(""+w,S.mode,T),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ua:return T=qa(w.type,w.key,w.props,null,S.mode,T),T.ref=bs(S,null,w),T.return=S,T;case fi:return w=Au(w,S.mode,T),w.return=S,w;case Un:var j=w._init;return m(S,j(w._payload),T)}if(Ls(w)||Ss(w))return w=zr(w,S.mode,T,null),w.return=S,w;xa(S,w)}return null}function y(S,w,T,j){var F=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return F!==null?null:c(S,w,""+T,j);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ua:return T.key===F?u(S,w,T,j):null;case fi:return T.key===F?d(S,w,T,j):null;case Un:return F=T._init,y(S,w,F(T._payload),j)}if(Ls(T)||Ss(T))return F!==null?null:p(S,w,T,j,null);xa(S,T)}return null}function R(S,w,T,j,F){if(typeof j=="string"&&j!==""||typeof j=="number")return S=S.get(T)||null,c(w,S,""+j,F);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ua:return S=S.get(j.key===null?T:j.key)||null,u(w,S,j,F);case fi:return S=S.get(j.key===null?T:j.key)||null,d(w,S,j,F);case Un:var U=j._init;return R(S,w,T,U(j._payload),F)}if(Ls(j)||Ss(j))return S=S.get(T)||null,p(w,S,j,F,null);xa(w,j)}return null}function b(S,w,T,j){for(var F=null,U=null,_=w,v=w=0,x=null;_!==null&&v<T.length;v++){_.index>v?(x=_,_=null):x=_.sibling;var I=y(S,_,T[v],j);if(I===null){_===null&&(_=x);break}t&&_&&I.alternate===null&&e(S,_),w=s(I,w,v),U===null?F=I:U.sibling=I,U=I,_=x}if(v===T.length)return n(S,_),we&&jr(S,v),F;if(_===null){for(;v<T.length;v++)_=m(S,T[v],j),_!==null&&(w=s(_,w,v),U===null?F=_:U.sibling=_,U=_);return we&&jr(S,v),F}for(_=r(S,_);v<T.length;v++)x=R(_,S,v,T[v],j),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?v:x.key),w=s(x,w,v),U===null?F=x:U.sibling=x,U=x);return t&&_.forEach(function(C){return e(S,C)}),we&&jr(S,v),F}function N(S,w,T,j){var F=Ss(T);if(typeof F!="function")throw Error(M(150));if(T=F.call(T),T==null)throw Error(M(151));for(var U=F=null,_=w,v=w=0,x=null,I=T.next();_!==null&&!I.done;v++,I=T.next()){_.index>v?(x=_,_=null):x=_.sibling;var C=y(S,_,I.value,j);if(C===null){_===null&&(_=x);break}t&&_&&C.alternate===null&&e(S,_),w=s(C,w,v),U===null?F=C:U.sibling=C,U=C,_=x}if(I.done)return n(S,_),we&&jr(S,v),F;if(_===null){for(;!I.done;v++,I=T.next())I=m(S,I.value,j),I!==null&&(w=s(I,w,v),U===null?F=I:U.sibling=I,U=I);return we&&jr(S,v),F}for(_=r(S,_);!I.done;v++,I=T.next())I=R(_,S,v,I.value,j),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?v:I.key),w=s(I,w,v),U===null?F=I:U.sibling=I,U=I);return t&&_.forEach(function(k){return e(S,k)}),we&&jr(S,v),F}function L(S,w,T,j){if(typeof T=="object"&&T!==null&&T.type===pi&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ua:e:{for(var F=T.key,U=w;U!==null;){if(U.key===F){if(F=T.type,F===pi){if(U.tag===7){n(S,U.sibling),w=i(U,T.props.children),w.return=S,S=w;break e}}else if(U.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Un&&Am(F)===U.type){n(S,U.sibling),w=i(U,T.props),w.ref=bs(S,U,T),w.return=S,S=w;break e}n(S,U);break}else e(S,U);U=U.sibling}T.type===pi?(w=zr(T.props.children,S.mode,j,T.key),w.return=S,S=w):(j=qa(T.type,T.key,T.props,null,S.mode,j),j.ref=bs(S,w,T),j.return=S,S=j)}return o(S);case fi:e:{for(U=T.key;w!==null;){if(w.key===U)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(S,w.sibling),w=i(w,T.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=Au(T,S.mode,j),w.return=S,S=w}return o(S);case Un:return U=T._init,L(S,w,U(T._payload),j)}if(Ls(T))return b(S,w,T,j);if(Ss(T))return N(S,w,T,j);xa(S,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(S,w.sibling),w=i(w,T),w.return=S,S=w):(n(S,w),w=Ru(T,S.mode,j),w.return=S,S=w),o(S)):n(S,w)}return L}var Ui=Wv(!0),qv=Wv(!1),yl=wr(null),vl=null,Ei=null,bd=null;function Pd(){bd=Ei=vl=null}function jd(t){var e=yl.current;_e(yl),t._currentValue=e}function vh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ki(t,e){vl=t,bd=Ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pt=!0),t.firstContext=null)}function Dt(t){var e=t._currentValue;if(bd!==t)if(t={context:t,memoizedValue:e,next:null},Ei===null){if(vl===null)throw Error(M(308));Ei=t,vl.dependencies={lanes:0,firstContext:t}}else Ei=Ei.next=t;return e}var Or=null;function Nd(t){Or===null?Or=[t]:Or.push(t)}function $v(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Nd(e)):(n.next=i.next,i.next=n),e.interleaved=n,En(t,r)}function En(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bn=!1;function Dd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,En(t,n)}return i=r.interleaved,i===null?(e.next=e,Nd(r)):(e.next=i.next,i.next=e),r.interleaved=e,En(t,n)}function Ma(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_d(t,n)}}function km(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _l(t,e,n,r){var i=t.updateQueue;Bn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,p=d=u=null,c=s;do{var y=c.lane,R=c.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:R,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=t,N=c;switch(y=e,R=n,N.tag){case 1:if(b=N.payload,typeof b=="function"){m=b.call(R,m,y);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,y=typeof b=="function"?b.call(R,m,y):b,y==null)break e;m=Te({},m,y);break e;case 2:Bn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[c]:y.push(c))}else R={eventTime:R,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=R,u=m):p=p.next=R,o|=y;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;y=c,c=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(1);if(p===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Hr|=o,t.lanes=o,t.memoizedState=m}}function bm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var Lo={},rn=wr(Lo),yo=wr(Lo),vo=wr(Lo);function Mr(t){if(t===Lo)throw Error(M(174));return t}function Vd(t,e){switch(me(vo,e),me(yo,t),me(rn,Lo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ju(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ju(e,t)}_e(rn),me(rn,e)}function Bi(){_e(rn),_e(yo),_e(vo)}function Gv(t){Mr(vo.current);var e=Mr(rn.current),n=Ju(e,t.type);e!==n&&(me(yo,t),me(rn,n))}function Ld(t){yo.current===t&&(_e(rn),_e(yo))}var xe=wr(0);function wl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xu=[];function Od(){for(var t=0;t<xu.length;t++)xu[t]._workInProgressVersionPrimary=null;xu.length=0}var Fa=An.ReactCurrentDispatcher,Eu=An.ReactCurrentBatchConfig,$r=0,Ee=null,Le=null,ze=null,xl=!1,Qs=!1,_o=0,OE=0;function Xe(){throw Error(M(321))}function Md(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function Fd(t,e,n,r,i,s){if($r=s,Ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fa.current=t===null||t.memoizedState===null?BE:zE,t=n(r,i),Qs){s=0;do{if(Qs=!1,_o=0,25<=s)throw Error(M(301));s+=1,ze=Le=null,e.updateQueue=null,Fa.current=WE,t=n(r,i)}while(Qs)}if(Fa.current=El,e=Le!==null&&Le.next!==null,$r=0,ze=Le=Ee=null,xl=!1,e)throw Error(M(300));return t}function Ud(){var t=_o!==0;return _o=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Ee.memoizedState=ze=t:ze=ze.next=t,ze}function Vt(){if(Le===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=ze===null?Ee.memoizedState:ze.next;if(e!==null)ze=e,Le=t;else{if(t===null)throw Error(M(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},ze===null?Ee.memoizedState=ze=t:ze=ze.next=t}return ze}function wo(t,e){return typeof e=="function"?e(t):e}function Tu(t){var e=Vt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=Le,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=o=null,u=null,d=s;do{var p=d.lane;if(($r&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,Ee.lanes|=p,Hr|=p}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=c,Ht(r,e.memoizedState)||(pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ee.lanes|=s,Hr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Iu(t){var e=Vt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ht(s,e.memoizedState)||(pt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Kv(){}function Qv(t,e){var n=Ee,r=Vt(),i=e(),s=!Ht(r.memoizedState,i);if(s&&(r.memoizedState=i,pt=!0),r=r.queue,Bd(Jv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,xo(9,Xv.bind(null,n,r,i,e),void 0,null),We===null)throw Error(M(349));$r&30||Yv(n,e,i)}return i}function Yv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Xv(t,e,n,r){e.value=n,e.getSnapshot=r,Zv(e)&&e0(t)}function Jv(t,e,n){return n(function(){Zv(e)&&e0(t)})}function Zv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function e0(t){var e=En(t,1);e!==null&&qt(e,t,1,-1)}function Pm(t){var e=Zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:t},e.queue=t,t=t.dispatch=UE.bind(null,Ee,t),[e.memoizedState,t]}function xo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function t0(){return Vt().memoizedState}function Ua(t,e,n,r){var i=Zt();Ee.flags|=t,i.memoizedState=xo(1|e,n,void 0,r===void 0?null:r)}function nc(t,e,n,r){var i=Vt();r=r===void 0?null:r;var s=void 0;if(Le!==null){var o=Le.memoizedState;if(s=o.destroy,r!==null&&Md(r,o.deps)){i.memoizedState=xo(e,n,s,r);return}}Ee.flags|=t,i.memoizedState=xo(1|e,n,s,r)}function jm(t,e){return Ua(8390656,8,t,e)}function Bd(t,e){return nc(2048,8,t,e)}function n0(t,e){return nc(4,2,t,e)}function r0(t,e){return nc(4,4,t,e)}function i0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function s0(t,e,n){return n=n!=null?n.concat([t]):null,nc(4,4,i0.bind(null,e,t),n)}function zd(){}function o0(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Md(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function a0(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Md(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function l0(t,e,n){return $r&21?(Ht(n,e)||(n=fv(),Ee.lanes|=n,Hr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pt=!0),t.memoizedState=n)}function ME(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=Eu.transition;Eu.transition={};try{t(!1),e()}finally{he=n,Eu.transition=r}}function c0(){return Vt().memoizedState}function FE(t,e,n){var r=nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},u0(t))h0(e,n);else if(n=$v(t,e,n,r),n!==null){var i=lt();qt(n,t,r,i),d0(n,e,r)}}function UE(t,e,n){var r=nr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(u0(t))h0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,c=s(o,n);if(i.hasEagerState=!0,i.eagerState=c,Ht(c,o)){var u=e.interleaved;u===null?(i.next=i,Nd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=$v(t,e,i,r),n!==null&&(i=lt(),qt(n,t,r,i),d0(n,e,r))}}function u0(t){var e=t.alternate;return t===Ee||e!==null&&e===Ee}function h0(t,e){Qs=xl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function d0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_d(t,n)}}var El={readContext:Dt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},BE={readContext:Dt,useCallback:function(t,e){return Zt().memoizedState=[t,e===void 0?null:e],t},useContext:Dt,useEffect:jm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ua(4194308,4,i0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ua(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ua(4,2,t,e)},useMemo:function(t,e){var n=Zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FE.bind(null,Ee,t),[r.memoizedState,t]},useRef:function(t){var e=Zt();return t={current:t},e.memoizedState=t},useState:Pm,useDebugValue:zd,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=Pm(!1),e=t[0];return t=ME.bind(null,t[1]),Zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ee,i=Zt();if(we){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),We===null)throw Error(M(349));$r&30||Yv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,jm(Jv.bind(null,r,s,t),[t]),r.flags|=2048,xo(9,Xv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zt(),e=We.identifierPrefix;if(we){var n=mn,r=pn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=OE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zE={readContext:Dt,useCallback:o0,useContext:Dt,useEffect:Bd,useImperativeHandle:s0,useInsertionEffect:n0,useLayoutEffect:r0,useMemo:a0,useReducer:Tu,useRef:t0,useState:function(){return Tu(wo)},useDebugValue:zd,useDeferredValue:function(t){var e=Vt();return l0(e,Le.memoizedState,t)},useTransition:function(){var t=Tu(wo)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:Kv,useSyncExternalStore:Qv,useId:c0,unstable_isNewReconciler:!1},WE={readContext:Dt,useCallback:o0,useContext:Dt,useEffect:Bd,useImperativeHandle:s0,useInsertionEffect:n0,useLayoutEffect:r0,useMemo:a0,useReducer:Iu,useRef:t0,useState:function(){return Iu(wo)},useDebugValue:zd,useDeferredValue:function(t){var e=Vt();return Le===null?e.memoizedState=t:l0(e,Le.memoizedState,t)},useTransition:function(){var t=Iu(wo)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:Kv,useSyncExternalStore:Qv,useId:c0,unstable_isNewReconciler:!1};function Ft(t,e){if(t&&t.defaultProps){e=Te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _h(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rc={isMounted:function(t){return(t=t._reactInternals)?ei(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lt(),i=nr(t),s=vn(r,i);s.payload=e,n!=null&&(s.callback=n),e=er(t,s,i),e!==null&&(qt(e,t,i,r),Ma(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lt(),i=nr(t),s=vn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=er(t,s,i),e!==null&&(qt(e,t,i,r),Ma(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lt(),r=nr(t),i=vn(n,r);i.tag=2,e!=null&&(i.callback=e),e=er(t,i,r),e!==null&&(qt(e,t,r,n),Ma(e,t,r))}};function Nm(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!fo(n,r)||!fo(i,s):!0}function f0(t,e,n){var r=!1,i=hr,s=e.contextType;return typeof s=="object"&&s!==null?s=Dt(s):(i=gt(e)?Wr:rt.current,r=e.contextTypes,s=(r=r!=null)?Mi(t,i):hr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Dm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rc.enqueueReplaceState(e,e.state,null)}function wh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Dd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Dt(s):(s=gt(e)?Wr:rt.current,i.context=Mi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_h(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&rc.enqueueReplaceState(i,i.state,null),_l(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zi(t,e){try{var n="",r=e;do n+=yx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Su(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qE=typeof WeakMap=="function"?WeakMap:Map;function p0(t,e,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Il||(Il=!0,Ph=r),xh(t,e)},n}function m0(t,e,n){n=vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){xh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){xh(t,e),typeof r!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Vm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=iT.bind(null,t,e,n),e.then(t,t))}function Lm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Om(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vn(-1,1),e.tag=2,er(n,e,1))),n.lanes|=1),t)}var $E=An.ReactCurrentOwner,pt=!1;function at(t,e,n,r){e.child=t===null?qv(e,null,n,r):Ui(e,t.child,n,r)}function Mm(t,e,n,r,i){n=n.render;var s=e.ref;return ki(e,i),r=Fd(t,e,n,r,s,i),n=Ud(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tn(t,e,i)):(we&&n&&Rd(e),e.flags|=1,at(t,e,r,i),e.child)}function Fm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Yd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,g0(t,e,s,r,i)):(t=qa(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fo,n(o,r)&&t.ref===e.ref)return Tn(t,e,i)}return e.flags|=1,t=rr(s,r),t.ref=e.ref,t.return=e,e.child=t}function g0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(fo(s,r)&&t.ref===e.ref)if(pt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(pt=!0);else return e.lanes=t.lanes,Tn(t,e,i)}return Eh(t,e,n,r,i)}function y0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Ii,wt),wt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(Ii,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,me(Ii,wt),wt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,me(Ii,wt),wt|=r;return at(t,e,i,n),e.child}function v0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Eh(t,e,n,r,i){var s=gt(n)?Wr:rt.current;return s=Mi(e,s),ki(e,i),n=Fd(t,e,n,r,s,i),r=Ud(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tn(t,e,i)):(we&&r&&Rd(e),e.flags|=1,at(t,e,n,i),e.child)}function Um(t,e,n,r,i){if(gt(n)){var s=!0;pl(e)}else s=!1;if(ki(e,i),e.stateNode===null)Ba(t,e),f0(e,n,r),wh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Dt(d):(d=gt(n)?Wr:rt.current,d=Mi(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Dm(e,o,r,d),Bn=!1;var y=e.memoizedState;o.state=y,_l(e,r,o,i),u=e.memoizedState,c!==r||y!==u||mt.current||Bn?(typeof p=="function"&&(_h(e,n,p,r),u=e.memoizedState),(c=Bn||Nm(e,n,c,r,y,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Hv(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Ft(e.type,c),o.props=d,m=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Dt(u):(u=gt(n)?Wr:rt.current,u=Mi(e,u));var R=n.getDerivedStateFromProps;(p=typeof R=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||y!==u)&&Dm(e,o,r,u),Bn=!1,y=e.memoizedState,o.state=y,_l(e,r,o,i);var b=e.memoizedState;c!==m||y!==b||mt.current||Bn?(typeof R=="function"&&(_h(e,n,R,r),b=e.memoizedState),(d=Bn||Nm(e,n,d,r,y,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Th(t,e,n,r,s,i)}function Th(t,e,n,r,i,s){v0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Sm(e,n,!1),Tn(t,e,s);r=e.stateNode,$E.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ui(e,t.child,null,s),e.child=Ui(e,null,c,s)):at(t,e,c,s),e.memoizedState=r.state,i&&Sm(e,n,!0),e.child}function _0(t){var e=t.stateNode;e.pendingContext?Im(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Im(t,e.context,!1),Vd(t,e.containerInfo)}function Bm(t,e,n,r,i){return Fi(),kd(i),e.flags|=256,at(t,e,n,r),e.child}var Ih={dehydrated:null,treeContext:null,retryLane:0};function Sh(t){return{baseLanes:t,cachePool:null,transitions:null}}function w0(t,e,n){var r=e.pendingProps,i=xe.current,s=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),me(xe,i&1),t===null)return yh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=oc(o,r,0,null),t=zr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Sh(n),e.memoizedState=Ih,t):Wd(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return HE(t,e,o,r,c,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=rr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=rr(c,s):(s=zr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Sh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ih,r}return s=t.child,t=s.sibling,r=rr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wd(t,e){return e=oc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ea(t,e,n,r){return r!==null&&kd(r),Ui(e,t.child,null,n),t=Wd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Su(Error(M(422))),Ea(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=oc({mode:"visible",children:r.children},i,0,null),s=zr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ui(e,t.child,null,o),e.child.memoizedState=Sh(o),e.memoizedState=Ih,s);if(!(e.mode&1))return Ea(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(M(419)),r=Su(s,r,void 0),Ea(t,e,o,r)}if(c=(o&t.childLanes)!==0,pt||c){if(r=We,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,En(t,i),qt(r,t,i,-1))}return Qd(),r=Su(Error(M(421))),Ea(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Et=Zn(i.nextSibling),It=e,we=!0,Bt=null,t!==null&&(kt[bt++]=pn,kt[bt++]=mn,kt[bt++]=qr,pn=t.id,mn=t.overflow,qr=e),e=Wd(e,r.children),e.flags|=4096,e)}function zm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vh(t.return,e,n)}function Cu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function x0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(at(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zm(t,n,e);else if(t.tag===19)zm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(xe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&wl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cu(e,!0,n,null,s);break;case"together":Cu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ba(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GE(t,e,n){switch(e.tag){case 3:_0(e),Fi();break;case 5:Gv(e);break;case 1:gt(e.type)&&pl(e);break;case 4:Vd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;me(yl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?w0(t,e,n):(me(xe,xe.current&1),t=Tn(t,e,n),t!==null?t.sibling:null);me(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return x0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),me(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,y0(t,e,n)}return Tn(t,e,n)}var E0,Ch,T0,I0;E0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ch=function(){};T0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Mr(rn.current);var s=null;switch(n){case"input":i=Ku(t,i),r=Ku(t,r),s=[];break;case"select":i=Te({},i,{value:void 0}),r=Te({},r,{value:void 0}),s=[];break;case"textarea":i=Xu(t,i),r=Xu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dl)}Zu(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(so.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(so.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ye("scroll",t),s||c===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};I0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ps(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KE(t,e,n){var r=e.pendingProps;switch(Ad(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return gt(e.type)&&fl(),Je(e),null;case 3:return r=e.stateNode,Bi(),_e(mt),_e(rt),Od(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bt!==null&&(Dh(Bt),Bt=null))),Ch(t,e),Je(e),null;case 5:Ld(e);var i=Mr(vo.current);if(n=e.type,t!==null&&e.stateNode!=null)T0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Je(e),null}if(t=Mr(rn.current),wa(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[tn]=e,r[go]=s,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(i=0;i<Ms.length;i++)ye(Ms[i],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":Xp(r,s),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ye("invalid",r);break;case"textarea":Zp(r,s),ye("invalid",r)}Zu(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&_a(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&_a(r.textContent,c,t),i=["children",""+c]):so.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ye("scroll",r)}switch(n){case"input":ha(r),Jp(r,s,!0);break;case"textarea":ha(r),em(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=dl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tn]=e,t[go]=r,E0(t,e,!1,!1),e.stateNode=t;e:{switch(o=eh(n,r),n){case"dialog":ye("cancel",t),ye("close",t),i=r;break;case"iframe":case"object":case"embed":ye("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ms.length;i++)ye(Ms[i],t);i=r;break;case"source":ye("error",t),i=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),i=r;break;case"details":ye("toggle",t),i=r;break;case"input":Xp(t,r),i=Ku(t,r),ye("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Te({},r,{value:void 0}),ye("invalid",t);break;case"textarea":Zp(t,r),i=Xu(t,r),ye("invalid",t);break;default:i=r}Zu(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var u=c[s];s==="style"?tv(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Zy(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&oo(t,u):typeof u=="number"&&oo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(so.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ye("scroll",t):u!=null&&fd(t,s,u,o))}switch(n){case"input":ha(t),Jp(t,r,!1);break;case"textarea":ha(t),em(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ur(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Si(t,!!r.multiple,s,!1):r.defaultValue!=null&&Si(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Je(e),null;case 6:if(t&&e.stateNode!=null)I0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=Mr(vo.current),Mr(rn.current),wa(e)){if(r=e.stateNode,n=e.memoizedProps,r[tn]=e,(s=r.nodeValue!==n)&&(t=It,t!==null))switch(t.tag){case 3:_a(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_a(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=e,e.stateNode=r}return Je(e),null;case 13:if(_e(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&Et!==null&&e.mode&1&&!(e.flags&128))zv(),Fi(),e.flags|=98560,s=!1;else if(s=wa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[tn]=e}else Fi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),s=!1}else Bt!==null&&(Dh(Bt),Bt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Oe===0&&(Oe=3):Qd())),e.updateQueue!==null&&(e.flags|=4),Je(e),null);case 4:return Bi(),Ch(t,e),t===null&&po(e.stateNode.containerInfo),Je(e),null;case 10:return jd(e.type._context),Je(e),null;case 17:return gt(e.type)&&fl(),Je(e),null;case 19:if(_e(xe),s=e.memoizedState,s===null)return Je(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ps(s,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wl(t),o!==null){for(e.flags|=128,Ps(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(xe,xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ae()>Wi&&(e.flags|=128,r=!0,Ps(s,!1),e.lanes=4194304)}else{if(!r)if(t=wl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ps(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!we)return Je(e),null}else 2*Ae()-s.renderingStartTime>Wi&&n!==1073741824&&(e.flags|=128,r=!0,Ps(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ae(),e.sibling=null,n=xe.current,me(xe,r?n&1|2:n&1),e):(Je(e),null);case 22:case 23:return Kd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function QE(t,e){switch(Ad(e),e.tag){case 1:return gt(e.type)&&fl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bi(),_e(mt),_e(rt),Od(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ld(e),null;case 13:if(_e(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Fi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(xe),null;case 4:return Bi(),null;case 10:return jd(e.type._context),null;case 22:case 23:return Kd(),null;case 24:return null;default:return null}}var Ta=!1,tt=!1,YE=typeof WeakSet=="function"?WeakSet:Set,$=null;function Ti(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function Rh(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var Wm=!1;function XE(t,e){if(uh=cl,t=kv(),Cd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,p=0,m=t,y=null;t:for(;;){for(var R;m!==n||i!==0&&m.nodeType!==3||(c=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(R=m.firstChild)!==null;)y=m,m=R;for(;;){if(m===t)break t;if(y===n&&++d===i&&(c=o),y===s&&++p===r&&(u=o),(R=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=R}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(hh={focusedElem:t,selectionRange:n},cl=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,L=b.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?N:Ft(e.type,N),L);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(j){Ce(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return b=Wm,Wm=!1,b}function Ys(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Rh(e,n,s)}i=i.next}while(i!==r)}}function ic(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ah(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function S0(t){var e=t.alternate;e!==null&&(t.alternate=null,S0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tn],delete e[go],delete e[ph],delete e[NE],delete e[DE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function C0(t){return t.tag===5||t.tag===3||t.tag===4}function qm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||C0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dl));else if(r!==4&&(t=t.child,t!==null))for(kh(t,e,n),t=t.sibling;t!==null;)kh(t,e,n),t=t.sibling}function bh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bh(t,e,n),t=t.sibling;t!==null;)bh(t,e,n),t=t.sibling}var qe=null,Ut=!1;function Mn(t,e,n){for(n=n.child;n!==null;)R0(t,e,n),n=n.sibling}function R0(t,e,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Yl,n)}catch{}switch(n.tag){case 5:tt||Ti(n,e);case 6:var r=qe,i=Ut;qe=null,Mn(t,e,n),qe=r,Ut=i,qe!==null&&(Ut?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Ut?(t=qe,n=n.stateNode,t.nodeType===8?_u(t.parentNode,n):t.nodeType===1&&_u(t,n),uo(t)):_u(qe,n.stateNode));break;case 4:r=qe,i=Ut,qe=n.stateNode.containerInfo,Ut=!0,Mn(t,e,n),qe=r,Ut=i;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Rh(n,e,o),i=i.next}while(i!==r)}Mn(t,e,n);break;case 1:if(!tt&&(Ti(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ce(n,e,c)}Mn(t,e,n);break;case 21:Mn(t,e,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,Mn(t,e,n),tt=r):Mn(t,e,n);break;default:Mn(t,e,n)}}function $m(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YE),e.forEach(function(r){var i=oT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:qe=c.stateNode,Ut=!1;break e;case 3:qe=c.stateNode.containerInfo,Ut=!0;break e;case 4:qe=c.stateNode.containerInfo,Ut=!0;break e}c=c.return}if(qe===null)throw Error(M(160));R0(s,o,i),qe=null,Ut=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Ce(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)A0(e,t),e=e.sibling}function A0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),Xt(t),r&4){try{Ys(3,t,t.return),ic(3,t)}catch(N){Ce(t,t.return,N)}try{Ys(5,t,t.return)}catch(N){Ce(t,t.return,N)}}break;case 1:Mt(e,t),Xt(t),r&512&&n!==null&&Ti(n,n.return);break;case 5:if(Mt(e,t),Xt(t),r&512&&n!==null&&Ti(n,n.return),t.flags&32){var i=t.stateNode;try{oo(i,"")}catch(N){Ce(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&Yy(i,s),eh(c,o);var d=eh(c,s);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?tv(i,m):p==="dangerouslySetInnerHTML"?Zy(i,m):p==="children"?oo(i,m):fd(i,p,m,d)}switch(c){case"input":Qu(i,s);break;case"textarea":Xy(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var R=s.value;R!=null?Si(i,!!s.multiple,R,!1):y!==!!s.multiple&&(s.defaultValue!=null?Si(i,!!s.multiple,s.defaultValue,!0):Si(i,!!s.multiple,s.multiple?[]:"",!1))}i[go]=s}catch(N){Ce(t,t.return,N)}}break;case 6:if(Mt(e,t),Xt(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){Ce(t,t.return,N)}}break;case 3:if(Mt(e,t),Xt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uo(e.containerInfo)}catch(N){Ce(t,t.return,N)}break;case 4:Mt(e,t),Xt(t);break;case 13:Mt(e,t),Xt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Hd=Ae())),r&4&&$m(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(tt=(d=tt)||p,Mt(e,t),tt=d):Mt(e,t),Xt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for($=t,p=t.child;p!==null;){for(m=$=p;$!==null;){switch(y=$,R=y.child,y.tag){case 0:case 11:case 14:case 15:Ys(4,y,y.return);break;case 1:Ti(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){Ce(r,n,N)}}break;case 5:Ti(y,y.return);break;case 22:if(y.memoizedState!==null){Gm(m);continue}}R!==null?(R.return=y,$=R):Gm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=ev("display",o))}catch(N){Ce(t,t.return,N)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(N){Ce(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Mt(e,t),Xt(t),r&4&&$m(t);break;case 21:break;default:Mt(e,t),Xt(t)}}function Xt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(C0(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(oo(i,""),r.flags&=-33);var s=qm(t);bh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=qm(t);kh(t,c,o);break;default:throw Error(M(161))}}catch(u){Ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JE(t,e,n){$=t,k0(t)}function k0(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ta;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||tt;c=Ta;var d=tt;if(Ta=o,(tt=u)&&!d)for($=i;$!==null;)o=$,u=o.child,o.tag===22&&o.memoizedState!==null?Km(i):u!==null?(u.return=o,$=u):Km(i);for(;s!==null;)$=s,k0(s),s=s.sibling;$=i,Ta=c,tt=d}Hm(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):Hm(t)}}function Hm(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tt||ic(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ft(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bm(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&uo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}tt||e.flags&512&&Ah(e)}catch(y){Ce(e,e.return,y)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Gm(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Km(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ic(4,e)}catch(u){Ce(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ce(e,i,u)}}var s=e.return;try{Ah(e)}catch(u){Ce(e,s,u)}break;case 5:var o=e.return;try{Ah(e)}catch(u){Ce(e,o,u)}}}catch(u){Ce(e,e.return,u)}if(e===t){$=null;break}var c=e.sibling;if(c!==null){c.return=e.return,$=c;break}$=e.return}}var ZE=Math.ceil,Tl=An.ReactCurrentDispatcher,qd=An.ReactCurrentOwner,Nt=An.ReactCurrentBatchConfig,le=0,We=null,je=null,Ge=0,wt=0,Ii=wr(0),Oe=0,Eo=null,Hr=0,sc=0,$d=0,Xs=null,dt=null,Hd=0,Wi=1/0,hn=null,Il=!1,Ph=null,tr=null,Ia=!1,Kn=null,Sl=0,Js=0,jh=null,za=-1,Wa=0;function lt(){return le&6?Ae():za!==-1?za:za=Ae()}function nr(t){return t.mode&1?le&2&&Ge!==0?Ge&-Ge:LE.transition!==null?(Wa===0&&(Wa=fv()),Wa):(t=he,t!==0||(t=window.event,t=t===void 0?16:wv(t.type)),t):1}function qt(t,e,n,r){if(50<Js)throw Js=0,jh=null,Error(M(185));No(t,n,r),(!(le&2)||t!==We)&&(t===We&&(!(le&2)&&(sc|=n),Oe===4&&Wn(t,Ge)),yt(t,r),n===1&&le===0&&!(e.mode&1)&&(Wi=Ae()+500,tc&&xr()))}function yt(t,e){var n=t.callbackNode;Lx(t,e);var r=ll(t,t===We?Ge:0);if(r===0)n!==null&&rm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rm(n),e===1)t.tag===0?VE(Qm.bind(null,t)):Fv(Qm.bind(null,t)),PE(function(){!(le&6)&&xr()}),n=null;else{switch(pv(r)){case 1:n=vd;break;case 4:n=hv;break;case 16:n=al;break;case 536870912:n=dv;break;default:n=al}n=O0(n,b0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function b0(t,e){if(za=-1,Wa=0,le&6)throw Error(M(327));var n=t.callbackNode;if(bi()&&t.callbackNode!==n)return null;var r=ll(t,t===We?Ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cl(t,r);else{e=r;var i=le;le|=2;var s=j0();(We!==t||Ge!==e)&&(hn=null,Wi=Ae()+500,Br(t,e));do try{nT();break}catch(c){P0(t,c)}while(1);Pd(),Tl.current=s,le=i,je!==null?e=0:(We=null,Ge=0,e=Oe)}if(e!==0){if(e===2&&(i=sh(t),i!==0&&(r=i,e=Nh(t,i))),e===1)throw n=Eo,Br(t,0),Wn(t,r),yt(t,Ae()),n;if(e===6)Wn(t,r);else{if(i=t.current.alternate,!(r&30)&&!eT(i)&&(e=Cl(t,r),e===2&&(s=sh(t),s!==0&&(r=s,e=Nh(t,s))),e===1))throw n=Eo,Br(t,0),Wn(t,r),yt(t,Ae()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Nr(t,dt,hn);break;case 3:if(Wn(t,r),(r&130023424)===r&&(e=Hd+500-Ae(),10<e)){if(ll(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){lt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=fh(Nr.bind(null,t,dt,hn),e);break}Nr(t,dt,hn);break;case 4:if(Wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Wt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZE(r/1960))-r,10<r){t.timeoutHandle=fh(Nr.bind(null,t,dt,hn),r);break}Nr(t,dt,hn);break;case 5:Nr(t,dt,hn);break;default:throw Error(M(329))}}}return yt(t,Ae()),t.callbackNode===n?b0.bind(null,t):null}function Nh(t,e){var n=Xs;return t.current.memoizedState.isDehydrated&&(Br(t,e).flags|=256),t=Cl(t,e),t!==2&&(e=dt,dt=n,e!==null&&Dh(e)),t}function Dh(t){dt===null?dt=t:dt.push.apply(dt,t)}function eT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ht(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wn(t,e){for(e&=~$d,e&=~sc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wt(e),r=1<<n;t[n]=-1,e&=~r}}function Qm(t){if(le&6)throw Error(M(327));bi();var e=ll(t,0);if(!(e&1))return yt(t,Ae()),null;var n=Cl(t,e);if(t.tag!==0&&n===2){var r=sh(t);r!==0&&(e=r,n=Nh(t,r))}if(n===1)throw n=Eo,Br(t,0),Wn(t,e),yt(t,Ae()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nr(t,dt,hn),yt(t,Ae()),null}function Gd(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Wi=Ae()+500,tc&&xr())}}function Gr(t){Kn!==null&&Kn.tag===0&&!(le&6)&&bi();var e=le;le|=1;var n=Nt.transition,r=he;try{if(Nt.transition=null,he=1,t)return t()}finally{he=r,Nt.transition=n,le=e,!(le&6)&&xr()}}function Kd(){wt=Ii.current,_e(Ii)}function Br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bE(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Ad(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fl();break;case 3:Bi(),_e(mt),_e(rt),Od();break;case 5:Ld(r);break;case 4:Bi();break;case 13:_e(xe);break;case 19:_e(xe);break;case 10:jd(r.type._context);break;case 22:case 23:Kd()}n=n.return}if(We=t,je=t=rr(t.current,null),Ge=wt=e,Oe=0,Eo=null,$d=sc=Hr=0,dt=Xs=null,Or!==null){for(e=0;e<Or.length;e++)if(n=Or[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Or=null}return t}function P0(t,e){do{var n=je;try{if(Pd(),Fa.current=El,xl){for(var r=Ee.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xl=!1}if($r=0,ze=Le=Ee=null,Qs=!1,_o=0,qd.current=null,n===null||n.return===null){Oe=1,Eo=e,je=null;break}e:{var s=t,o=n.return,c=n,u=e;if(e=Ge,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=c,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var R=Lm(o);if(R!==null){R.flags&=-257,Om(R,o,c,s,e),R.mode&1&&Vm(s,d,e),e=R,u=d;var b=e.updateQueue;if(b===null){var N=new Set;N.add(u),e.updateQueue=N}else b.add(u);break e}else{if(!(e&1)){Vm(s,d,e),Qd();break e}u=Error(M(426))}}else if(we&&c.mode&1){var L=Lm(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Om(L,o,c,s,e),kd(zi(u,c));break e}}s=u=zi(u,c),Oe!==4&&(Oe=2),Xs===null?Xs=[s]:Xs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=p0(s,u,e);km(s,S);break e;case 1:c=u;var w=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(tr===null||!tr.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=m0(s,c,e);km(s,j);break e}}s=s.return}while(s!==null)}D0(n)}catch(F){e=F,je===n&&n!==null&&(je=n=n.return);continue}break}while(1)}function j0(){var t=Tl.current;return Tl.current=El,t===null?El:t}function Qd(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),We===null||!(Hr&268435455)&&!(sc&268435455)||Wn(We,Ge)}function Cl(t,e){var n=le;le|=2;var r=j0();(We!==t||Ge!==e)&&(hn=null,Br(t,e));do try{tT();break}catch(i){P0(t,i)}while(1);if(Pd(),le=n,Tl.current=r,je!==null)throw Error(M(261));return We=null,Ge=0,Oe}function tT(){for(;je!==null;)N0(je)}function nT(){for(;je!==null&&!Rx();)N0(je)}function N0(t){var e=L0(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?D0(t):je=e,qd.current=null}function D0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QE(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,je=null;return}}else if(n=KE(n,e,wt),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Oe===0&&(Oe=5)}function Nr(t,e,n){var r=he,i=Nt.transition;try{Nt.transition=null,he=1,rT(t,e,n,r)}finally{Nt.transition=i,he=r}return null}function rT(t,e,n,r){do bi();while(Kn!==null);if(le&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Ox(t,s),t===We&&(je=We=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ia||(Ia=!0,O0(al,function(){return bi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nt.transition,Nt.transition=null;var o=he;he=1;var c=le;le|=4,qd.current=null,XE(t,n),A0(n,t),TE(hh),cl=!!uh,hh=uh=null,t.current=n,JE(n),Ax(),le=c,he=o,Nt.transition=s}else t.current=n;if(Ia&&(Ia=!1,Kn=t,Sl=i),s=t.pendingLanes,s===0&&(tr=null),Px(n.stateNode),yt(t,Ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Il)throw Il=!1,t=Ph,Ph=null,t;return Sl&1&&t.tag!==0&&bi(),s=t.pendingLanes,s&1?t===jh?Js++:(Js=0,jh=t):Js=0,xr(),null}function bi(){if(Kn!==null){var t=pv(Sl),e=Nt.transition,n=he;try{if(Nt.transition=null,he=16>t?16:t,Kn===null)var r=!1;else{if(t=Kn,Kn=null,Sl=0,le&6)throw Error(M(331));var i=le;for(le|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var c=s.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for($=d;$!==null;){var p=$;switch(p.tag){case 0:case 11:case 15:Ys(8,p,s)}var m=p.child;if(m!==null)m.return=p,$=m;else for(;$!==null;){p=$;var y=p.sibling,R=p.return;if(S0(p),p===d){$=null;break}if(y!==null){y.return=R,$=y;break}$=R}}}var b=s.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var L=N.sibling;N.sibling=null,N=L}while(N!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ys(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,$=S;break e}$=s.return}}var w=t.current;for($=w;$!==null;){o=$;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,$=T;else e:for(o=w;$!==null;){if(c=$,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(F){Ce(c,c.return,F)}if(c===o){$=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,$=j;break e}$=c.return}}if(le=i,xr(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Yl,t)}catch{}r=!0}return r}finally{he=n,Nt.transition=e}}return!1}function Ym(t,e,n){e=zi(n,e),e=p0(t,e,1),t=er(t,e,1),e=lt(),t!==null&&(No(t,1,e),yt(t,e))}function Ce(t,e,n){if(t.tag===3)Ym(t,t,n);else for(;e!==null;){if(e.tag===3){Ym(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tr===null||!tr.has(r))){t=zi(n,t),t=m0(e,t,1),e=er(e,t,1),t=lt(),e!==null&&(No(e,1,t),yt(e,t));break}}e=e.return}}function iT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=lt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Ge&n)===n&&(Oe===4||Oe===3&&(Ge&130023424)===Ge&&500>Ae()-Hd?Br(t,0):$d|=n),yt(t,e)}function V0(t,e){e===0&&(t.mode&1?(e=pa,pa<<=1,!(pa&130023424)&&(pa=4194304)):e=1);var n=lt();t=En(t,e),t!==null&&(No(t,e,n),yt(t,n))}function sT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),V0(t,n)}function oT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),V0(t,n)}var L0;L0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mt.current)pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pt=!1,GE(t,e,n);pt=!!(t.flags&131072)}else pt=!1,we&&e.flags&1048576&&Uv(e,gl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ba(t,e),t=e.pendingProps;var i=Mi(e,rt.current);ki(e,n),i=Fd(null,e,r,t,i,n);var s=Ud();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gt(r)?(s=!0,pl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Dd(e),i.updater=rc,e.stateNode=i,i._reactInternals=e,wh(e,r,t,n),e=Th(null,e,r,!0,s,n)):(e.tag=0,we&&s&&Rd(e),at(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ba(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=lT(r),t=Ft(r,t),i){case 0:e=Eh(null,e,r,t,n);break e;case 1:e=Um(null,e,r,t,n);break e;case 11:e=Mm(null,e,r,t,n);break e;case 14:e=Fm(null,e,r,Ft(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Eh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Um(t,e,r,i,n);case 3:e:{if(_0(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Hv(t,e),_l(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zi(Error(M(423)),e),e=Bm(t,e,r,n,i);break e}else if(r!==i){i=zi(Error(M(424)),e),e=Bm(t,e,r,n,i);break e}else for(Et=Zn(e.stateNode.containerInfo.firstChild),It=e,we=!0,Bt=null,n=qv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fi(),r===i){e=Tn(t,e,n);break e}at(t,e,r,n)}e=e.child}return e;case 5:return Gv(e),t===null&&yh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,dh(r,i)?o=null:s!==null&&dh(r,s)&&(e.flags|=32),v0(t,e),at(t,e,o,n),e.child;case 6:return t===null&&yh(e),null;case 13:return w0(t,e,n);case 4:return Vd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ui(e,null,r,n):at(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Mm(t,e,r,i,n);case 7:return at(t,e,e.pendingProps,n),e.child;case 8:return at(t,e,e.pendingProps.children,n),e.child;case 12:return at(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,me(yl,r._currentValue),r._currentValue=o,s!==null)if(Ht(s.value,o)){if(s.children===i.children&&!mt.current){e=Tn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=vn(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),vh(s.return,n,e),c.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(M(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),vh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}at(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ki(e,n),i=Dt(i),r=r(i),e.flags|=1,at(t,e,r,n),e.child;case 14:return r=e.type,i=Ft(r,e.pendingProps),i=Ft(r.type,i),Fm(t,e,r,i,n);case 15:return g0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Ba(t,e),e.tag=1,gt(r)?(t=!0,pl(e)):t=!1,ki(e,n),f0(e,r,i),wh(e,r,i,n),Th(null,e,r,!0,t,n);case 19:return x0(t,e,n);case 22:return y0(t,e,n)}throw Error(M(156,e.tag))};function O0(t,e){return uv(t,e)}function aT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(t,e,n,r){return new aT(t,e,n,r)}function Yd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lT(t){if(typeof t=="function")return Yd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===md)return 11;if(t===gd)return 14}return 2}function rr(t,e){var n=t.alternate;return n===null?(n=jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qa(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Yd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pi:return zr(n.children,i,s,e);case pd:o=8,i|=8;break;case qu:return t=jt(12,n,e,i|2),t.elementType=qu,t.lanes=s,t;case $u:return t=jt(13,n,e,i),t.elementType=$u,t.lanes=s,t;case Hu:return t=jt(19,n,e,i),t.elementType=Hu,t.lanes=s,t;case Gy:return oc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $y:o=10;break e;case Hy:o=9;break e;case md:o=11;break e;case gd:o=14;break e;case Un:o=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=jt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zr(t,e,n,r){return t=jt(7,t,r,e),t.lanes=n,t}function oc(t,e,n,r){return t=jt(22,t,r,e),t.elementType=Gy,t.lanes=n,t.stateNode={isHidden:!1},t}function Ru(t,e,n){return t=jt(6,t,null,e),t.lanes=n,t}function Au(t,e,n){return e=jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lu(0),this.expirationTimes=lu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xd(t,e,n,r,i,s,o,c,u){return t=new cT(t,e,n,c,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=jt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dd(s),t}function uT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function M0(t){if(!t)return hr;t=t._reactInternals;e:{if(ei(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(gt(n))return Mv(t,n,e)}return e}function F0(t,e,n,r,i,s,o,c,u){return t=Xd(n,r,!0,t,i,s,o,c,u),t.context=M0(null),n=t.current,r=lt(),i=nr(n),s=vn(r,i),s.callback=e??null,er(n,s,i),t.current.lanes=i,No(t,i,r),yt(t,r),t}function ac(t,e,n,r){var i=e.current,s=lt(),o=nr(i);return n=M0(n),e.context===null?e.context=n:e.pendingContext=n,e=vn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=er(i,e,o),t!==null&&(qt(t,i,o,s),Ma(t,i,o)),o}function Rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jd(t,e){Xm(t,e),(t=t.alternate)&&Xm(t,e)}function hT(){return null}var U0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zd(t){this._internalRoot=t}lc.prototype.render=Zd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));ac(t,e,null,null)};lc.prototype.unmount=Zd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gr(function(){ac(null,t,null,null)}),e[xn]=null}};function lc(t){this._internalRoot=t}lc.prototype.unstable_scheduleHydration=function(t){if(t){var e=yv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zn.length&&e!==0&&e<zn[n].priority;n++);zn.splice(n,0,t),n===0&&_v(t)}};function ef(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jm(){}function dT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Rl(o);s.call(d)}}var o=F0(e,r,t,0,null,!1,!1,"",Jm);return t._reactRootContainer=o,t[xn]=o.current,po(t.nodeType===8?t.parentNode:t),Gr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=Rl(u);c.call(d)}}var u=Xd(t,0,!1,null,null,!1,!1,"",Jm);return t._reactRootContainer=u,t[xn]=u.current,po(t.nodeType===8?t.parentNode:t),Gr(function(){ac(e,u,n,r)}),u}function uc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var c=i;i=function(){var u=Rl(o);c.call(u)}}ac(e,o,t,i)}else o=dT(n,e,t,i,r);return Rl(o)}mv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Os(e.pendingLanes);n!==0&&(_d(e,n|1),yt(e,Ae()),!(le&6)&&(Wi=Ae()+500,xr()))}break;case 13:Gr(function(){var r=En(t,1);if(r!==null){var i=lt();qt(r,t,1,i)}}),Jd(t,1)}};wd=function(t){if(t.tag===13){var e=En(t,134217728);if(e!==null){var n=lt();qt(e,t,134217728,n)}Jd(t,134217728)}};gv=function(t){if(t.tag===13){var e=nr(t),n=En(t,e);if(n!==null){var r=lt();qt(n,t,e,r)}Jd(t,e)}};yv=function(){return he};vv=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};nh=function(t,e,n){switch(e){case"input":if(Qu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ec(r);if(!i)throw Error(M(90));Qy(r),Qu(r,i)}}}break;case"textarea":Xy(t,n);break;case"select":e=n.value,e!=null&&Si(t,!!n.multiple,e,!1)}};iv=Gd;sv=Gr;var fT={usingClientEntryPoint:!1,Events:[Vo,vi,ec,nv,rv,Gd]},js={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pT={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lv(t),t===null?null:t.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||hT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sa.isDisabled&&Sa.supportsFiber)try{Yl=Sa.inject(pT),nn=Sa}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fT;Ct.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ef(e))throw Error(M(200));return uT(t,e,null,n)};Ct.createRoot=function(t,e){if(!ef(t))throw Error(M(299));var n=!1,r="",i=U0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xd(t,1,!1,null,null,n,!1,r,i),t[xn]=e.current,po(t.nodeType===8?t.parentNode:t),new Zd(e)};Ct.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=lv(e),t=t===null?null:t.stateNode,t};Ct.flushSync=function(t){return Gr(t)};Ct.hydrate=function(t,e,n){if(!cc(e))throw Error(M(200));return uc(null,t,e,!0,n)};Ct.hydrateRoot=function(t,e,n){if(!ef(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=U0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=F0(e,null,t,1,n??null,i,!1,s,o),t[xn]=e.current,po(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new lc(e)};Ct.render=function(t,e,n){if(!cc(e))throw Error(M(200));return uc(null,t,e,!1,n)};Ct.unmountComponentAtNode=function(t){if(!cc(t))throw Error(M(40));return t._reactRootContainer?(Gr(function(){uc(null,null,t,!1,function(){t._reactRootContainer=null,t[xn]=null})}),!0):!1};Ct.unstable_batchedUpdates=Gd;Ct.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cc(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return uc(t,e,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function B0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B0)}catch(t){console.error(t)}}B0(),By.exports=Ct;var mT=By.exports,z0,Zm=mT;z0=Zm.createRoot,Zm.hydrateRoot;const gT=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,p=s>>2,m=(s&3)<<4|c>>4;let y=(c&15)<<2|d>>6,R=d&63;u||(R=64,o||(y=64)),r.push(n[p],n[m],n[y],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(W0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||m==null)throw new vT;const y=s<<2|c>>4;if(r.push(y),d!==64){const R=c<<4&240|d>>2;if(r.push(R),m!==64){const b=d<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _T=function(t){const e=W0(t);return q0.encodeByteArray(e,!0)},Al=function(t){return _T(t).replace(/\./g,"")},$0=function(t){try{return q0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=()=>wT().__FIREBASE_DEFAULTS__,ET=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$0(t[1]);return e&&JSON.parse(e)},hc=()=>{try{return gT()||xT()||ET()||TT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},H0=t=>{var e,n;return(n=(e=hc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},IT=t=>{const e=H0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},G0=()=>{var t;return(t=hc())==null?void 0:t.config},K0=t=>{var e;return(e=hc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Q0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},c="";return[Al(JSON.stringify(n)),Al(JSON.stringify(o)),c].join(".")}const Zs={};function RT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zs))Zs[e]?t.emulator.push(e):t.prod.push(e);return t}function AT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let eg=!1;function Y0(t,e){if(typeof window>"u"||typeof document>"u"||!ts(window.location.host)||Zs[t]===e||Zs[t]||eg)return;Zs[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",s=RT().prod.length>0;function o(){const y=document.getElementById(r);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,R){y.setAttribute("width","24"),y.setAttribute("id",R),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{eg=!0,o()},y}function p(y,R){y.setAttribute("id",R),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){const y=AT(r),R=n("text"),b=document.getElementById(R)||document.createElement("span"),N=n("learnmore"),L=document.getElementById(N)||document.createElement("a"),S=n("preprendIcon"),w=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const T=y.element;c(T),p(L,N);const j=d();u(w,S),T.append(w,b,L,j),document.body.appendChild(T)}s?(b.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function bT(){var e;const t=(e=hc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function NT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DT(){const t=it();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function VT(){return!bT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LT(){try{return typeof indexedDB=="object"}catch{return!1}}function OT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="FirebaseError";class kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MT,Object.setPrototypeOf(this,kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oo.prototype.create)}}class Oo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?FT(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new kn(i,c,r)}}function FT(t,e){return t.replace(UT,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const UT=/\{\$([^}]+)}/g;function BT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(tg(s)&&tg(o)){if(!Kr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fs(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Us(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function zT(t,e){const n=new WT(t,e);return n.subscribe.bind(n)}class WT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qT(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ku),i.error===void 0&&(i.error=ku),i.complete===void 0&&(i.complete=ku);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ku(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t){return t&&t._delegate?t._delegate:t}class Qr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ST;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GT(e))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dr){return this.instances.has(e)}getOptions(e=Dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dr){return this.component?this.component.multipleInstances?e:Dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HT(t){return t===Dr?void 0:t}function GT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $T(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const QT={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},YT=re.INFO,XT={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},JT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=XT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tf{constructor(e){this.name=e,this._logLevel=YT,this._logHandler=JT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const ZT=(t,e)=>e.some(n=>t instanceof n);let ng,rg;function eI(){return ng||(ng=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tI(){return rg||(rg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X0=new WeakMap,Vh=new WeakMap,J0=new WeakMap,bu=new WeakMap,nf=new WeakMap;function nI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ir(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&X0.set(n,t)}).catch(()=>{}),nf.set(e,t),e}function rI(t){if(Vh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Vh.set(t,e)}let Lh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||J0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iI(t){Lh=t(Lh)}function sI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pu(this),e,...n);return J0.set(r,e.sort?e.sort():[e]),ir(r)}:tI().includes(t)?function(...e){return t.apply(Pu(this),e),ir(X0.get(this))}:function(...e){return ir(t.apply(Pu(this),e))}}function oI(t){return typeof t=="function"?sI(t):(t instanceof IDBTransaction&&rI(t),ZT(t,eI())?new Proxy(t,Lh):t)}function ir(t){if(t instanceof IDBRequest)return nI(t);if(bu.has(t))return bu.get(t);const e=oI(t);return e!==t&&(bu.set(t,e),nf.set(e,t)),e}const Pu=t=>nf.get(t);function aI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),c=ir(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ir(o.result),u.oldVersion,u.newVersion,ir(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const lI=["get","getKey","getAll","getAllKeys","count"],cI=["put","add","delete","clear"],ju=new Map;function ig(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ju.get(e))return ju.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=cI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lI.includes(n)))return;const s=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return ju.set(e,s),s}iI(t=>({...t,get:(e,n,r)=>ig(e,n)||t.get(e,n,r),has:(e,n)=>!!ig(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Oh="@firebase/app",sg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new tf("@firebase/app"),dI="@firebase/app-compat",fI="@firebase/analytics-compat",pI="@firebase/analytics",mI="@firebase/app-check-compat",gI="@firebase/app-check",yI="@firebase/auth",vI="@firebase/auth-compat",_I="@firebase/database",wI="@firebase/data-connect",xI="@firebase/database-compat",EI="@firebase/functions",TI="@firebase/functions-compat",II="@firebase/installations",SI="@firebase/installations-compat",CI="@firebase/messaging",RI="@firebase/messaging-compat",AI="@firebase/performance",kI="@firebase/performance-compat",bI="@firebase/remote-config",PI="@firebase/remote-config-compat",jI="@firebase/storage",NI="@firebase/storage-compat",DI="@firebase/firestore",VI="@firebase/ai",LI="@firebase/firestore-compat",OI="firebase",MI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="[DEFAULT]",FI={[Oh]:"fire-core",[dI]:"fire-core-compat",[pI]:"fire-analytics",[fI]:"fire-analytics-compat",[gI]:"fire-app-check",[mI]:"fire-app-check-compat",[yI]:"fire-auth",[vI]:"fire-auth-compat",[_I]:"fire-rtdb",[wI]:"fire-data-connect",[xI]:"fire-rtdb-compat",[EI]:"fire-fn",[TI]:"fire-fn-compat",[II]:"fire-iid",[SI]:"fire-iid-compat",[CI]:"fire-fcm",[RI]:"fire-fcm-compat",[AI]:"fire-perf",[kI]:"fire-perf-compat",[bI]:"fire-rc",[PI]:"fire-rc-compat",[jI]:"fire-gcs",[NI]:"fire-gcs-compat",[DI]:"fire-fst",[LI]:"fire-fst-compat",[VI]:"fire-vertex","fire-js":"fire-js",[OI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new Map,UI=new Map,Fh=new Map;function og(t,e){try{t.container.addComponent(e)}catch(n){In.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qi(t){const e=t.name;if(Fh.has(e))return In.debug(`There were multiple attempts to register component ${e}.`),!1;Fh.set(e,t);for(const n of kl.values())og(n,t);for(const n of UI.values())og(n,t);return!0}function rf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new Oo("app","Firebase",BI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=MI;function Z0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Mh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw sr.create("bad-app-name",{appName:String(i)});if(n||(n=G0()),!n)throw sr.create("no-options");const s=kl.get(i);if(s){if(Kr(n,s.options)&&Kr(r,s.config))return s;throw sr.create("duplicate-app",{appName:i})}const o=new KT(i);for(const u of Fh.values())o.addComponent(u);const c=new zI(n,r,o);return kl.set(i,c),c}function e_(t=Mh){const e=kl.get(t);if(!e&&t===Mh&&G0())return Z0();if(!e)throw sr.create("no-app",{appName:t});return e}function or(t,e,n){let r=FI[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),In.warn(o.join(" "));return}qi(new Qr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="firebase-heartbeat-database",qI=1,To="firebase-heartbeat-store";let Nu=null;function t_(){return Nu||(Nu=aI(WI,qI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(To)}catch(n){console.warn(n)}}}}).catch(t=>{throw sr.create("idb-open",{originalErrorMessage:t.message})})),Nu}async function $I(t){try{const n=(await t_()).transaction(To),r=await n.objectStore(To).get(n_(t));return await n.done,r}catch(e){if(e instanceof kn)In.warn(e.message);else{const n=sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});In.warn(n.message)}}}async function ag(t,e){try{const r=(await t_()).transaction(To,"readwrite");await r.objectStore(To).put(e,n_(t)),await r.done}catch(n){if(n instanceof kn)In.warn(n.message);else{const r=sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});In.warn(r.message)}}}function n_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=1024,GI=30;class KI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>GI){const o=XI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){In.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lg(),{heartbeatsToSend:r,unsentEntries:i}=QI(this._heartbeatsCache.heartbeats),s=Al(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return In.warn(n),""}}}function lg(){return new Date().toISOString().substring(0,10)}function QI(t,e=HI){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class YI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LT()?OT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $I(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ag(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ag(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function cg(t){return Al(JSON.stringify({version:2,heartbeats:t})).length}function XI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t){qi(new Qr("platform-logger",e=>new uI(e),"PRIVATE")),qi(new Qr("heartbeat",e=>new KI(e),"PRIVATE")),or(Oh,sg,t),or(Oh,sg,"esm2020"),or("fire-js","")}JI("");function r_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZI=r_,i_=new Oo("auth","Firebase",r_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=new tf("@firebase/auth");function eS(t,...e){bl.logLevel<=re.WARN&&bl.warn(`Auth (${ns}): ${t}`,...e)}function $a(t,...e){bl.logLevel<=re.ERROR&&bl.error(`Auth (${ns}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t,...e){throw of(t,...e)}function $t(t,...e){return of(t,...e)}function sf(t,e,n){const r={...ZI(),[e]:n};return new Oo("auth","Firebase",r).create(e,{appName:t.name})}function _n(t){return sf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lt(t,"argument-error"),sf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function of(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return i_.create(t,...e)}function G(t,e,...n){if(!t)throw of(e,...n)}function gn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $a(e),new Error(e)}function Sn(t,e){t||gn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function nS(){return ug()==="http:"||ug()==="https:"}function ug(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nS()||jT()||"connection"in navigator)?navigator.onLine:!0}function iS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sn(n>e,"Short delay should be less than long delay!"),this.isMobile=kT()||NT()}get(){return rS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t,e){Sn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aS=new Fo(3e4,6e4);function Er(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function bn(t,e,n,r,i={}){return o_(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const c=Mo({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...s};return PT()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ts(t.emulatorConfig.host)&&(d.credentials="include"),s_.fetch()(await a_(t,t.config.apiHost,n,c),d)})}async function o_(t,e,n){t._canInitEmulator=!1;const r={...sS,...e};try{const i=new cS(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ca(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ca(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ca(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ca(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw sf(t,p,d);Lt(t,p)}}catch(i){if(i instanceof kn)throw i;Lt(t,"network-request-failed",{message:String(i)})}}async function dc(t,e,n,r,i={}){const s=await bn(t,e,n,r,i);return"mfaPendingCredential"in s&&Lt(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function a_(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?af(t.config,i):`${t.config.apiScheme}://${i}`;return oS.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function lS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($t(this.auth,"network-request-failed")),aS.get())})}}function Ca(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$t(t,e,r);return i.customData._tokenResponse=n,i}function hg(t){return t!==void 0&&t.enterprise!==void 0}class uS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hS(t,e){return bn(t,"GET","/v2/recaptchaConfig",Er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(t,e){return bn(t,"POST","/v1/accounts:delete",e)}async function jl(t,e){return bn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fS(t,e=!1){const n=ke(t),r=await n.getIdToken(e),i=lf(r);G(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:eo(Du(i.auth_time)),issuedAtTime:eo(Du(i.iat)),expirationTime:eo(Du(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Du(t){return Number(t)*1e3}function lf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $a("JWT malformed, contained fewer than 3 sections"),null;try{const i=$0(n);return i?JSON.parse(i):($a("Failed to decode base64 JWT payload"),null)}catch(i){return $a("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function dg(t){const e=lf(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kn&&pS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eo(this.lastLoginAt),this.creationTime=eo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Io(t,jl(e,{idToken:n}));G(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(m=i.providerUserInfo)!=null&&m.length?l_(i.providerUserInfo):[],o=yS(t.providerData,s),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Uh(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function gS(t){const e=ke(t);await Nl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yS(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function l_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(t,e){const n=await o_(t,{},async()=>{const r=Mo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await a_(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&ts(t.emulatorConfig.host)&&(u.credentials="include"),s_.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _S(t,e){return bn(t,"POST","/v2/accounts:revokeToken",Er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=dg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await vS(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Pi;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(G(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pi,this.toJSON())}_performRefresh(){return gn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zt{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new mS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Uh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Io(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fS(this,e)}reload(){return gS(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xt(this.auth.app))return Promise.reject(_n(this.auth));const e=await this.getIdToken();return await Io(this,dS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:m,emailVerified:y,isAnonymous:R,providerData:b,stsTokenManager:N}=n;G(m&&N,e,"internal-error");const L=Pi.fromJSON(this.name,N);G(typeof m=="string",e,"internal-error"),Fn(r,e.name),Fn(i,e.name),G(typeof y=="boolean",e,"internal-error"),G(typeof R=="boolean",e,"internal-error"),Fn(s,e.name),Fn(o,e.name),Fn(c,e.name),Fn(u,e.name),Fn(d,e.name),Fn(p,e.name);const S=new zt({uid:m,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:R,photoURL:o,phoneNumber:s,tenantId:c,stsTokenManager:L,createdAt:d,lastLoginAt:p});return b&&Array.isArray(b)&&(S.providerData=b.map(w=>({...w}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Pi;i.updateFromServerResponse(n);const s=new zt({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Nl(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];G(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?l_(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Pi;c.updateFromIdToken(r);const u=new zt({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Uh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new Map;function yn(t){Sn(t instanceof Function,"Expected a class definition");let e=fg.get(t);return e?(Sn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}c_.type="NONE";const pg=c_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t,e,n){return`firebase:${t}:${e}:${n}`}class ji{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ha(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ha("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await jl(this.auth,{idToken:e}).catch(()=>{});return n?zt._fromGetAccountInfoResponse(this.auth,n,e):null}return zt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ji(yn(pg),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||yn(pg);const o=Ha(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(o);if(p){let m;if(typeof p=="string"){const y=await jl(e,{idToken:p}).catch(()=>{});if(!y)break;m=await zt._fromGetAccountInfoResponse(e,y,p)}else m=zt._fromJSON(e,p);d!==s&&(c=m),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ji(s,e,r):(s=u[0],c&&await s._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new ji(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(f_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m_(e))return"Blackberry";if(g_(e))return"Webos";if(h_(e))return"Safari";if((e.includes("chrome/")||d_(e))&&!e.includes("edge/"))return"Chrome";if(p_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function u_(t=it()){return/firefox\//i.test(t)}function h_(t=it()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d_(t=it()){return/crios\//i.test(t)}function f_(t=it()){return/iemobile/i.test(t)}function p_(t=it()){return/android/i.test(t)}function m_(t=it()){return/blackberry/i.test(t)}function g_(t=it()){return/webos/i.test(t)}function cf(t=it()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wS(t=it()){var e;return cf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function xS(){return DT()&&document.documentMode===10}function y_(t=it()){return cf(t)||p_(t)||g_(t)||m_(t)||/windows phone/i.test(t)||f_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e=[]){let n;switch(t){case"Browser":n=mg(it());break;case"Worker":n=`${mg(it())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ns}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,c)=>{try{const u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(t,e={}){return bn(t,"GET","/v2/passwordPolicy",Er(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=6;class SS{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??IS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gg(this),this.idTokenSubscription=new gg(this),this.beforeStateQueue=new ES(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=i_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ji.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jl(this,{idToken:e}),r=await zt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(xt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xt(this.app))return Promise.reject(_n(this));const n=e?ke(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xt(this.app)?Promise.reject(_n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xt(this.app)?Promise.reject(_n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TS(this),n=new SS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Oo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _S(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yn(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await ji.create(this,[yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&eS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Tr(t){return ke(t)}class gg{constructor(e){this.auth=e,this.observer=null,this.addObserver=zT(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RS(t){fc=t}function __(t){return fc.loadJS(t)}function AS(){return fc.recaptchaEnterpriseScript}function kS(){return fc.gapiScript}function bS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class PS{constructor(){this.enterprise=new jS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const NS="recaptcha-enterprise",w_="NO_RECAPTCHA";class DS{constructor(e){this.type=NS,this.auth=Tr(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,c)=>{hS(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new uS(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(s,o,c){const u=window.grecaptcha;hg(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(w_)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PS().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(c=>{if(!n&&hg(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=AS();u.length!==0&&(u+=c),__(u).then(()=>{i(c,s,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function Ns(t,e,n,r=!1,i=!1){const s=new DS(t);let o;if(i)o=w_;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Bh(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Ns(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Ns(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const c=await Ns(t,e,n);return r(t,c).catch(async u=>{var d;if(((d=t._getRecaptchaConfig())==null?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const p=await Ns(t,e,n,!1,!0);return r(t,p)}return Promise.reject(u)})}else{const c=await Ns(t,e,n,!1,!0);return r(t,c)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e){const n=rf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Kr(s,e??{}))return i;Lt(i,"already-initialized")}return n.initialize({options:e})}function LS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function OS(t,e,n){const r=Tr(t);G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=x_(e),{host:o,port:c}=MS(e),u=c===null?"":`:${c}`,d={url:`${s}//${o}${u}/`},p=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){G(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),G(Kr(d,r.config.emulator)&&Kr(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,ts(o)?(Q0(`${s}//${o}${u}`),Y0("Auth",!0)):i||FS()}function x_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MS(t){const e=x_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:yg(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:yg(o)}}}function yg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gn("not implemented")}_getIdTokenResponse(e){return gn("not implemented")}_linkToIdToken(e,n){return gn("not implemented")}_getReauthenticationResolver(e){return gn("not implemented")}}async function US(t,e){return bn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(t,e){return dc(t,"POST","/v1/accounts:signInWithPassword",Er(t,e))}async function zS(t,e){return bn(t,"POST","/v1/accounts:sendOobCode",Er(t,e))}async function WS(t,e){return zS(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(t,e){return dc(t,"POST","/v1/accounts:signInWithEmailLink",Er(t,e))}async function $S(t,e){return dc(t,"POST","/v1/accounts:signInWithEmailLink",Er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends uf{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new So(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new So(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bh(e,n,"signInWithPassword",BS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return qS(e,{email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bh(e,r,"signUpPassword",US,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return $S(e,{idToken:n,email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni(t,e){return dc(t,"POST","/v1/accounts:signInWithIdp",Er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="http://localhost";class Yr extends uf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Lt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Yr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ni(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ni(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ni(e,n)}buildRequest(){const e={requestUri:HS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KS(t){const e=Fs(Us(t)).link,n=e?Fs(Us(e)).deep_link_id:null,r=Fs(Us(t)).deep_link_id;return(r?Fs(Us(r)).link:null)||r||n||e||t}class pc{constructor(e){const n=Fs(Us(e)),r=n.apiKey??null,i=n.oobCode??null,s=GS(n.mode??null);G(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=KS(e);try{return new pc(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.providerId=ti.PROVIDER_ID}static credential(e,n){return So._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=pc.parseLink(n);return G(r,"argument-error"),So._fromEmailAndCode(e,r.code,r.tenantId)}}ti.PROVIDER_ID="password";ti.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ti.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends hf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends Uo{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qn.credential(e.oauthAccessToken)}catch{return null}}}qn.FACEBOOK_SIGN_IN_METHOD="facebook.com";qn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn extends Uo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yr._fromParams({providerId:fn.PROVIDER_ID,signInMethod:fn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fn.credentialFromTaggedObject(e)}static credentialFromError(e){return fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fn.credential(n,r)}catch{return null}}}fn.GOOGLE_SIGN_IN_METHOD="google.com";fn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Uo{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $n.credential(e.oauthAccessToken)}catch{return null}}}$n.GITHUB_SIGN_IN_METHOD="github.com";$n.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends Uo{constructor(){super("twitter.com")}static credential(e,n){return Yr._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hn.credential(n,r)}catch{return null}}}Hn.TWITTER_SIGN_IN_METHOD="twitter.com";Hn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await zt._fromIdTokenResponse(e,r,i),o=vg(r);return new $i({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=vg(r);return new $i({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function vg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends kn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Dl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Dl(e,n,r,i)}}function E_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Dl._fromErrorAndOperation(t,s,e,r):s})}async function QS(t,e,n=!1){const r=await Io(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return $i._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(t,e,n=!1){const{auth:r}=t;if(xt(r.app))return Promise.reject(_n(r));const i="reauthenticate";try{const s=await Io(t,E_(r,i,e,t),n);G(s.idToken,r,"internal-error");const o=lf(s.idToken);G(o,r,"internal-error");const{sub:c}=o;return G(t.uid===c,r,"user-mismatch"),$i._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Lt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T_(t,e,n=!1){if(xt(t.app))return Promise.reject(_n(t));const r="signIn",i=await E_(t,r,e),s=await $i._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function I_(t,e){return T_(Tr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t,e,n){var r;G(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),G(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),G(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(G(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(G(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(t){const e=Tr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function ZS(t,e,n){return xt(t.app)?Promise.reject(_n(t)):I_(ke(t),ti.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&JS(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(t,e,n){const r=Tr(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,c){G(c.handleCodeInApp,r,"argument-error"),c&&XS(r,o,c)}s(i,n),await Bh(r,i,"getOobCode",WS,"EMAIL_PASSWORD_PROVIDER")}function _g(t,e){const n=pc.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function tC(t,e,n){if(xt(t.app))return Promise.reject(_n(t));const r=ke(t),i=ti.credentialWithLink(e,n||Pl());return G(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),I_(r,i)}function nC(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function rC(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}function iC(t,e,n,r){return ke(t).onAuthStateChanged(e,n,r)}function Vu(t){return ke(t).signOut()}const Vl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vl,"1"),this.storage.removeItem(Vl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=1e3,oC=10;class C_ extends S_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);xS()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,oC):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}C_.type="LOCAL";const aC=C_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_ extends S_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}R_.type="SESSION";const A_=R_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new mc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,s)),u=await lC(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{const d=df("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(y.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return window}function uC(t){sn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(){return typeof sn().WorkerGlobalScope<"u"&&typeof sn().importScripts=="function"}async function hC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function fC(){return k_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="firebaseLocalStorageDb",pC=1,Ll="firebaseLocalStorage",P_="fbase_key";class Bo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gc(t,e){return t.transaction([Ll],e?"readwrite":"readonly").objectStore(Ll)}function mC(){const t=indexedDB.deleteDatabase(b_);return new Bo(t).toPromise()}function zh(){const t=indexedDB.open(b_,pC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ll,{keyPath:P_})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ll)?e(r):(r.close(),await mC(),e(await zh()))})})}async function wg(t,e,n){const r=gc(t,!0).put({[P_]:e,value:n});return new Bo(r).toPromise()}async function gC(t,e){const n=gc(t,!1).get(e),r=await new Bo(n).toPromise();return r===void 0?null:r.value}function xg(t,e){const n=gc(t,!0).delete(e);return new Bo(n).toPromise()}const yC=800,vC=3;class j_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return k_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mc._getInstance(fC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await hC(),!this.activeServiceWorker)return;this.sender=new cC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zh();return await wg(e,Vl,"1"),await xg(e,Vl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>gC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=gc(i,!1).getAll();return new Bo(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j_.type="LOCAL";const _C=j_;new Fo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t,e){return e?yn(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends uf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ni(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ni(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ni(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wC(t){return T_(t.auth,new ff(t),t.bypassAuthState)}function xC(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),YS(n,new ff(t),t.bypassAuthState)}async function EC(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),QS(n,new ff(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wC;case"linkViaPopup":case"linkViaRedirect":return EC;case"reauthViaPopup":case"reauthViaRedirect":return xC;default:Lt(this.auth,"internal-error")}}resolve(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new Fo(2e3,1e4);async function IC(t,e,n){if(xt(t.app))return Promise.reject($t(t,"operation-not-supported-in-this-environment"));const r=Tr(t);tS(t,e,hf);const i=N_(r,n);return new Fr(r,"signInViaPopup",e,i).executeNotNull()}class Fr extends D_{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Fr.currentPopupAction&&Fr.currentPopupAction.cancel(),Fr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Sn(this.filter.length===1,"Popup operations only handle one event");const e=df();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($t(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject($t(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($t(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TC.get())};e()}}Fr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="pendingRedirect",Ga=new Map;class CC extends D_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ga.get(this.auth._key());if(!e){try{const r=await RC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ga.set(this.auth._key(),e)}return this.bypassAuthState||Ga.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RC(t,e){const n=bC(e),r=kC(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function AC(t,e){Ga.set(t._key(),e)}function kC(t){return yn(t._redirectPersistence)}function bC(t){return Ha(SC,t.config.apiKey,t.name)}async function PC(t,e,n=!1){if(xt(t.app))return Promise.reject(_n(t));const r=Tr(t),i=N_(r,e),o=await new CC(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=10*60*1e3;class NC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!V_(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError($t(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Eg(e))}saveEventToCache(e){this.cachedEventUids.add(Eg(e)),this.lastProcessedEventTime=Date.now()}}function Eg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function V_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t,e={}){return bn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OC=/^https?/;async function MC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VC(t);for(const n of e)try{if(FC(n))return}catch{}Lt(t,"unauthorized-domain")}function FC(t){const e=Pl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!OC.test(n))return!1;if(LC.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new Fo(3e4,6e4);function Tg(){const t=sn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function BC(t){return new Promise((e,n)=>{var i,s,o;function r(){Tg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tg(),n($t(t,"network-request-failed"))},timeout:UC.get()})}if((s=(i=sn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=sn().gapi)!=null&&o.load)r();else{const c=bS("iframefcb");return sn()[c]=()=>{gapi.load?r():n($t(t,"network-request-failed"))},__(`${kS()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Ka=null,e})}let Ka=null;function zC(t){return Ka=Ka||BC(t),Ka}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new Fo(5e3,15e3),qC="__/auth/iframe",$C="emulator/auth/iframe",HC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KC(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?af(e,$C):`https://${t.config.authDomain}/${qC}`,r={apiKey:e.apiKey,appName:t.name,v:ns},i=GC.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Mo(r).slice(1)}`}async function QC(t){const e=await zC(t),n=sn().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:KC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HC,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=$t(t,"network-request-failed"),c=sn().setTimeout(()=>{s(o)},WC.get());function u(){sn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XC=500,JC=600,ZC="_blank",eR="http://localhost";class Ig{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tR(t,e,n,r=XC,i=JC){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...YC,width:r.toString(),height:i.toString(),top:s,left:o},d=it().toLowerCase();n&&(c=d_(d)?ZC:n),u_(d)&&(e=e||eR,u.scrollbars="yes");const p=Object.entries(u).reduce((y,[R,b])=>`${y}${R}=${b},`,"");if(wS(d)&&c!=="_self")return nR(e||"",c),new Ig(null);const m=window.open(e||"",c,p);G(m,t,"popup-blocked");try{m.focus()}catch{}return new Ig(m)}function nR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="__/auth/handler",iR="emulator/auth/handler",sR=encodeURIComponent("fac");async function Sg(t,e,n,r,i,s){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ns,eventId:i};if(e instanceof hf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",BT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries(s||{}))o[p]=m}if(e instanceof Uo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),d=u?`#${sR}=${encodeURIComponent(u)}`:"";return`${oR(t)}?${Mo(c).slice(1)}${d}`}function oR({config:t}){return t.emulator?af(t,iR):`https://${t.authDomain}/${rR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="webStorageSupport";class aR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=A_,this._completeRedirectFn=PC,this._overrideRedirectResult=AC}async _openPopup(e,n,r,i){var o;Sn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Sg(e,n,r,Pl(),i);return tR(e,s,df())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Sg(e,n,r,Pl(),i);return uC(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Sn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await QC(e),r=new NC(e);return n.register("authEvent",i=>(G(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lu,{type:Lu},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Lu];s!==void 0&&n(!!s),Lt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return y_()||h_()||cf()}}const lR=aR;var Cg="@firebase/auth",Rg="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hR(t){qi(new Qr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v_(t)},d=new CS(r,i,s,u);return LS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qi(new Qr("auth-internal",e=>{const n=Tr(e.getProvider("auth").getImmediate());return(r=>new cR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(Cg,Rg,uR(t)),or(Cg,Rg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=5*60,fR=K0("authIdTokenMaxAge")||dR;let Ag=null;const pR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fR)return;const i=n==null?void 0:n.token;Ag!==i&&(Ag=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mR(t=e_()){const e=rf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VS(t,{popupRedirectResolver:lR,persistence:[_C,aC,A_]}),r=K0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=pR(s.toString());rC(n,o,()=>o(n.currentUser)),nC(n,c=>o(c))}}const i=H0("auth");return i&&OS(n,`http://${i}`),n}function gR(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}RS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=$t("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hR("Browser");var kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ar,L_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,v){function x(){}x.prototype=v.prototype,_.F=v.prototype,_.prototype=new x,_.prototype.constructor=_,_.D=function(I,C,k){for(var E=Array(arguments.length-2),be=2;be<arguments.length;be++)E[be-2]=arguments[be];return v.prototype[C].apply(I,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,v,x){x||(x=0);const I=Array(16);if(typeof v=="string")for(var C=0;C<16;++C)I[C]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(C=0;C<16;++C)I[C]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=_.g[0],x=_.g[1],C=_.g[2];let k=_.g[3],E;E=v+(k^x&(C^k))+I[0]+3614090360&4294967295,v=x+(E<<7&4294967295|E>>>25),E=k+(C^v&(x^C))+I[1]+3905402710&4294967295,k=v+(E<<12&4294967295|E>>>20),E=C+(x^k&(v^x))+I[2]+606105819&4294967295,C=k+(E<<17&4294967295|E>>>15),E=x+(v^C&(k^v))+I[3]+3250441966&4294967295,x=C+(E<<22&4294967295|E>>>10),E=v+(k^x&(C^k))+I[4]+4118548399&4294967295,v=x+(E<<7&4294967295|E>>>25),E=k+(C^v&(x^C))+I[5]+1200080426&4294967295,k=v+(E<<12&4294967295|E>>>20),E=C+(x^k&(v^x))+I[6]+2821735955&4294967295,C=k+(E<<17&4294967295|E>>>15),E=x+(v^C&(k^v))+I[7]+4249261313&4294967295,x=C+(E<<22&4294967295|E>>>10),E=v+(k^x&(C^k))+I[8]+1770035416&4294967295,v=x+(E<<7&4294967295|E>>>25),E=k+(C^v&(x^C))+I[9]+2336552879&4294967295,k=v+(E<<12&4294967295|E>>>20),E=C+(x^k&(v^x))+I[10]+4294925233&4294967295,C=k+(E<<17&4294967295|E>>>15),E=x+(v^C&(k^v))+I[11]+2304563134&4294967295,x=C+(E<<22&4294967295|E>>>10),E=v+(k^x&(C^k))+I[12]+1804603682&4294967295,v=x+(E<<7&4294967295|E>>>25),E=k+(C^v&(x^C))+I[13]+4254626195&4294967295,k=v+(E<<12&4294967295|E>>>20),E=C+(x^k&(v^x))+I[14]+2792965006&4294967295,C=k+(E<<17&4294967295|E>>>15),E=x+(v^C&(k^v))+I[15]+1236535329&4294967295,x=C+(E<<22&4294967295|E>>>10),E=v+(C^k&(x^C))+I[1]+4129170786&4294967295,v=x+(E<<5&4294967295|E>>>27),E=k+(x^C&(v^x))+I[6]+3225465664&4294967295,k=v+(E<<9&4294967295|E>>>23),E=C+(v^x&(k^v))+I[11]+643717713&4294967295,C=k+(E<<14&4294967295|E>>>18),E=x+(k^v&(C^k))+I[0]+3921069994&4294967295,x=C+(E<<20&4294967295|E>>>12),E=v+(C^k&(x^C))+I[5]+3593408605&4294967295,v=x+(E<<5&4294967295|E>>>27),E=k+(x^C&(v^x))+I[10]+38016083&4294967295,k=v+(E<<9&4294967295|E>>>23),E=C+(v^x&(k^v))+I[15]+3634488961&4294967295,C=k+(E<<14&4294967295|E>>>18),E=x+(k^v&(C^k))+I[4]+3889429448&4294967295,x=C+(E<<20&4294967295|E>>>12),E=v+(C^k&(x^C))+I[9]+568446438&4294967295,v=x+(E<<5&4294967295|E>>>27),E=k+(x^C&(v^x))+I[14]+3275163606&4294967295,k=v+(E<<9&4294967295|E>>>23),E=C+(v^x&(k^v))+I[3]+4107603335&4294967295,C=k+(E<<14&4294967295|E>>>18),E=x+(k^v&(C^k))+I[8]+1163531501&4294967295,x=C+(E<<20&4294967295|E>>>12),E=v+(C^k&(x^C))+I[13]+2850285829&4294967295,v=x+(E<<5&4294967295|E>>>27),E=k+(x^C&(v^x))+I[2]+4243563512&4294967295,k=v+(E<<9&4294967295|E>>>23),E=C+(v^x&(k^v))+I[7]+1735328473&4294967295,C=k+(E<<14&4294967295|E>>>18),E=x+(k^v&(C^k))+I[12]+2368359562&4294967295,x=C+(E<<20&4294967295|E>>>12),E=v+(x^C^k)+I[5]+4294588738&4294967295,v=x+(E<<4&4294967295|E>>>28),E=k+(v^x^C)+I[8]+2272392833&4294967295,k=v+(E<<11&4294967295|E>>>21),E=C+(k^v^x)+I[11]+1839030562&4294967295,C=k+(E<<16&4294967295|E>>>16),E=x+(C^k^v)+I[14]+4259657740&4294967295,x=C+(E<<23&4294967295|E>>>9),E=v+(x^C^k)+I[1]+2763975236&4294967295,v=x+(E<<4&4294967295|E>>>28),E=k+(v^x^C)+I[4]+1272893353&4294967295,k=v+(E<<11&4294967295|E>>>21),E=C+(k^v^x)+I[7]+4139469664&4294967295,C=k+(E<<16&4294967295|E>>>16),E=x+(C^k^v)+I[10]+3200236656&4294967295,x=C+(E<<23&4294967295|E>>>9),E=v+(x^C^k)+I[13]+681279174&4294967295,v=x+(E<<4&4294967295|E>>>28),E=k+(v^x^C)+I[0]+3936430074&4294967295,k=v+(E<<11&4294967295|E>>>21),E=C+(k^v^x)+I[3]+3572445317&4294967295,C=k+(E<<16&4294967295|E>>>16),E=x+(C^k^v)+I[6]+76029189&4294967295,x=C+(E<<23&4294967295|E>>>9),E=v+(x^C^k)+I[9]+3654602809&4294967295,v=x+(E<<4&4294967295|E>>>28),E=k+(v^x^C)+I[12]+3873151461&4294967295,k=v+(E<<11&4294967295|E>>>21),E=C+(k^v^x)+I[15]+530742520&4294967295,C=k+(E<<16&4294967295|E>>>16),E=x+(C^k^v)+I[2]+3299628645&4294967295,x=C+(E<<23&4294967295|E>>>9),E=v+(C^(x|~k))+I[0]+4096336452&4294967295,v=x+(E<<6&4294967295|E>>>26),E=k+(x^(v|~C))+I[7]+1126891415&4294967295,k=v+(E<<10&4294967295|E>>>22),E=C+(v^(k|~x))+I[14]+2878612391&4294967295,C=k+(E<<15&4294967295|E>>>17),E=x+(k^(C|~v))+I[5]+4237533241&4294967295,x=C+(E<<21&4294967295|E>>>11),E=v+(C^(x|~k))+I[12]+1700485571&4294967295,v=x+(E<<6&4294967295|E>>>26),E=k+(x^(v|~C))+I[3]+2399980690&4294967295,k=v+(E<<10&4294967295|E>>>22),E=C+(v^(k|~x))+I[10]+4293915773&4294967295,C=k+(E<<15&4294967295|E>>>17),E=x+(k^(C|~v))+I[1]+2240044497&4294967295,x=C+(E<<21&4294967295|E>>>11),E=v+(C^(x|~k))+I[8]+1873313359&4294967295,v=x+(E<<6&4294967295|E>>>26),E=k+(x^(v|~C))+I[15]+4264355552&4294967295,k=v+(E<<10&4294967295|E>>>22),E=C+(v^(k|~x))+I[6]+2734768916&4294967295,C=k+(E<<15&4294967295|E>>>17),E=x+(k^(C|~v))+I[13]+1309151649&4294967295,x=C+(E<<21&4294967295|E>>>11),E=v+(C^(x|~k))+I[4]+4149444226&4294967295,v=x+(E<<6&4294967295|E>>>26),E=k+(x^(v|~C))+I[11]+3174756917&4294967295,k=v+(E<<10&4294967295|E>>>22),E=C+(v^(k|~x))+I[2]+718787259&4294967295,C=k+(E<<15&4294967295|E>>>17),E=x+(k^(C|~v))+I[9]+3951481745&4294967295,_.g[0]=_.g[0]+v&4294967295,_.g[1]=_.g[1]+(C+(E<<21&4294967295|E>>>11))&4294967295,_.g[2]=_.g[2]+C&4294967295,_.g[3]=_.g[3]+k&4294967295}r.prototype.v=function(_,v){v===void 0&&(v=_.length);const x=v-this.blockSize,I=this.C;let C=this.h,k=0;for(;k<v;){if(C==0)for(;k<=x;)i(this,_,k),k+=this.blockSize;if(typeof _=="string"){for(;k<v;)if(I[C++]=_.charCodeAt(k++),C==this.blockSize){i(this,I),C=0;break}}else for(;k<v;)if(I[C++]=_[k++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var v=1;v<_.length-8;++v)_[v]=0;v=this.o*8;for(var x=_.length-8;x<_.length;++x)_[x]=v&255,v/=256;for(this.v(_),_=Array(16),v=0,x=0;x<4;++x)for(let I=0;I<32;I+=8)_[v++]=this.g[x]>>>I&255;return _};function s(_,v){var x=c;return Object.prototype.hasOwnProperty.call(x,_)?x[_]:x[_]=v(_)}function o(_,v){this.h=v;const x=[];let I=!0;for(let C=_.length-1;C>=0;C--){const k=_[C]|0;I&&k==v||(x[C]=k,I=!1)}this.g=x}var c={};function u(_){return-128<=_&&_<128?s(_,function(v){return new o([v|0],v<0?-1:0)}):new o([_|0],_<0?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return m;if(_<0)return L(d(-_));const v=[];let x=1;for(let I=0;_>=x;I++)v[I]=_/x|0,x*=4294967296;return new o(v,0)}function p(_,v){if(_.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(_.charAt(0)=="-")return L(p(_.substring(1),v));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=d(Math.pow(v,8));let I=m;for(let k=0;k<_.length;k+=8){var C=Math.min(8,_.length-k);const E=parseInt(_.substring(k,k+C),v);C<8?(C=d(Math.pow(v,C)),I=I.j(C).add(d(E))):(I=I.j(x),I=I.add(d(E)))}return I}var m=u(0),y=u(1),R=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-L(this).m();let _=0,v=1;for(let x=0;x<this.g.length;x++){const I=this.i(x);_+=(I>=0?I:4294967296+I)*v,v*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(b(this))return"0";if(N(this))return"-"+L(this).toString(_);const v=d(Math.pow(_,6));var x=this;let I="";for(;;){const C=j(x,v).g;x=S(x,C.j(v));let k=((x.g.length>0?x.g[0]:x.h)>>>0).toString(_);if(x=C,b(x))return k+I;for(;k.length<6;)k="0"+k;I=k+I}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function b(_){if(_.h!=0)return!1;for(let v=0;v<_.g.length;v++)if(_.g[v]!=0)return!1;return!0}function N(_){return _.h==-1}t.l=function(_){return _=S(this,_),N(_)?-1:b(_)?0:1};function L(_){const v=_.g.length,x=[];for(let I=0;I<v;I++)x[I]=~_.g[I];return new o(x,~_.h).add(y)}t.abs=function(){return N(this)?L(this):this},t.add=function(_){const v=Math.max(this.g.length,_.g.length),x=[];let I=0;for(let C=0;C<=v;C++){let k=I+(this.i(C)&65535)+(_.i(C)&65535),E=(k>>>16)+(this.i(C)>>>16)+(_.i(C)>>>16);I=E>>>16,k&=65535,E&=65535,x[C]=E<<16|k}return new o(x,x[x.length-1]&-2147483648?-1:0)};function S(_,v){return _.add(L(v))}t.j=function(_){if(b(this)||b(_))return m;if(N(this))return N(_)?L(this).j(L(_)):L(L(this).j(_));if(N(_))return L(this.j(L(_)));if(this.l(R)<0&&_.l(R)<0)return d(this.m()*_.m());const v=this.g.length+_.g.length,x=[];for(var I=0;I<2*v;I++)x[I]=0;for(I=0;I<this.g.length;I++)for(let C=0;C<_.g.length;C++){const k=this.i(I)>>>16,E=this.i(I)&65535,be=_.i(C)>>>16,z=_.i(C)&65535;x[2*I+2*C]+=E*z,w(x,2*I+2*C),x[2*I+2*C+1]+=k*z,w(x,2*I+2*C+1),x[2*I+2*C+1]+=E*be,w(x,2*I+2*C+1),x[2*I+2*C+2]+=k*be,w(x,2*I+2*C+2)}for(_=0;_<v;_++)x[_]=x[2*_+1]<<16|x[2*_];for(_=v;_<2*v;_++)x[_]=0;return new o(x,0)};function w(_,v){for(;(_[v]&65535)!=_[v];)_[v+1]+=_[v]>>>16,_[v]&=65535,v++}function T(_,v){this.g=_,this.h=v}function j(_,v){if(b(v))throw Error("division by zero");if(b(_))return new T(m,m);if(N(_))return v=j(L(_),v),new T(L(v.g),L(v.h));if(N(v))return v=j(_,L(v)),new T(L(v.g),v.h);if(_.g.length>30){if(N(_)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var x=y,I=v;I.l(_)<=0;)x=F(x),I=F(I);var C=U(x,1),k=U(I,1);for(I=U(I,2),x=U(x,2);!b(I);){var E=k.add(I);E.l(_)<=0&&(C=C.add(x),k=E),I=U(I,1),x=U(x,1)}return v=S(_,C.j(v)),new T(C,v)}for(C=m;_.l(v)>=0;){for(x=Math.max(1,Math.floor(_.m()/v.m())),I=Math.ceil(Math.log(x)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),k=d(x),E=k.j(v);N(E)||E.l(_)>0;)x-=I,k=d(x),E=k.j(v);b(k)&&(k=y),C=C.add(k),_=S(_,E)}return new T(C,_)}t.B=function(_){return j(this,_).h},t.and=function(_){const v=Math.max(this.g.length,_.g.length),x=[];for(let I=0;I<v;I++)x[I]=this.i(I)&_.i(I);return new o(x,this.h&_.h)},t.or=function(_){const v=Math.max(this.g.length,_.g.length),x=[];for(let I=0;I<v;I++)x[I]=this.i(I)|_.i(I);return new o(x,this.h|_.h)},t.xor=function(_){const v=Math.max(this.g.length,_.g.length),x=[];for(let I=0;I<v;I++)x[I]=this.i(I)^_.i(I);return new o(x,this.h^_.h)};function F(_){const v=_.g.length+1,x=[];for(let I=0;I<v;I++)x[I]=_.i(I)<<1|_.i(I-1)>>>31;return new o(x,_.h)}function U(_,v){const x=v>>5;v%=32;const I=_.g.length-x,C=[];for(let k=0;k<I;k++)C[k]=v>0?_.i(k+x)>>>v|_.i(k+x+1)<<32-v:_.i(k+x);return new o(C,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,L_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,ar=o}).apply(typeof kg<"u"?kg:typeof self<"u"?self:typeof window<"u"?window:{});var Ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O_,Bs,M_,Qa,Wh,F_,U_,B_;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ra=="object"&&Ra];for(var h=0;h<l.length;++h){var f=l[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var f=r;l=l.split(".");for(var g=0;g<l.length-1;g++){var A=l[g];if(!(A in f))break e;f=f[A]}l=l[l.length-1],g=f[l],h=h(g),h!=g&&h!=null&&e(f,l,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(h){var f=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&f.push([g,h[g]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,f){return l.call.apply(l.bind,arguments)}function d(l,h,f){return d=u,d.apply(null,arguments)}function p(l,h){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function m(l,h){function f(){}f.prototype=h.prototype,l.Z=h.prototype,l.prototype=new f,l.prototype.constructor=l,l.Ob=function(g,A,P){for(var B=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)B[Z-2]=arguments[Z];return h.prototype[A].apply(g,B)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function R(l){const h=l.length;if(h>0){const f=Array(h);for(let g=0;g<h;g++)f[g]=l[g];return f}return[]}function b(l,h){for(let g=1;g<arguments.length;g++){const A=arguments[g];var f=typeof A;if(f=f!="object"?f:A?Array.isArray(A)?"array":f:"null",f=="array"||f=="object"&&typeof A.length=="number"){f=l.length||0;const P=A.length||0;l.length=f+P;for(let B=0;B<P;B++)l[f+B]=A[B]}else l.push(A)}}class N{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function L(l){o.setTimeout(()=>{throw l},0)}function S(){var l=_;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class w{constructor(){this.h=this.g=null}add(h,f){const g=T.get();g.set(h,f),this.h?this.h.next=g:this.g=g,this.h=g}}var T=new N(()=>new j,l=>l.reset());class j{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let F,U=!1,_=new w,v=()=>{const l=Promise.resolve(void 0);F=()=>{l.then(x)}};function x(){for(var l;l=S();){try{l.h.call(l.g)}catch(f){L(f)}var h=T;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}U=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const f=()=>{};o.addEventListener("test",f,h),o.removeEventListener("test",f,h)}catch{}return l}();function E(l){return/^[\s\xa0]*$/.test(l)}function be(l,h){C.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}m(be,C),be.prototype.init=function(l,h){const f=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(f=="mouseover"?h=l.fromElement:f=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var z="closure_listenable_"+(Math.random()*1e6|0),ne=0;function ae(l,h,f,g,A){this.listener=l,this.proxy=null,this.src=h,this.type=f,this.capture=!!g,this.ha=A,this.key=++ne,this.da=this.fa=!1}function O(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function H(l,h,f){for(const g in l)h.call(f,l[g],g,l)}function J(l,h){for(const f in l)h.call(void 0,l[f],f,l)}function ue(l){const h={};for(const f in l)h[f]=l[f];return h}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kt(l,h){let f,g;for(let A=1;A<arguments.length;A++){g=arguments[A];for(f in g)l[f]=g[f];for(let P=0;P<fe.length;P++)f=fe[P],Object.prototype.hasOwnProperty.call(g,f)&&(l[f]=g[f])}}function At(l){this.src=l,this.g={},this.h=0}At.prototype.add=function(l,h,f,g,A){const P=l.toString();l=this.g[P],l||(l=this.g[P]=[],this.h++);const B=Ot(l,h,g,A);return B>-1?(h=l[B],f||(h.fa=!1)):(h=new ae(h,this.src,P,!!g,A),h.fa=f,l.push(h)),h};function Cr(l,h){const f=h.type;if(f in l.g){var g=l.g[f],A=Array.prototype.indexOf.call(g,h,void 0),P;(P=A>=0)&&Array.prototype.splice.call(g,A,1),P&&(O(h),l.g[f].length==0&&(delete l.g[f],l.h--))}}function Ot(l,h,f,g){for(let A=0;A<l.length;++A){const P=l[A];if(!P.da&&P.listener==h&&P.capture==!!f&&P.ha==g)return A}return-1}var Pn="closure_lm_"+(Math.random()*1e6|0),Vc={};function Hf(l,h,f,g,A){if(g&&g.once)return Kf(l,h,f,g,A);if(Array.isArray(h)){for(let P=0;P<h.length;P++)Hf(l,h[P],f,g,A);return null}return f=Fc(f),l&&l[z]?l.J(h,f,c(g)?!!g.capture:!!g,A):Gf(l,h,f,!1,g,A)}function Gf(l,h,f,g,A,P){if(!h)throw Error("Invalid event type");const B=c(A)?!!A.capture:!!A;let Z=Oc(l);if(Z||(l[Pn]=Z=new At(l)),f=Z.add(h,f,g,B,P),f.proxy)return f;if(g=g1(),f.proxy=g,g.src=l,g.listener=f,l.addEventListener)k||(A=B),A===void 0&&(A=!1),l.addEventListener(h.toString(),g,A);else if(l.attachEvent)l.attachEvent(Yf(h.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function g1(){function l(f){return h.call(l.src,l.listener,f)}const h=y1;return l}function Kf(l,h,f,g,A){if(Array.isArray(h)){for(let P=0;P<h.length;P++)Kf(l,h[P],f,g,A);return null}return f=Fc(f),l&&l[z]?l.K(h,f,c(g)?!!g.capture:!!g,A):Gf(l,h,f,!0,g,A)}function Qf(l,h,f,g,A){if(Array.isArray(h))for(var P=0;P<h.length;P++)Qf(l,h[P],f,g,A);else g=c(g)?!!g.capture:!!g,f=Fc(f),l&&l[z]?(l=l.i,P=String(h).toString(),P in l.g&&(h=l.g[P],f=Ot(h,f,g,A),f>-1&&(O(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete l.g[P],l.h--)))):l&&(l=Oc(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Ot(h,f,g,A)),(f=l>-1?h[l]:null)&&Lc(f))}function Lc(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[z])Cr(h.i,l);else{var f=l.type,g=l.proxy;h.removeEventListener?h.removeEventListener(f,g,l.capture):h.detachEvent?h.detachEvent(Yf(f),g):h.addListener&&h.removeListener&&h.removeListener(g),(f=Oc(h))?(Cr(f,l),f.h==0&&(f.src=null,h[Pn]=null)):O(l)}}}function Yf(l){return l in Vc?Vc[l]:Vc[l]="on"+l}function y1(l,h){if(l.da)l=!0;else{h=new be(h,this);const f=l.listener,g=l.ha||l.src;l.fa&&Lc(l),l=f.call(g,h)}return l}function Oc(l){return l=l[Pn],l instanceof At?l:null}var Mc="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fc(l){return typeof l=="function"?l:(l[Mc]||(l[Mc]=function(h){return l.handleEvent(h)}),l[Mc])}function Ye(){I.call(this),this.i=new At(this),this.M=this,this.G=null}m(Ye,I),Ye.prototype[z]=!0,Ye.prototype.removeEventListener=function(l,h,f,g){Qf(this,l,h,f,g)};function st(l,h){var f,g=l.G;if(g)for(f=[];g;g=g.G)f.push(g);if(l=l.M,g=h.type||h,typeof h=="string")h=new C(h,l);else if(h instanceof C)h.target=h.target||l;else{var A=h;h=new C(g,l),Kt(h,A)}A=!0;let P,B;if(f)for(B=f.length-1;B>=0;B--)P=h.g=f[B],A=Xo(P,g,!0,h)&&A;if(P=h.g=l,A=Xo(P,g,!0,h)&&A,A=Xo(P,g,!1,h)&&A,f)for(B=0;B<f.length;B++)P=h.g=f[B],A=Xo(P,g,!1,h)&&A}Ye.prototype.N=function(){if(Ye.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const f=l.g[h];for(let g=0;g<f.length;g++)O(f[g]);delete l.g[h],l.h--}}this.G=null},Ye.prototype.J=function(l,h,f,g){return this.i.add(String(l),h,!1,f,g)},Ye.prototype.K=function(l,h,f,g){return this.i.add(String(l),h,!0,f,g)};function Xo(l,h,f,g){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let A=!0;for(let P=0;P<h.length;++P){const B=h[P];if(B&&!B.da&&B.capture==f){const Z=B.listener,Ve=B.ha||B.src;B.fa&&Cr(l.i,B),A=Z.call(Ve,g)!==!1&&A}}return A&&!g.defaultPrevented}function v1(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function Xf(l){l.g=v1(()=>{l.g=null,l.i&&(l.i=!1,Xf(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class _1 extends I{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Xf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cs(l){I.call(this),this.h=l,this.g={}}m(cs,I);var Jf=[];function Zf(l){H(l.g,function(h,f){this.g.hasOwnProperty(f)&&Lc(h)},l),l.g={}}cs.prototype.N=function(){cs.Z.N.call(this),Zf(this)},cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uc=o.JSON.stringify,w1=o.JSON.parse,x1=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function ep(){}function tp(){}var us={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bc(){C.call(this,"d")}m(Bc,C);function zc(){C.call(this,"c")}m(zc,C);var Rr={},np=null;function Jo(){return np=np||new Ye}Rr.Ia="serverreachability";function rp(l){C.call(this,Rr.Ia,l)}m(rp,C);function hs(l){const h=Jo();st(h,new rp(h))}Rr.STAT_EVENT="statevent";function ip(l,h){C.call(this,Rr.STAT_EVENT,l),this.stat=h}m(ip,C);function ot(l){const h=Jo();st(h,new ip(h,l))}Rr.Ja="timingevent";function sp(l,h){C.call(this,Rr.Ja,l),this.size=h}m(sp,C);function ds(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function fs(){this.g=!0}fs.prototype.ua=function(){this.g=!1};function E1(l,h,f,g,A,P){l.info(function(){if(l.g)if(P){var B="",Z=P.split("&");for(let de=0;de<Z.length;de++){var Ve=Z[de].split("=");if(Ve.length>1){const Ue=Ve[0];Ve=Ve[1];const Yt=Ue.split("_");B=Yt.length>=2&&Yt[1]=="type"?B+(Ue+"="+Ve+"&"):B+(Ue+"=redacted&")}}}else B=null;else B=P;return"XMLHTTP REQ ("+g+") [attempt "+A+"]: "+h+`
`+f+`
`+B})}function T1(l,h,f,g,A,P,B){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+A+"]: "+h+`
`+f+`
`+P+" "+B})}function ii(l,h,f,g){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+S1(l,f)+(g?" "+g:"")})}function I1(l,h){l.info(function(){return"TIMEOUT: "+h})}fs.prototype.info=function(){};function S1(l,h){if(!l.g)return h;if(!h)return null;try{const P=JSON.parse(h);if(P){for(l=0;l<P.length;l++)if(Array.isArray(P[l])){var f=P[l];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var A=g[0];if(A!="noop"&&A!="stop"&&A!="close")for(let B=1;B<g.length;B++)g[B]=""}}}}return Uc(P)}catch{return h}}var Zo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},op={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ap;function Wc(){}m(Wc,ep),Wc.prototype.g=function(){return new XMLHttpRequest},ap=new Wc;function ps(l){return encodeURIComponent(String(l))}function C1(l){var h=1;l=l.split(":");const f=[];for(;h>0&&l.length;)f.push(l.shift()),h--;return l.length&&f.push(l.join(":")),f}function jn(l,h,f,g){this.j=l,this.i=h,this.l=f,this.S=g||1,this.V=new cs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new lp}function lp(){this.i=null,this.g="",this.h=!1}var cp={},qc={};function $c(l,h,f){l.M=1,l.A=ta(Qt(h)),l.u=f,l.R=!0,up(l,null)}function up(l,h){l.F=Date.now(),ea(l),l.B=Qt(l.A);var f=l.B,g=l.S;Array.isArray(g)||(g=[String(g)]),Tp(f.i,"t",g),l.C=0,f=l.j.L,l.h=new lp,l.g=Bp(l.j,f?h:null,!l.u),l.P>0&&(l.O=new _1(d(l.Y,l,l.g),l.P)),h=l.V,f=l.g,g=l.ba;var A="readystatechange";Array.isArray(A)||(A&&(Jf[0]=A.toString()),A=Jf);for(let P=0;P<A.length;P++){const B=Hf(f,A[P],g||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=l.J?ue(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),hs(),E1(l.i,l.v,l.B,l.l,l.S,l.u)}jn.prototype.ba=function(l){l=l.target;const h=this.O;h&&Vn(l)==3?h.j():this.Y(l)},jn.prototype.Y=function(l){try{if(l==this.g)e:{const Z=Vn(this.g),Ve=this.g.ya(),de=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||bp(this.g)))){this.K||Z!=4||Ve==7||(Ve==8||de<=0?hs(3):hs(2)),Hc(this);var h=this.g.ca();this.X=h;var f=R1(this);if(this.o=h==200,T1(this.i,this.v,this.B,this.l,this.S,Z,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,A=this.g;if((g=A.g?A.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var P=g;break t}}P=null}if(l=P)ii(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gc(this,l);else{this.o=!1,this.m=3,ot(12),Ar(this),ms(this);break e}}if(this.R){l=!0;let Ue;for(;!this.K&&this.C<f.length;)if(Ue=A1(this,f),Ue==qc){Z==4&&(this.m=4,ot(14),l=!1),ii(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==cp){this.m=4,ot(15),ii(this.i,this.l,f,"[Invalid Chunk]"),l=!1;break}else ii(this.i,this.l,Ue,null),Gc(this,Ue);if(hp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||f.length!=0||this.h.h||(this.m=1,ot(16),l=!1),this.o=this.o&&l,!l)ii(this.i,this.l,f,"[Invalid Chunked Response]"),Ar(this),ms(this);else if(f.length>0&&!this.W){this.W=!0;var B=this.j;B.g==this&&B.aa&&!B.P&&(B.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),tu(B),B.P=!0,ot(11))}}else ii(this.i,this.l,f,null),Gc(this,f);Z==4&&Ar(this),this.o&&!this.K&&(Z==4?Op(this.j,this):(this.o=!1,ea(this)))}else z1(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),Ar(this),ms(this)}}}catch{}finally{}};function R1(l){if(!hp(l))return l.g.la();const h=bp(l.g);if(h==="")return"";let f="";const g=h.length,A=Vn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Ar(l),ms(l),"";l.h.i=new o.TextDecoder}for(let P=0;P<g;P++)l.h.h=!0,f+=l.h.i.decode(h[P],{stream:!(A&&P==g-1)});return h.length=0,l.h.g+=f,l.C=0,l.h.g}function hp(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function A1(l,h){var f=l.C,g=h.indexOf(`
`,f);return g==-1?qc:(f=Number(h.substring(f,g)),isNaN(f)?cp:(g+=1,g+f>h.length?qc:(h=h.slice(g,g+f),l.C=g+f,h)))}jn.prototype.cancel=function(){this.K=!0,Ar(this)};function ea(l){l.T=Date.now()+l.H,dp(l,l.H)}function dp(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=ds(d(l.aa,l),h)}function Hc(l){l.D&&(o.clearTimeout(l.D),l.D=null)}jn.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(I1(this.i,this.B),this.M!=2&&(hs(),ot(17)),Ar(this),this.m=2,ms(this)):dp(this,this.T-l)};function ms(l){l.j.I==0||l.K||Op(l.j,l)}function Ar(l){Hc(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,Zf(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function Gc(l,h){try{var f=l.j;if(f.I!=0&&(f.g==l||Kc(f.h,l))){if(!l.L&&Kc(f.h,l)&&f.I==3){try{var g=f.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var A=g;if(A[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<l.F)oa(f),ia(f);else break e;eu(f),ot(18)}}else f.xa=A[1],0<f.xa-f.K&&A[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ds(d(f.Va,f),6e3));mp(f.h)<=1&&f.ta&&(f.ta=void 0)}else br(f,11)}else if((l.L||f.g==l)&&oa(f),!E(h))for(A=f.Ba.g.parse(h),h=0;h<A.length;h++){let de=A[h];const Ue=de[0];if(!(Ue<=f.K))if(f.K=Ue,de=de[1],f.I==2)if(de[0]=="c"){f.M=de[1],f.ba=de[2];const Yt=de[3];Yt!=null&&(f.ka=Yt,f.j.info("VER="+f.ka));const Pr=de[4];Pr!=null&&(f.za=Pr,f.j.info("SVER="+f.za));const Ln=de[5];Ln!=null&&typeof Ln=="number"&&Ln>0&&(g=1.5*Ln,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const On=l.g;if(On){const la=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(la){var P=g.h;P.g||la.indexOf("spdy")==-1&&la.indexOf("quic")==-1&&la.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Qc(P,P.h),P.h=null))}if(g.G){const nu=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;nu&&(g.wa=nu,ge(g.J,g.G,nu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-l.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var B=l;if(g.na=Up(g,g.L?g.ba:null,g.W),B.L){gp(g.h,B);var Z=B,Ve=g.O;Ve&&(Z.H=Ve),Z.D&&(Hc(Z),ea(Z)),g.g=B}else Vp(g);f.i.length>0&&sa(f)}else de[0]!="stop"&&de[0]!="close"||br(f,7);else f.I==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?br(f,7):Zc(f):de[0]!="noop"&&f.l&&f.l.qa(de),f.A=0)}}hs(4)}catch{}}var k1=class{constructor(l,h){this.g=l,this.map=h}};function fp(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function pp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function mp(l){return l.h?1:l.g?l.g.size:0}function Kc(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Qc(l,h){l.g?l.g.add(h):l.h=h}function gp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}fp.prototype.cancel=function(){if(this.i=yp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function yp(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const f of l.g.values())h=h.concat(f.G);return h}return R(l.i)}var vp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function b1(l,h){if(l){l=l.split("&");for(let f=0;f<l.length;f++){const g=l[f].indexOf("=");let A,P=null;g>=0?(A=l[f].substring(0,g),P=l[f].substring(g+1)):A=l[f],h(A,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Nn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof Nn?(this.l=l.l,gs(this,l.j),this.o=l.o,this.g=l.g,ys(this,l.u),this.h=l.h,Yc(this,Ip(l.i)),this.m=l.m):l&&(h=String(l).match(vp))?(this.l=!1,gs(this,h[1]||"",!0),this.o=vs(h[2]||""),this.g=vs(h[3]||"",!0),ys(this,h[4]),this.h=vs(h[5]||"",!0),Yc(this,h[6]||"",!0),this.m=vs(h[7]||"")):(this.l=!1,this.i=new ws(null,this.l))}Nn.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(_s(h,_p,!0),":");var f=this.g;return(f||h=="file")&&(l.push("//"),(h=this.o)&&l.push(_s(h,_p,!0),"@"),l.push(ps(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&l.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(_s(f,f.charAt(0)=="/"?N1:j1,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",_s(f,V1)),l.join("")},Nn.prototype.resolve=function(l){const h=Qt(this);let f=!!l.j;f?gs(h,l.j):f=!!l.o,f?h.o=l.o:f=!!l.g,f?h.g=l.g:f=l.u!=null;var g=l.h;if(f)ys(h,l.u);else if(f=!!l.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var A=h.h.lastIndexOf("/");A!=-1&&(g=h.h.slice(0,A+1)+g)}if(A=g,A==".."||A==".")g="";else if(A.indexOf("./")!=-1||A.indexOf("/.")!=-1){g=A.lastIndexOf("/",0)==0,A=A.split("/");const P=[];for(let B=0;B<A.length;){const Z=A[B++];Z=="."?g&&B==A.length&&P.push(""):Z==".."?((P.length>1||P.length==1&&P[0]!="")&&P.pop(),g&&B==A.length&&P.push("")):(P.push(Z),g=!0)}g=P.join("/")}else g=A}return f?h.h=g:f=l.i.toString()!=="",f?Yc(h,Ip(l.i)):f=!!l.m,f&&(h.m=l.m),h};function Qt(l){return new Nn(l)}function gs(l,h,f){l.j=f?vs(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function ys(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function Yc(l,h,f){h instanceof ws?(l.i=h,L1(l.i,l.l)):(f||(h=_s(h,D1)),l.i=new ws(h,l.l))}function ge(l,h,f){l.i.set(h,f)}function ta(l){return ge(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function vs(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function _s(l,h,f){return typeof l=="string"?(l=encodeURI(l).replace(h,P1),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function P1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var _p=/[#\/\?@]/g,j1=/[#\?:]/g,N1=/[#\?]/g,D1=/[#\?@]/g,V1=/#/g;function ws(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function kr(l){l.g||(l.g=new Map,l.h=0,l.i&&b1(l.i,function(h,f){l.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=ws.prototype,t.add=function(l,h){kr(this),this.i=null,l=si(this,l);let f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(h),this.h+=1,this};function wp(l,h){kr(l),h=si(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function xp(l,h){return kr(l),h=si(l,h),l.g.has(h)}t.forEach=function(l,h){kr(this),this.g.forEach(function(f,g){f.forEach(function(A){l.call(h,A,g,this)},this)},this)};function Ep(l,h){kr(l);let f=[];if(typeof h=="string")xp(l,h)&&(f=f.concat(l.g.get(si(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)f=f.concat(l[h]);return f}t.set=function(l,h){return kr(this),this.i=null,l=si(this,l),xp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=Ep(this,l),l.length>0?String(l[0]):h):h};function Tp(l,h,f){wp(l,h),f.length>0&&(l.i=null,l.g.set(si(l,h),R(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var f=h[g];const A=ps(f);f=Ep(this,f);for(let P=0;P<f.length;P++){let B=A;f[P]!==""&&(B+="="+ps(f[P])),l.push(B)}}return this.i=l.join("&")};function Ip(l){const h=new ws;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function si(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function L1(l,h){h&&!l.j&&(kr(l),l.i=null,l.g.forEach(function(f,g){const A=g.toLowerCase();g!=A&&(wp(this,g),Tp(this,A,f))},l)),l.j=h}function O1(l,h){const f=new fs;if(o.Image){const g=new Image;g.onload=p(Dn,f,"TestLoadImage: loaded",!0,h,g),g.onerror=p(Dn,f,"TestLoadImage: error",!1,h,g),g.onabort=p(Dn,f,"TestLoadImage: abort",!1,h,g),g.ontimeout=p(Dn,f,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else h(!1)}function M1(l,h){const f=new fs,g=new AbortController,A=setTimeout(()=>{g.abort(),Dn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:g.signal}).then(P=>{clearTimeout(A),P.ok?Dn(f,"TestPingServer: ok",!0,h):Dn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),Dn(f,"TestPingServer: error",!1,h)})}function Dn(l,h,f,g,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),g(f)}catch{}}function F1(){this.g=new x1}function Xc(l){this.i=l.Sb||null,this.h=l.ab||!1}m(Xc,ep),Xc.prototype.g=function(){return new na(this.i,this.h)};function na(l,h){Ye.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(na,Ye),t=na.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Es(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xs(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Sp(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Sp(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?xs(this):Es(this),this.readyState==3&&Sp(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,xs(this))},t.Na=function(l){this.g&&(this.response=l,xs(this))},t.ga=function(){this.g&&xs(this)};function xs(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Es(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=h.next();return l.join(`\r
`)};function Es(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Cp(l){let h="";return H(l,function(f,g){h+=g,h+=":",h+=f,h+=`\r
`}),h}function Jc(l,h,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Cp(f),typeof l=="string"?f!=null&&ps(f):ge(l,h,f))}function Se(l){Ye.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Se,Ye);var U1=/^https?$/i,B1=["POST","PUT"];t=Se.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ap.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(P){Rp(this,P);return}if(l=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var A in g)f.set(A,g[A]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const P of g.keys())f.set(P,g.get(P));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),A=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(B1,h,void 0)>=0)||g||A||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,B]of f)this.g.setRequestHeader(P,B);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(P){Rp(this,P)}};function Rp(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Ap(l),ra(l)}function Ap(l){l.A||(l.A=!0,st(l,"complete"),st(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,st(this,"complete"),st(this,"abort"),ra(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ra(this,!0)),Se.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?kp(this):this.Xa())},t.Xa=function(){kp(this)};function kp(l){if(l.h&&typeof s<"u"){if(l.v&&Vn(l)==4)setTimeout(l.Ca.bind(l),0);else if(st(l,"readystatechange"),Vn(l)==4){l.h=!1;try{const P=l.ca();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var g;if(g=P===0){let B=String(l.D).match(vp)[1]||null;!B&&o.self&&o.self.location&&(B=o.self.location.protocol.slice(0,-1)),g=!U1.test(B?B.toLowerCase():"")}f=g}if(f)st(l,"complete"),st(l,"success");else{l.o=6;try{var A=Vn(l)>2?l.g.statusText:""}catch{A=""}l.l=A+" ["+l.ca()+"]",Ap(l)}}finally{ra(l)}}}}function ra(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const f=l.g;l.g=null,h||st(l,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Vn(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Vn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),w1(h)}};function bp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function z1(l){const h={};l=(l.g&&Vn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(E(l[g]))continue;var f=C1(l[g]);const A=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const P=h[A]||[];h[A]=P,P.push(f)}J(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ts(l,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||h}function Pp(l){this.za=0,this.i=[],this.j=new fs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ts("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ts("baseRetryDelayMs",5e3,l),this.Za=Ts("retryDelaySeedMs",1e4,l),this.Ta=Ts("forwardChannelMaxRetries",2,l),this.va=Ts("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new fp(l&&l.concurrentRequestLimit),this.Ba=new F1,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Pp.prototype,t.ka=8,t.I=1,t.connect=function(l,h,f,g){ot(0),this.W=l,this.H=h||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=Up(this,null,this.W),sa(this)};function Zc(l){if(jp(l),l.I==3){var h=l.V++,f=Qt(l.J);if(ge(f,"SID",l.M),ge(f,"RID",h),ge(f,"TYPE","terminate"),Is(l,f),h=new jn(l,l.j,h),h.M=2,h.A=ta(Qt(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=h.A,f=!0),f||(h.g=Bp(h.j,null),h.g.ea(h.A)),h.F=Date.now(),ea(h)}Fp(l)}function ia(l){l.g&&(tu(l),l.g.cancel(),l.g=null)}function jp(l){ia(l),l.v&&(o.clearTimeout(l.v),l.v=null),oa(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function sa(l){if(!pp(l.h)&&!l.m){l.m=!0;var h=l.Ea;F||v(),U||(F(),U=!0),_.add(h,l),l.D=0}}function W1(l,h){return mp(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=ds(d(l.Ea,l,h),Mp(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const A=new jn(this,this.j,l);let P=this.o;if(this.U&&(P?(P=ue(P),Kt(P,this.U)):P=this.U),this.u!==null||this.R||(A.J=P,P=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Dp(this,A,h),f=Qt(this.J),ge(f,"RID",l),ge(f,"CVER",22),this.G&&ge(f,"X-HTTP-Session-Id",this.G),Is(this,f),P&&(this.R?h="headers="+ps(Cp(P))+"&"+h:this.u&&Jc(f,this.u,P)),Qc(this.h,A),this.Ra&&ge(f,"TYPE","init"),this.S?(ge(f,"$req",h),ge(f,"SID","null"),A.U=!0,$c(A,f,null)):$c(A,f,h),this.I=2}}else this.I==3&&(l?Np(this,l):this.i.length==0||pp(this.h)||Np(this))};function Np(l,h){var f;h?f=h.l:f=l.V++;const g=Qt(l.J);ge(g,"SID",l.M),ge(g,"RID",f),ge(g,"AID",l.K),Is(l,g),l.u&&l.o&&Jc(g,l.u,l.o),f=new jn(l,l.j,f,l.D+1),l.u===null&&(f.J=l.o),h&&(l.i=h.G.concat(l.i)),h=Dp(l,f,1e3),f.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Qc(l.h,f),$c(f,g,h)}function Is(l,h){l.H&&H(l.H,function(f,g){ge(h,g,f)}),l.l&&H({},function(f,g){ge(h,g,f)})}function Dp(l,h,f){f=Math.min(l.i.length,f);const g=l.l?d(l.l.Ka,l.l,l):null;e:{var A=l.i;let Z=-1;for(;;){const Ve=["count="+f];Z==-1?f>0?(Z=A[0].g,Ve.push("ofs="+Z)):Z=0:Ve.push("ofs="+Z);let de=!0;for(let Ue=0;Ue<f;Ue++){var P=A[Ue].g;const Yt=A[Ue].map;if(P-=Z,P<0)Z=Math.max(0,A[Ue].g-100),de=!1;else try{P="req"+P+"_"||"";try{var B=Yt instanceof Map?Yt:Object.entries(Yt);for(const[Pr,Ln]of B){let On=Ln;c(Ln)&&(On=Uc(Ln)),Ve.push(P+Pr+"="+encodeURIComponent(On))}}catch(Pr){throw Ve.push(P+"type="+encodeURIComponent("_badmap")),Pr}}catch{g&&g(Yt)}}if(de){B=Ve.join("&");break e}}B=void 0}return l=l.i.splice(0,f),h.G=l,B}function Vp(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;F||v(),U||(F(),U=!0),_.add(h,l),l.A=0}}function eu(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=ds(d(l.Da,l),Mp(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Lp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=ds(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),ia(this),Lp(this))};function tu(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Lp(l){l.g=new jn(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=Qt(l.na);ge(h,"RID","rpc"),ge(h,"SID",l.M),ge(h,"AID",l.K),ge(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&ge(h,"TO",l.ia),ge(h,"TYPE","xmlhttp"),Is(l,h),l.u&&l.o&&Jc(h,l.u,l.o),l.O&&(l.g.H=l.O);var f=l.g;l=l.ba,f.M=1,f.A=ta(Qt(h)),f.u=null,f.R=!0,up(f,l)}t.Va=function(){this.C!=null&&(this.C=null,ia(this),eu(this),ot(19))};function oa(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Op(l,h){var f=null;if(l.g==h){oa(l),tu(l),l.g=null;var g=2}else if(Kc(l.h,h))f=h.G,gp(l.h,h),g=1;else return;if(l.I!=0){if(h.o)if(g==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var A=l.D;g=Jo(),st(g,new sp(g,f)),sa(l)}else Vp(l);else if(A=h.m,A==3||A==0&&h.X>0||!(g==1&&W1(l,h)||g==2&&eu(l)))switch(f&&f.length>0&&(h=l.h,h.i=h.i.concat(f)),A){case 1:br(l,5);break;case 4:br(l,10);break;case 3:br(l,6);break;default:br(l,2)}}}function Mp(l,h){let f=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(f*=2),f*h}function br(l,h){if(l.j.info("Error code "+h),h==2){var f=d(l.bb,l),g=l.Ua;const A=!g;g=new Nn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||gs(g,"https"),ta(g),A?O1(g.toString(),f):M1(g.toString(),f)}else ot(2);l.I=0,l.l&&l.l.pa(h),Fp(l),jp(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Fp(l){if(l.I=0,l.ja=[],l.l){const h=yp(l.h);(h.length!=0||l.i.length!=0)&&(b(l.ja,h),b(l.ja,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.oa()}}function Up(l,h,f){var g=f instanceof Nn?Qt(f):new Nn(f);if(g.g!="")h&&(g.g=h+"."+g.g),ys(g,g.u);else{var A=o.location;g=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;const P=new Nn(null);g&&gs(P,g),h&&(P.g=h),A&&ys(P,A),f&&(P.h=f),g=P}return f=l.G,h=l.wa,f&&h&&ge(g,f,h),ge(g,"VER",l.ka),Is(l,g),g}function Bp(l,h,f){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Se(new Xc({ab:f})):new Se(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zp(){}t=zp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function aa(){}aa.prototype.g=function(l,h){return new _t(l,h)};function _t(l,h){Ye.call(this),this.g=new Pp(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!E(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new oi(this)}m(_t,Ye),_t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_t.prototype.close=function(){Zc(this.g)},_t.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.v&&(f={},f.__data__=Uc(l),l=f);h.i.push(new k1(h.Ya++,l)),h.I==3&&sa(h)},_t.prototype.N=function(){this.g.l=null,delete this.j,Zc(this.g),delete this.g,_t.Z.N.call(this)};function Wp(l){Bc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const f in h){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}m(Wp,Bc);function qp(){zc.call(this),this.status=1}m(qp,zc);function oi(l){this.g=l}m(oi,zp),oi.prototype.ra=function(){st(this.g,"a")},oi.prototype.qa=function(l){st(this.g,new Wp(l))},oi.prototype.pa=function(l){st(this.g,new qp)},oi.prototype.oa=function(){st(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,_t.prototype.send=_t.prototype.o,_t.prototype.open=_t.prototype.m,_t.prototype.close=_t.prototype.close,B_=function(){return new aa},U_=function(){return Jo()},F_=Rr,Wh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zo.NO_ERROR=0,Zo.TIMEOUT=8,Zo.HTTP_ERROR=6,Qa=Zo,op.COMPLETE="complete",M_=op,tp.EventType=us,us.OPEN="a",us.CLOSE="b",us.ERROR="c",us.MESSAGE="d",Ye.prototype.listen=Ye.prototype.J,Bs=tp,Se.prototype.listenOnce=Se.prototype.K,Se.prototype.getLastError=Se.prototype.Ha,Se.prototype.getLastErrorCode=Se.prototype.ya,Se.prototype.getStatus=Se.prototype.ca,Se.prototype.getResponseJson=Se.prototype.La,Se.prototype.getResponseText=Se.prototype.la,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Fa,O_=Se}).apply(typeof Ra<"u"?Ra:typeof self<"u"?self:typeof window<"u"?window:{});const bg="@firebase/firestore",Pg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rs="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new tf("@firebase/firestore");function ci(){return Xr.logLevel}function q(t,...e){if(Xr.logLevel<=re.DEBUG){const n=e.map(pf);Xr.debug(`Firestore (${rs}): ${t}`,...n)}}function Cn(t,...e){if(Xr.logLevel<=re.ERROR){const n=e.map(pf);Xr.error(`Firestore (${rs}): ${t}`,...n)}}function Hi(t,...e){if(Xr.logLevel<=re.WARN){const n=e.map(pf);Xr.warn(`Firestore (${rs}): ${t}`,...n)}}function pf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,z_(t,r,n)}function z_(t,e,n){let r=`FIRESTORE (${rs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Cn(r),new Error(r)}function ce(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||z_(e,i,r)}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(et.UNAUTHENTICATED))}shutdown(){}}class vR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _R{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new lr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new lr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new W_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new et(e)}}class wR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ER{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0,3512);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=TR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function qh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Ou(i)===Ou(s)?ie(i,s):Ou(i)?1:-1}return ie(t.length,e.length)}const IR=55296,SR=57343;function Ou(t){const e=t.charCodeAt(0);return e>=IR&&e<=SR}function Gi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="__name__";class en{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return en.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof en?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=en.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ie(e.length,n.length)}static compareSegments(e,n){const r=en.isNumericId(e),i=en.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?en.extractNumericId(e).compare(en.extractNumericId(n)):qh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ar.fromString(e.substring(4,e.length-2))}}class pe extends en{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const CR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends en{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return CR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ng}static keyField(){return new He([Ng])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new W(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new W(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(pe.fromString(e))}static fromName(e){return new K(pe.fromString(e).popFirst(5))}static empty(){return new K(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t,e,n){if(!n)throw new W(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RR(t,e,n,r){if(e===!0&&r===!0)throw new W(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dg(t){if(!K.isDocumentKey(t))throw new W(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Vg(t){if(K.isDocumentKey(t))throw new W(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function yc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function dr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yc(t);throw new W(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t,e){const n={typeString:t};return e&&(n.value=e),n}function zo(t,e){if(!$_(t))throw new W(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new W(D.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg=-62135596800,Og=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Og);return new ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Lg)throw new W(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Og}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zo(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:De("string",ve._jsonSchemaVersion),seconds:De("number"),nanoseconds:De("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{static fromTimestamp(e){return new Y(e)}static min(){return new Y(new ve(0,0))}static max(){return new Y(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=-1;function AR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new fr(i,K.empty(),e)}function kR(t){return new fr(t.readTime,t.key,Co)}class fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fr(Y.min(),K.empty(),Co)}static max(){return new fr(Y.max(),K.empty(),Co)}}function bR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function is(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==PR)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++c,c===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new V((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function NR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ss(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=-1;function _c(t){return t==null}function Ol(t){return t===0&&1/t==-1/0}function DR(t){return typeof t=="number"&&Number.isInteger(t)&&!Ol(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="";function VR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Mg(e)),e=LR(t.get(n),e);return Mg(e)}function LR(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case H_:n+="";break;default:n+=s}}return n}function Mg(t){return t+H_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ir(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function G_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||$e.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$e.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$e.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Aa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Aa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Aa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Aa(this.root,e,this.comparator,!0)}}class Aa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $e{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??$e.RED,this.left=i??$e.EMPTY,this.right=s??$e.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $e(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $e.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}$e.EMPTY=null,$e.RED=!0,$e.BLACK=!1;$e.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new $e(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ug(this.data.getIterator())}getIteratorFrom(e){return new Ug(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class Ug{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new Tt([])}unionWith(e){let n=new Fe(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Tt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new K_("Invalid base64 string: "+s):s}}(e);return new Qe(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const OR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(t){if(ce(!!t,39018),typeof t=="string"){let e=0;const n=OR.exec(t);if(ce(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mr(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="server_timestamp",Y_="__type__",X_="__previous_value__",J_="__local_write_time__";function yf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Y_])==null?void 0:r.stringValue)===Q_}function wc(t){const e=t.mapValue.fields[X_];return yf(e)?wc(e):e}function Ro(t){const e=pr(t.mapValue.fields[J_].timestampValue);return new ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,r,i,s,o,c,u,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=p}}const Ml="(default)";class Ao{constructor(e,n){this.projectId=e,this.database=n||Ml}static empty(){return new Ao("","")}get isDefaultDatabase(){return this.database===Ml}isEqual(e){return e instanceof Ao&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="__type__",ew="__max__",ka={mapValue:{fields:{__type__:{stringValue:ew}}}},tw="__vector__",Fl="value";function gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yf(t)?4:UR(t)?9007199254740991:FR(t)?10:11:Q(28295,{value:t})}function un(t,e){if(t===e)return!0;const n=gr(t);if(n!==gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ro(t).isEqual(Ro(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=pr(i.timestampValue),c=pr(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return mr(i.bytesValue).isEqual(mr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Re(i.geoPointValue.latitude)===Re(s.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Re(i.integerValue)===Re(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Re(i.doubleValue),c=Re(s.doubleValue);return o===c?Ol(o)===Ol(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Gi(t.arrayValue.values||[],e.arrayValue.values||[],un);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Fg(o)!==Fg(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!un(o[u],c[u])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function ko(t,e){return(t.values||[]).find(n=>un(n,e))!==void 0}function Ki(t,e){if(t===e)return 0;const n=gr(t),r=gr(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=Re(s.integerValue||s.doubleValue),u=Re(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Bg(t.timestampValue,e.timestampValue);case 4:return Bg(Ro(t),Ro(e));case 5:return qh(t.stringValue,e.stringValue);case 6:return function(s,o){const c=mr(s),u=mr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const p=ie(c[d],u[d]);if(p!==0)return p}return ie(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=ie(Re(s.latitude),Re(o.latitude));return c!==0?c:ie(Re(s.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var y,R,b,N;const c=s.fields||{},u=o.fields||{},d=(y=c[Fl])==null?void 0:y.arrayValue,p=(R=u[Fl])==null?void 0:R.arrayValue,m=ie(((b=d==null?void 0:d.values)==null?void 0:b.length)||0,((N=p==null?void 0:p.values)==null?void 0:N.length)||0);return m!==0?m:zg(d,p)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ka.mapValue&&o===ka.mapValue)return 0;if(s===ka.mapValue)return 1;if(o===ka.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const y=qh(u[m],p[m]);if(y!==0)return y;const R=Ki(c[u[m]],d[p[m]]);if(R!==0)return R}return ie(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function Bg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=pr(t),r=pr(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function zg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ki(n[i],r[i]);if(s)return s}return ie(n.length,r.length)}function Qi(t){return $h(t)}function $h(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=pr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=$h(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$h(n.fields[o])}`;return i+"}"}(t.mapValue):Q(61005,{value:t})}function Ya(t){switch(gr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wc(t);return e?16+Ya(e):16;case 5:return 2*t.stringValue.length;case 6:return mr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Ya(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ir(r.fields,(s,o)=>{i+=s.length+Ya(o)}),i}(t.mapValue);default:throw Q(13486,{value:t})}}function Wg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hh(t){return!!t&&"integerValue"in t}function vf(t){return!!t&&"arrayValue"in t}function qg(t){return!!t&&"nullValue"in t}function $g(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xa(t){return!!t&&"mapValue"in t}function FR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Z_])==null?void 0:r.stringValue)===tw}function to(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ir(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=to(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=to(t.arrayValue.values[n]);return e}return{...t}}function UR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ew}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.value=e}static empty(){return new ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=to(n)}setAll(e){let n=He.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=to(o):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Xa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ir(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ft(to(this.value))}}function nw(t){const e=[];return Ir(t.fields,(n,r)=>{const i=new He([n]);if(Xa(r)){const s=nw(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Tt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new nt(e,0,Y.min(),Y.min(),Y.min(),ft.empty(),0)}static newFoundDocument(e,n,r,i){return new nt(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new nt(e,2,n,Y.min(),Y.min(),ft.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,Y.min(),Y.min(),ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n){this.position=e,this.inclusive=n}}function Hg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Ki(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n="asc"){this.field=e,this.dir=n}}function BR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{}class Ne extends rw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new WR(e,n,r):n==="array-contains"?new HR(e,r):n==="in"?new GR(e,r):n==="not-in"?new KR(e,r):n==="array-contains-any"?new QR(e,r):new Ne(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new qR(e,r):new $R(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ki(n,this.value)):n!==null&&gr(this.value)===gr(n)&&this.matchesComparison(Ki(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gt extends rw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Gt(e,n)}matches(e){return iw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iw(t){return t.op==="and"}function sw(t){return zR(t)&&iw(t)}function zR(t){for(const e of t.filters)if(e instanceof Gt)return!1;return!0}function Gh(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+Qi(t.value);if(sw(t))return t.filters.map(e=>Gh(e)).join(",");{const e=t.filters.map(n=>Gh(n)).join(",");return`${t.op}(${e})`}}function ow(t,e){return t instanceof Ne?function(r,i){return i instanceof Ne&&r.op===i.op&&r.field.isEqual(i.field)&&un(r.value,i.value)}(t,e):t instanceof Gt?function(r,i){return i instanceof Gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&ow(o,i.filters[c]),!0):!1}(t,e):void Q(19439)}function aw(t){return t instanceof Ne?function(n){return`${n.field.canonicalString()} ${n.op} ${Qi(n.value)}`}(t):t instanceof Gt?function(n){return n.op.toString()+" {"+n.getFilters().map(aw).join(" ,")+"}"}(t):"Filter"}class WR extends Ne{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class qR extends Ne{constructor(e,n){super(e,"in",n),this.keys=lw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $R extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=lw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lw(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class HR extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vf(n)&&ko(n.arrayValue,this.value)}}class GR extends Ne{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ko(this.value.arrayValue,n)}}class KR extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(ko(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ko(this.value.arrayValue,n)}}class QR extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ko(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.Te=null}}function Kg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new YR(t,e,n,r,i,s,o)}function _f(t){const e=X(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_c(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qi(r)).join(",")),e.Te=n}return e.Te}function wf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!BR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ow(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gg(t.startAt,e.startAt)&&Gg(t.endAt,e.endAt)}function Kh(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XR(t,e,n,r,i,s,o,c){return new Wo(t,e,n,r,i,s,o,c)}function cw(t){return new Wo(t)}function Qg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uw(t){return t.collectionGroup!==null}function no(t){const e=X(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Fe(He.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Bl(s,r))}),n.has(He.keyField().canonicalString())||e.Ie.push(new Bl(He.keyField(),r))}return e.Ie}function on(t){const e=X(t);return e.Ee||(e.Ee=JR(e,no(t))),e.Ee}function JR(t,e){if(t.limitType==="F")return Kg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Bl(i.field,s)});const n=t.endAt?new Ul(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ul(t.startAt.position,t.startAt.inclusive):null;return Kg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qh(t,e){const n=t.filters.concat([e]);return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yh(t,e,n){return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xc(t,e){return wf(on(t),on(e))&&t.limitType===e.limitType}function hw(t){return`${_f(on(t))}|lt:${t.limitType}`}function ui(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>aw(i)).join(", ")}]`),_c(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Qi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Qi(i)).join(",")),`Target(${r})`}(on(t))}; limitType=${t.limitType})`}function Ec(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of no(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const d=Hg(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,no(r),i)||r.endAt&&!function(o,c,u){const d=Hg(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,no(r),i))}(t,e)}function ZR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dw(t){return(e,n)=>{let r=!1;for(const i of no(t)){const s=eA(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function eA(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,c){const u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Ki(u,d):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ir(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return G_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=new Ie(K.comparator);function Rn(){return tA}const fw=new Ie(K.comparator);function zs(...t){let e=fw;for(const n of t)e=e.insert(n.key,n);return e}function pw(t){let e=fw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ur(){return ro()}function mw(){return ro()}function ro(){return new ni(t=>t.toString(),(t,e)=>t.isEqual(e))}const nA=new Ie(K.comparator),rA=new Fe(K.comparator);function se(...t){let e=rA;for(const n of t)e=e.add(n);return e}const iA=new Fe(ie);function sA(){return iA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ol(e)?"-0":e}}function gw(t){return{integerValue:""+t}}function oA(t,e){return DR(e)?gw(e):xf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(){this._=void 0}}function aA(t,e,n){return t instanceof zl?function(i,s){const o={fields:{[Y_]:{stringValue:Q_},[J_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yf(s)&&(s=wc(s)),s&&(o.fields[X_]=s),{mapValue:o}}(n,e):t instanceof bo?vw(t,e):t instanceof Po?_w(t,e):function(i,s){const o=yw(i,s),c=Yg(o)+Yg(i.Ae);return Hh(o)&&Hh(i.Ae)?gw(c):xf(i.serializer,c)}(t,e)}function lA(t,e,n){return t instanceof bo?vw(t,e):t instanceof Po?_w(t,e):n}function yw(t,e){return t instanceof Wl?function(r){return Hh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class zl extends Tc{}class bo extends Tc{constructor(e){super(),this.elements=e}}function vw(t,e){const n=ww(e);for(const r of t.elements)n.some(i=>un(i,r))||n.push(r);return{arrayValue:{values:n}}}class Po extends Tc{constructor(e){super(),this.elements=e}}function _w(t,e){let n=ww(e);for(const r of t.elements)n=n.filter(i=>!un(i,r));return{arrayValue:{values:n}}}class Wl extends Tc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Yg(t){return Re(t.integerValue||t.doubleValue)}function ww(t){return vf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function cA(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof bo&&i instanceof bo||r instanceof Po&&i instanceof Po?Gi(r.elements,i.elements,un):r instanceof Wl&&i instanceof Wl?un(r.Ae,i.Ae):r instanceof zl&&i instanceof zl}(t.transform,e.transform)}class uA{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ja(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ic{}function xw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sc(t.key,vt.none()):new qo(t.key,t.data,vt.none());{const n=t.data,r=ft.empty();let i=new Fe(He.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Sr(t.key,r,new Tt(i.toArray()),vt.none())}}function hA(t,e,n){t instanceof qo?function(i,s,o){const c=i.value.clone(),u=Jg(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Sr?function(i,s,o){if(!Ja(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=Jg(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Ew(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function io(t,e,n,r){return t instanceof qo?function(s,o,c,u){if(!Ja(s.precondition,o))return c;const d=s.value.clone(),p=Zg(s.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Sr?function(s,o,c,u){if(!Ja(s.precondition,o))return c;const d=Zg(s.fieldTransforms,u,o),p=o.data;return p.setAll(Ew(s)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,c){return Ja(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function dA(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=yw(r.transform,i||null);s!=null&&(n===null&&(n=ft.empty()),n.set(r.field,s))}return n||null}function Xg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gi(r,i,(s,o)=>cA(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qo extends Ic{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Sr extends Ic{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ew(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Jg(t,e,n){const r=new Map;ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,lA(o,c,n[i]))}return r}function Zg(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,aA(s,o,e))}return r}class Sc extends Ic{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fA extends Ic{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&hA(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=io(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=io(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=mw();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;const u=xw(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,(n,r)=>Xg(n,r))&&Gi(this.baseMutations,e.baseMutations,(n,r)=>Xg(n,r))}}class Ef{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return nA}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ef(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe,oe;function yA(t){switch(t){case D.OK:return Q(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function Tw(t){if(t===void 0)return Cn("GRPC error has no .code"),D.UNKNOWN;switch(t){case Pe.OK:return D.OK;case Pe.CANCELLED:return D.CANCELLED;case Pe.UNKNOWN:return D.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return D.INTERNAL;case Pe.UNAVAILABLE:return D.UNAVAILABLE;case Pe.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Pe.NOT_FOUND:return D.NOT_FOUND;case Pe.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Pe.ABORTED:return D.ABORTED;case Pe.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Pe.DATA_LOSS:return D.DATA_LOSS;default:return Q(39323,{code:t})}}(oe=Pe||(Pe={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=new ar([4294967295,4294967295],0);function ey(t){const e=vA().encode(t),n=new L_;return n.update(e),new Uint8Array(n.digest())}function ty(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ar([n,r],0),new ar([i,s],0)]}class Tf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ws(`Invalid padding: ${n}`);if(r<0)throw new Ws(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ws(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ws(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ar.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ar.fromNumber(r)));return i.compare(_A)===1&&(i=new ar([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ey(e),[r,i]=ty(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Tf(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=ey(e),[r,i]=ty(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ws extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,$o.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cc(Y.min(),i,new Ie(ie),Rn(),se())}}class $o{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $o(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Iw{constructor(e,n){this.targetId=e,this.Ce=n}}class Sw{constructor(e,n,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ny{constructor(){this.ve=0,this.Fe=ry(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:s})}}),new $o(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ry()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rn(),this.Je=ba(),this.He=ba(),this.Ye=new Ie(ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Kh(s))if(r===0){const o=new K(s.path);this.et(n,o,nt.newNoDocument(o,Y.min()))}else ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,c;try{o=mr(r).toUint8Array()}catch(u){if(u instanceof K_)return Hi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Tf(o,i,s)}catch(u){return Hi(u instanceof Ws?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const c=this.ot(o);if(c){if(s.current&&Kh(c.target)){const u=new K(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,nt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=se();this.He.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Cc(e,n,this.Ye,this.je,r);return this.je=Rn(),this.Je=ba(),this.He=ba(),this.Ye=new Ie(ie),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ny,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fe(ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fe(ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ny),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ba(){return new Ie(K.comparator)}function ry(){return new Ie(K.comparator)}const xA=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),EA=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),TA=(()=>({and:"AND",or:"OR"}))();class IA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xh(t,e){return t.useProto3Json||_c(e)?e:{value:e}}function ql(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SA(t,e){return ql(t,e.toTimestamp())}function an(t){return ce(!!t,49232),Y.fromTimestamp(function(n){const r=pr(n);return new ve(r.seconds,r.nanos)}(t))}function If(t,e){return Jh(t,e).canonicalString()}function Jh(t,e){const n=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Rw(t){const e=pe.fromString(t);return ce(jw(e),10190,{key:e.toString()}),e}function Zh(t,e){return If(t.databaseId,e.path)}function Mu(t,e){const n=Rw(e);if(n.get(1)!==t.databaseId.projectId)throw new W(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(kw(n))}function Aw(t,e){return If(t.databaseId,e)}function CA(t){const e=Rw(t);return e.length===4?pe.emptyPath():kw(e)}function ed(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kw(t){return ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function iy(t,e,n){return{name:Zh(t,e),fields:n.value.mapValue.fields}}function RA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(ce(p===void 0||typeof p=="string",58123),Qe.fromBase64String(p||"")):(ce(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Qe.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const p=d.code===void 0?D.UNKNOWN:Tw(d.code);return new W(p,d.message||"")}(o);n=new Sw(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Mu(t,r.document.name),s=an(r.document.updateTime),o=r.document.createTime?an(r.document.createTime):Y.min(),c=new ft({mapValue:{fields:r.document.fields}}),u=nt.newFoundDocument(i,s,o,c),d=r.targetIds||[],p=r.removedTargetIds||[];n=new Za(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Mu(t,r.document),s=r.readTime?an(r.readTime):Y.min(),o=nt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new Za([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Mu(t,r.document),s=r.removedTargetIds||[];n=new Za([],s,i,null)}else{if(!("filter"in e))return Q(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new gA(i,s),c=r.targetId;n=new Iw(c,o)}}return n}function AA(t,e){let n;if(e instanceof qo)n={update:iy(t,e.key,e.value)};else if(e instanceof Sc)n={delete:Zh(t,e.key)};else if(e instanceof Sr)n={update:iy(t,e.key,e.data),updateMask:OA(e.fieldMask)};else{if(!(e instanceof fA))return Q(16599,{Vt:e.type});n={verify:Zh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const c=o.transform;if(c instanceof zl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof bo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Po)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wl)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Q(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:SA(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(t,e.precondition)),n}function kA(t,e){return t&&t.length>0?(ce(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?an(i.updateTime):an(s);return o.isEqual(Y.min())&&(o=an(s)),new uA(o,i.transformResults||[])}(n,e))):[]}function bA(t,e){return{documents:[Aw(t,e.path)]}}function PA(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Aw(t,i);const s=function(d){if(d.length!==0)return Pw(Gt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(p=>function(y){return{field:hi(y.field),direction:DA(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Xh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function jA(t){let e=CA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ce(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const y=bw(m);return y instanceof Gt&&sw(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(b){return new Bl(di(b.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(m){let y;return y=typeof m=="object"?m.value:m,_c(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(m){const y=!!m.before,R=m.values||[];return new Ul(R,y)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const y=!m.before,R=m.values||[];return new Ul(R,y)}(n.endAt)),XR(e,i,o,s,c,"F",u,d)}function NA(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=di(n.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=di(n.unaryFilter.field);return Ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=di(n.unaryFilter.field);return Ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=di(n.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ne.create(di(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gt.create(n.compositeFilter.filters.map(r=>bw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function DA(t){return xA[t]}function VA(t){return EA[t]}function LA(t){return TA[t]}function hi(t){return{fieldPath:t.canonicalString()}}function di(t){return He.fromServerFormat(t.fieldPath)}function Pw(t){return t instanceof Ne?function(n){if(n.op==="=="){if($g(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NAN"}};if(qg(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($g(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NOT_NAN"}};if(qg(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hi(n.field),op:VA(n.op),value:n.value}}}(t):t instanceof Gt?function(n){const r=n.getFilters().map(i=>Pw(i));return r.length===1?r[0]:{compositeFilter:{op:LA(n.op),filters:r}}}(t):Q(54877,{filter:t})}function OA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n,r,i,s=Y.min(),o=Y.min(),c=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.yt=e}}function FA(t){const e=jA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.Cn=new BA}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(fr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class BA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fe(pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nw=41943040;class ht{static withCacheSize(e){return new ht(e,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ht.DEFAULT_COLLECTION_PERCENTILE=10,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ht.DEFAULT=new ht(Nw,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ht.DISABLED=new ht(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yi(0)}static cr(){return new Yi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="LruGarbageCollector",zA=1048576;function ay([t,e],[n,r]){const i=ie(t,n);return i===0?ie(e,r):i}class WA{constructor(e){this.Ir=e,this.buffer=new Fe(ay),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ay(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(oy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ss(n)?q(oy,"Ignoring IndexedDB error during garbage collection: ",n):await is(n)}await this.Vr(3e5)})}}class $A{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(vc.ce);const r=new WA(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(sy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sy):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,c,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),ci()<=re.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-p}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function HA(t,e){return new $A(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.changes=new ni(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&io(r.mutation,i,Tt.empty(),ve.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=Ur();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=zs();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ur();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=Rn();const o=ro(),c=function(){return ro()}();return n.forEach((u,d)=>{const p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Sr)?s=s.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),io(p.mutation,d,p.mutation.getFieldMask(),ve.now())):o.set(d.key,Tt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>c.set(d,new KA(p,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=ro();let i=new Ie((o,c)=>o-c),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||Tt.empty();p=c.applyToLocalView(d,p),r.set(u,p);const m=(i.get(c.batchId)||se()).add(u);i=i.insert(c.batchId,m)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,p=u.value,m=mw();p.forEach(y=>{if(!s.has(y)){const R=xw(n.get(y),r.get(y));R!==null&&m.set(y,R),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):V.resolve(Ur());let c=Co,u=s;return o.next(d=>V.forEach(d,(p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(p)?V.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,se())).next(p=>({batchId:c,changes:pw(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=zs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=zs();return this.indexManager.getCollectionParents(e,s).next(c=>V.forEach(c,u=>{const d=function(m,y){return new Wo(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,nt.newInvalidDocument(p)))});let c=zs();return o.forEach((u,d)=>{const p=s.get(u);p!==void 0&&io(p.mutation,d,Tt.empty(),ve.now()),Ec(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:an(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:FA(i.bundledQuery),readTime:an(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.overlays=new Ie(K.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ur();return V.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=Ur(),s=n.length+1,o=new K(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ie((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Ur(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=Ur(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return V.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new mA(n,r));let s=this.qr.get(n);s===void 0&&(s=se(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(){this.Qr=new Fe(Be.$r),this.Ur=new Fe(Be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Be(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new K(new pe([])),r=new Be(n,e),i=new Be(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new K(new pe([])),r=new Be(n,e),i=new Be(n,e+1);let s=se();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Be(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||ie(e.Yr,n.Yr)}static Kr(e,n){return ie(e.Yr,n.Yr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fe(Be.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new pA(s,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Be(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?gf:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),i=new Be(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const c=this.Xr(o.Yr);s.push(c)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(ie);return n.forEach(i=>{const s=new Be(i,0),o=new Be(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],c=>{r=r.add(c.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new Be(new K(s),0);let c=new Fe(ie);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)},o),V.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,i=>{const s=new Be(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Be(n,0),i=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.ri=e,this.docs=function(){return new Ie(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():nt.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Rn();const o=n.path,c=new K(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||bR(kR(p),r)<=0||(i.has(p.key)||Ec(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tk(this)}getSize(e){return V.resolve(this.size)}}class tk extends GA{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.persistence=e,this.si=new ni(n=>_f(n),wf),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.oi=0,this._i=new Sf,this.targetCount=0,this.ai=Yi.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Yi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n){this.ui={},this.overlays={},this.ci=new vc(0),this.li=!1,this.li=!0,this.hi=new JA,this.referenceDelegate=e(this),this.Pi=new nk(this),this.indexManager=new UA,this.remoteDocumentCache=function(i){return new ek(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new MA(n),this.Ii=new YA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new ZA(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new rk(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class rk extends jR{constructor(e){super(),this.currentSequenceNumber=e}}class Cf{constructor(e){this.persistence=e,this.Ri=new Sf,this.Vi=null}static mi(e){return new Cf(e)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const i=K.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class $l{constructor(e,n){this.persistence=e,this.pi=new ni(r=>VR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=HA(this,n)}static mi(e,n){return new $l(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?V.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,s.removeEntry(o,Y.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ya(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Rf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return VT()?8:NR(it())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new ik;return this.Ss(e,n,o).next(c=>{if(s.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ci()<=re.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ui(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(ci()<=re.DEBUG&&q("QueryEngine","Query:",ui(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ci()<=re.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ui(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(n))):V.resolve())}ys(e,n){if(Qg(n))return V.resolve(null);let r=on(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yh(n,null,"F"),r=on(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,Yh(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,i){return Qg(n)||i.isEqual(Y.min())?V.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?V.resolve(null):(ci()<=re.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ui(n)),this.vs(e,o,n,AR(i,Co)).next(c=>c))})}Ds(e,n){let r=new Fe(dw(e));return n.forEach((i,s)=>{Ec(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return ci()<=re.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ui(n)),this.ps.getDocumentsMatchingQuery(e,n,fr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="LocalStore",ok=3e8;class ak{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ie(ie),this.xs=new ni(s=>_f(s),wf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function lk(t,e,n,r){return new ak(t,e,n,r)}async function Vw(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let u=se();for(const d of i){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of s){c.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function ck(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,p){const m=d.batch,y=m.keys();let R=V.resolve();return y.forEach(b=>{R=R.next(()=>p.getEntry(u,b)).next(N=>{const L=d.docVersions.get(b);ce(L!==null,48541),N.version.compareTo(L)<0&&(m.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),p.addEntry(N)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=se();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Lw(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function uk(t,e){const n=X(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach((p,m)=>{const y=i.get(m);if(!y)return;c.push(n.Pi.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(s,p.addedDocuments,m)));let R=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?R=R.withResumeToken(Qe.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):p.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(p.resumeToken,r)),i=i.insert(m,R),function(N,L,S){return N.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=ok?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(y,R,p)&&c.push(n.Pi.updateTargetData(s,R))});let u=Rn(),d=se();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(hk(s,o,e.documentUpdates).next(p=>{u=p.ks,d=p.qs})),!r.isEqual(Y.min())){const p=n.Pi.getLastRemoteSnapshotVersion(s).next(m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return V.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.Ms=i,s))}function hk(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Rn();return n.forEach((c,u)=>{const d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):q(Af,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:i}})}function dk(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fk(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Qn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function td(t,e,n){const r=X(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ss(o))throw o;q(Af,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function ly(t,e,n){const r=X(t);let i=Y.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const m=X(u),y=m.xs.get(p);return y!==void 0?V.resolve(m.Ms.get(y)):m.Pi.getTargetData(d,p)}(r,o,on(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:se())).next(c=>(pk(r,ZR(e),c),{documents:c,Qs:s})))}function pk(t,e,n){let r=t.Os.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class cy{constructor(){this.activeTargetIds=sA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mk{constructor(){this.Mo=new cy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new cy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="ConnectivityMonitor";class hy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(uy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(uy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa=null;function nd(){return Pa===null?Pa=function(){return 268435456+Math.round(2147483648*Math.random())}():Pa++,"0x"+Pa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu="RestConnection",yk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ml?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=nd(),c=this.zo(e,n.toUriEncodedString());q(Fu,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:d}=new URL(c),p=ts(d);return this.Jo(e,c,u,r,p).then(m=>(q(Fu,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Hi(Fu,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=yk[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class wk extends vk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=nd();return new Promise((c,u)=>{const d=new O_;d.setWithCredentials(!0),d.listenOnce(M_.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Qa.NO_ERROR:const m=d.getResponseJson();q(Ze,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case Qa.TIMEOUT:q(Ze,`RPC '${e}' ${o} timed out`),u(new W(D.DEADLINE_EXCEEDED,"Request time out"));break;case Qa.HTTP_ERROR:const y=d.getStatus();if(q(Ze,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let R=d.getResponseJson();Array.isArray(R)&&(R=R[0]);const b=R==null?void 0:R.error;if(b&&b.status&&b.message){const N=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(w)>=0?w:D.UNKNOWN}(b.status);u(new W(N,b.message))}else u(new W(D.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new W(D.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{q(Ze,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);q(Ze,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",p,r,15)})}T_(e,n,r){const i=nd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=B_(),c=U_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");q(Ze,`Creating RPC '${e}' stream ${i}: ${p}`,u);const m=o.createWebChannel(p,u);this.I_(m);let y=!1,R=!1;const b=new _k({Yo:L=>{R?q(Ze,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(y||(q(Ze,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),q(Ze,`RPC '${e}' stream ${i} sending:`,L),m.send(L))},Zo:()=>m.close()}),N=(L,S,w)=>{L.listen(S,T=>{try{w(T)}catch(j){setTimeout(()=>{throw j},0)}})};return N(m,Bs.EventType.OPEN,()=>{R||(q(Ze,`RPC '${e}' stream ${i} transport opened.`),b.o_())}),N(m,Bs.EventType.CLOSE,()=>{R||(R=!0,q(Ze,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(m))}),N(m,Bs.EventType.ERROR,L=>{R||(R=!0,Hi(Ze,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),b.a_(new W(D.UNAVAILABLE,"The operation could not be completed")))}),N(m,Bs.EventType.MESSAGE,L=>{var S;if(!R){const w=L.data[0];ce(!!w,16349);const T=w,j=(T==null?void 0:T.error)||((S=T[0])==null?void 0:S.error);if(j){q(Ze,`RPC '${e}' stream ${i} received error:`,j);const F=j.status;let U=function(x){const I=Pe[x];if(I!==void 0)return Tw(I)}(F),_=j.message;U===void 0&&(U=D.INTERNAL,_="Unknown error status: "+F+" with message "+j.message),R=!0,b.a_(new W(U,_)),m.close()}else q(Ze,`RPC '${e}' stream ${i} received:`,w),b.u_(w)}}),N(c,F_.STAT_EVENT,L=>{L.stat===Wh.PROXY?q(Ze,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===Wh.NOPROXY&&q(Ze,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Uu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t){return new IA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="PersistentStream";class Mw{constructor(e,n,r,i,s,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ow(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(Cn(n.toString()),Cn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new W(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(dy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(q(dy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xk extends Mw{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=RA(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?an(o.readTime):Y.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ed(this.serializer),n.addTarget=function(s,o){let c;const u=o.target;if(c=Kh(u)?{documents:bA(s,u)}:{query:PA(s,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Cw(s,o.resumeToken);const d=Xh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=ql(s,o.snapshotVersion.toTimestamp());const d=Xh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=NA(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ed(this.serializer),n.removeTarget=e,this.q_(n)}}class Ek extends Mw{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kA(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ed(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>AA(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{}class Ik extends Tk{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new W(D.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Jh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(D.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,Jh(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(D.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Sk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cn(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="RemoteStore";class Ck{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ri(this)&&(q(Jr,"Restarting streams for network reachability change."),await async function(u){const d=X(u);d.Ea.add(4),await Ho(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Ac(d)}(this))})}),this.Ra=new Sk(r,i)}}async function Ac(t){if(ri(t))for(const e of t.da)await e(!0)}async function Ho(t){for(const e of t.da)await e(!1)}function Fw(t,e){const n=X(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),jf(n)?Pf(n):os(n).O_()&&bf(n,e))}function kf(t,e){const n=X(t),r=os(n);n.Ia.delete(e),r.O_()&&Uw(n,e),n.Ia.size===0&&(r.O_()?r.L_():ri(n)&&n.Ra.set("Unknown"))}function bf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}os(t).Y_(e)}function Uw(t,e){t.Va.Ue(e),os(t).Z_(e)}function Pf(t){t.Va=new wA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),os(t).start(),t.Ra.ua()}function jf(t){return ri(t)&&!os(t).x_()&&t.Ia.size>0}function ri(t){return X(t).Ea.size===0}function Bw(t){t.Va=void 0}async function Rk(t){t.Ra.set("Online")}async function Ak(t){t.Ia.forEach((e,n)=>{bf(t,e)})}async function kk(t,e){Bw(t),jf(t)?(t.Ra.ha(e),Pf(t)):t.Ra.set("Unknown")}async function bk(t,e,n){if(t.Ra.set("Online"),e instanceof Sw&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))}(t,e)}catch(r){q(Jr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hl(t,r)}else if(e instanceof Za?t.Va.Ze(e):e instanceof Iw?t.Va.st(e):t.Va.tt(e),!n.isEqual(Y.min()))try{const r=await Lw(t.localStore);n.compareTo(r)>=0&&await function(s,o){const c=s.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.Ia.get(d);p&&s.Ia.set(d,p.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const p=s.Ia.get(u);if(!p)return;s.Ia.set(u,p.withResumeToken(Qe.EMPTY_BYTE_STRING,p.snapshotVersion)),Uw(s,u);const m=new Qn(p.target,u,d,p.sequenceNumber);bf(s,m)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){q(Jr,"Failed to raise snapshot:",r),await Hl(t,r)}}async function Hl(t,e,n){if(!ss(e))throw e;t.Ea.add(1),await Ho(t),t.Ra.set("Offline"),n||(n=()=>Lw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Jr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ac(t)})}function zw(t,e){return e().catch(n=>Hl(t,n,e))}async function kc(t){const e=X(t),n=yr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gf;for(;Pk(e);)try{const i=await dk(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,jk(e,i)}catch(i){await Hl(e,i)}Ww(e)&&qw(e)}function Pk(t){return ri(t)&&t.Ta.length<10}function jk(t,e){t.Ta.push(e);const n=yr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Ww(t){return ri(t)&&!yr(t).x_()&&t.Ta.length>0}function qw(t){yr(t).start()}async function Nk(t){yr(t).ra()}async function Dk(t){const e=yr(t);for(const n of t.Ta)e.ea(n.mutations)}async function Vk(t,e,n){const r=t.Ta.shift(),i=Ef.from(r,e,n);await zw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await kc(t)}async function Lk(t,e){e&&yr(t).X_&&await async function(r,i){if(function(o){return yA(o)&&o!==D.ABORTED}(i.code)){const s=r.Ta.shift();yr(r).B_(),await zw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await kc(r)}}(t,e),Ww(t)&&qw(t)}async function fy(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),q(Jr,"RemoteStore received new credentials");const r=ri(n);n.Ea.add(3),await Ho(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ac(n)}async function Ok(t,e){const n=X(t);e?(n.Ea.delete(2),await Ac(n)):e||(n.Ea.add(2),await Ho(n),n.Ra.set("Unknown"))}function os(t){return t.ma||(t.ma=function(n,r,i){const s=X(n);return s.sa(),new xk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:Rk.bind(null,t),t_:Ak.bind(null,t),r_:kk.bind(null,t),H_:bk.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),jf(t)?Pf(t):t.Ra.set("Unknown")):(await t.ma.stop(),Bw(t))})),t.ma}function yr(t){return t.fa||(t.fa=function(n,r,i){const s=X(n);return s.sa(),new Ek(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Nk.bind(null,t),r_:Lk.bind(null,t),ta:Dk.bind(null,t),na:Vk.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await kc(t)):(await t.fa.stop(),t.Ta.length>0&&(q(Jr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,c=new Nf(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Df(t,e){if(Cn("AsyncQueue",`${e}: ${t}`),ss(t))return new W(D.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{static emptySet(e){return new Di(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=zs(),this.sortedSet=new Ie(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Di)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Di;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(){this.ga=new Ie(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xi{constructor(e,n,r,i,s,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Xi(e,n,Di.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Fk{constructor(){this.queries=my(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=X(n),s=i.queries;i.queries=my(),s.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new W(D.ABORTED,"Firestore shutting down"))}}function my(){return new ni(t=>hw(t),xc)}async function Uk(t,e){const n=X(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Mk,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=Df(o,`Initialization of query '${ui(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Vf(n)}async function Bk(t,e){const n=X(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zk(t,e){const n=X(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&Vf(n)}function Wk(t,e,n){const r=X(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Vf(t){t.Ca.forEach(e=>{e.next()})}var rd,gy;(gy=rd||(rd={})).Ma="default",gy.Cache="cache";class qk{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.key=e}}class Hw{constructor(e){this.key=e}}class $k{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=dw(e),this.tu=new Di(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new py,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const y=i.get(p),R=Ec(this.query,m)?m:null,b=!!y&&this.mutatedKeys.has(y.key),N=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;y&&R?y.data.isEqual(R.data)?b!==N&&(r.track({type:3,doc:R}),L=!0):this.su(y,R)||(r.track({type:2,doc:R}),L=!0,(u&&this.eu(R,u)>0||d&&this.eu(R,d)<0)&&(c=!0)):!y&&R?(r.track({type:0,doc:R}),L=!0):y&&!R&&(r.track({type:1,doc:y}),L=!0,(u||d)&&(c=!0)),L&&(R?(o=o.add(R),s=N?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:c,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,m)=>function(R,b){const N=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:L})}};return N(R)-N(b)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Xi(this.query,e.tu,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new py,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Hw(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new $w(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Xi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lf="SyncEngine";class Hk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Gk{constructor(e){this.key=e,this.hu=!1}}class Kk{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ni(c=>hw(c),xc),this.Iu=new Map,this.Eu=new Set,this.du=new Ie(K.comparator),this.Au=new Map,this.Ru=new Sf,this.Vu={},this.mu=new Map,this.fu=Yi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Qk(t,e,n=!0){const r=Jw(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Gw(r,e,n,!0),i}async function Yk(t,e){const n=Jw(t);await Gw(n,e,!0,!1)}async function Gw(t,e,n,r){const i=await fk(t.localStore,on(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await Xk(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Fw(t.remoteStore,i),c}async function Xk(t,e,n,r,i){t.pu=(m,y,R)=>async function(N,L,S,w){let T=L.view.ru(S);T.Cs&&(T=await ly(N.localStore,L.query,!1).then(({documents:_})=>L.view.ru(_,T)));const j=w&&w.targetChanges.get(L.targetId),F=w&&w.targetMismatches.get(L.targetId)!=null,U=L.view.applyChanges(T,N.isPrimaryClient,j,F);return vy(N,L.targetId,U.au),U.snapshot}(t,m,y,R);const s=await ly(t.localStore,e,!0),o=new $k(e,s.Qs),c=o.ru(s.documents),u=$o.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);vy(t,n,d.au);const p=new Hk(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function Jk(t,e,n){const r=X(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!xc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await td(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kf(r.remoteStore,i.targetId),id(r,i.targetId)}).catch(is)):(id(r,i.targetId),await td(r.localStore,i.targetId,!0))}async function Zk(t,e){const n=X(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kf(n.remoteStore,r.targetId))}async function eb(t,e,n){const r=ab(t);try{const i=await function(o,c){const u=X(o),d=ve.now(),p=c.reduce((R,b)=>R.add(b.key),se());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let b=Rn(),N=se();return u.Ns.getEntries(R,p).next(L=>{b=L,b.forEach((S,w)=>{w.isValidDocument()||(N=N.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,b)).next(L=>{m=L;const S=[];for(const w of c){const T=dA(w,m.get(w.key).overlayedDocument);T!=null&&S.push(new Sr(w.key,T,nw(T.value.mapValue),vt.exists(!0)))}return u.mutationQueue.addMutationBatch(R,d,S,c)}).next(L=>{y=L;const S=L.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(R,L.batchId,S)})}).then(()=>({batchId:y.batchId,changes:pw(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ie(ie)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,i.batchId,n),await Go(r,i.changes),await kc(r.remoteStore)}catch(i){const s=Df(i,"Failed to persist write");n.reject(s)}}async function Kw(t,e){const n=X(t);try{const r=await uk(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ce(o.hu,14607):i.removedDocuments.size>0&&(ce(o.hu,42227),o.hu=!1))}),await Go(n,r,e)}catch(r){await is(r)}}function yy(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=X(o);u.onlineState=c;let d=!1;u.queries.forEach((p,m)=>{for(const y of m.Sa)y.va(c)&&(d=!0)}),d&&Vf(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tb(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ie(K.comparator);o=o.insert(s,nt.newNoDocument(s,Y.min()));const c=se().add(s),u=new Cc(Y.min(),new Map,new Ie(ie),o,c);await Kw(r,u),r.du=r.du.remove(s),r.Au.delete(e),Of(r)}else await td(r.localStore,e,!1).then(()=>id(r,e,n)).catch(is)}async function nb(t,e){const n=X(t),r=e.batch.batchId;try{const i=await ck(n.localStore,e);Yw(n,r,null),Qw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Go(n,i)}catch(i){await is(i)}}async function rb(t,e,n){const r=X(t);try{const i=await function(o,c){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(ce(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);Yw(r,e,n),Qw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Go(r,i)}catch(i){await is(i)}}function Qw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Yw(t,e,n){const r=X(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function id(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Xw(t,r)})}function Xw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(kf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Of(t))}function vy(t,e,n){for(const r of n)r instanceof $w?(t.Ru.addReference(r.key,e),ib(t,r)):r instanceof Hw?(q(Lf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Xw(t,r.key)):Q(19791,{wu:r})}function ib(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(q(Lf,"New document in limbo: "+n),t.Eu.add(r),Of(t))}function Of(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(pe.fromString(e)),r=t.fu.next();t.Au.set(r,new Gk(n)),t.du=t.du.insert(n,r),Fw(t.remoteStore,new Qn(on(cw(n.path)),r,"TargetPurposeLimboResolution",vc.ce))}}async function Go(t,e,n){const r=X(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Rf.As(u.targetId,d);s.push(m)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,d){const p=X(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(d,y=>V.forEach(y.Es,R=>p.persistence.referenceDelegate.addReference(m,y.targetId,R)).next(()=>V.forEach(y.ds,R=>p.persistence.referenceDelegate.removeReference(m,y.targetId,R)))))}catch(m){if(!ss(m))throw m;q(Af,"Failed to update sequence numbers: "+m)}for(const m of d){const y=m.targetId;if(!m.fromCache){const R=p.Ms.get(y),b=R.snapshotVersion,N=R.withLastLimboFreeSnapshotVersion(b);p.Ms=p.Ms.insert(y,N)}}}(r.localStore,s))}async function sb(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){q(Lf,"User change. New user:",e.toKey());const r=await Vw(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(c=>{c.forEach(u=>{u.reject(new W(D.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Go(n,r.Ls)}}function ob(t,e){const n=X(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let i=se();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function Jw(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ob.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tb.bind(null,e),e.Pu.H_=zk.bind(null,e.eventManager),e.Pu.yu=Wk.bind(null,e.eventManager),e}function ab(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rb.bind(null,e),e}class Gl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return lk(this.persistence,new sk,e.initialUser,this.serializer)}Cu(e){return new Dw(Cf.mi,this.serializer)}Du(e){return new mk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gl.provider={build:()=>new Gl};class lb extends Gl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ce(this.persistence.referenceDelegate instanceof $l,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qA(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ht.withCacheSize(this.cacheSizeBytes):ht.DEFAULT;return new Dw(r=>$l.mi(r,n),this.serializer)}}class sd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sb.bind(null,this.syncEngine),await Ok(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Fk}()}createDatastore(e){const n=Rc(e.databaseInfo.databaseId),r=function(s){return new wk(s)}(e.databaseInfo);return function(s,o,c,u){return new Ik(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new Ck(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>yy(this.syncEngine,n,0),function(){return hy.v()?new hy:new gk}())}createSyncEngine(e,n){return function(i,s,o,c,u,d,p){const m=new Kk(i,s,o,c,u,d);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=X(i);q(Jr,"RemoteStore shutting down."),s.Ea.add(5),await Ho(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}sd.provider={build:()=>new sd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Cn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="FirestoreClient";class ub{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=mf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q(vr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(vr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Df(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bu(t,e){t.asyncQueue.verifyOperationInProgress(),q(vr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Vw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _y(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hb(t);q(vr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>fy(e.remoteStore,i)),t._onlineComponents=e}async function hb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(vr,"Using user provided OfflineComponentProvider");try{await Bu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===D.FAILED_PRECONDITION||i.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Hi("Error using user provided cache. Falling back to memory cache: "+n),await Bu(t,new Gl)}}else q(vr,"Using default OfflineComponentProvider"),await Bu(t,new lb(void 0));return t._offlineComponents}async function Zw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(vr,"Using user provided OnlineComponentProvider"),await _y(t,t._uninitializedComponentsProvider._online)):(q(vr,"Using default OnlineComponentProvider"),await _y(t,new sd))),t._onlineComponents}function db(t){return Zw(t).then(e=>e.syncEngine)}async function fb(t){const e=await Zw(t),n=e.eventManager;return n.onListen=Qk.bind(null,e.syncEngine),n.onUnlisten=Jk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Yk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Zk.bind(null,e.syncEngine),n}function pb(t,e,n={}){const r=new lr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const p=new cb({next:y=>{p.Nu(),o.enqueueAndForget(()=>Bk(s,m)),y.fromCache&&u.source==="server"?d.reject(new W(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new qk(c,p,{includeMetadataChanges:!0,qa:!0});return Uk(s,m)}(await fb(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="firestore.googleapis.com",xy=!0;class Ey{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=t1,this.ssl=xy}else this.host=e.host,this.ssl=e.ssl??xy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Nw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zA)throw new W(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ey({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ey(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yR;switch(r.type){case"firstParty":return new xR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=wy.get(n);r&&(q("ComponentProvider","Removing Datastore"),wy.delete(n),r.terminate())}(this),Promise.resolve()}}function mb(t,e,n,r={}){var d;t=dr(t,bc);const i=ts(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(Q0(`https://${c}`),Y0("Firestore",!0)),s.host!==t1&&s.host!==c&&Hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:c,ssl:i,emulatorOptions:r};if(!Kr(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=et.MOCK_USER;else{p=CT(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new W(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new et(y)}t._authCredentials=new vR(new W_(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class Me{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Me(this.firestore,e,this._key)}toJSON(){return{type:Me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zo(n,Me._jsonSchema))return new Me(e,r||null,new K(pe.fromString(n.referencePath)))}}Me._jsonSchemaVersion="firestore/documentReference/1.0",Me._jsonSchema={type:De("string",Me._jsonSchemaVersion),referencePath:De("string")};class cr extends as{constructor(e,n,r){super(e,n,cw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new K(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function el(t,e,...n){if(t=ke(t),q_("collection","path",e),t instanceof bc){const r=pe.fromString(e,...n);return Vg(r),new cr(t,null,r)}{if(!(t instanceof Me||t instanceof cr))throw new W(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return Vg(r),new cr(t.firestore,null,r)}}function tl(t,e,...n){if(t=ke(t),arguments.length===1&&(e=mf.newId()),q_("doc","path",e),t instanceof bc){const r=pe.fromString(e,...n);return Dg(r),new Me(t,null,new K(r))}{if(!(t instanceof Me||t instanceof cr))throw new W(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return Dg(r),new Me(t.firestore,t instanceof cr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="AsyncQueue";class Iy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ow(this,"async_queue_retry"),this._c=()=>{const r=Uu();r&&q(Ty,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Uu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Uu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new lr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ss(e))throw e;q(Ty,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Cn("INTERNAL UNHANDLED ERROR: ",Sy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Nf.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Q(47125,{Pc:Sy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Sy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ls extends bc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Iy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iy(e),this._firestoreClient=void 0,await e}}}function gb(t,e){const n=typeof t=="object"?t:e_(),r=typeof t=="string"?t:e||Ml,i=rf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=IT("firestore");s&&mb(i,...s)}return i}function Mf(t){if(t._terminated)throw new W(D.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yb(t),t._firestoreClient}function yb(t){var r,i,s;const e=t._freezeSettings(),n=function(c,u,d,p){return new MR(c,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,e1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ub(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pt(Qe.fromBase64String(e))}catch(n){throw new W(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pt(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zo(e,Pt._jsonSchema))return Pt.fromBase64String(e.bytes)}}Pt._jsonSchemaVersion="firestore/bytes/1.0",Pt._jsonSchema={type:De("string",Pt._jsonSchemaVersion),bytes:De("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ln._jsonSchemaVersion}}static fromJSON(e){if(zo(e,ln._jsonSchema))return new ln(e.latitude,e.longitude)}}ln._jsonSchemaVersion="firestore/geoPoint/1.0",ln._jsonSchema={type:De("string",ln._jsonSchemaVersion),latitude:De("number"),longitude:De("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:cn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zo(e,cn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new cn(e.vectorValues);throw new W(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cn._jsonSchemaVersion="firestore/vectorValue/1.0",cn._jsonSchema={type:De("string",cn._jsonSchemaVersion),vectorValues:De("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=/^__.*__$/;class _b{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Sr(e,this.data,this.fieldMask,n,this.fieldTransforms):new qo(e,this.data,n,this.fieldTransforms)}}class n1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Sr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function r1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:t})}}class Uf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Uf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(r1(this.Ac)&&vb.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rc(e)}Cc(e,n,r,i=!1){return new Uf({Ac:e,methodName:n,Dc:r,path:He.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pc(t){const e=t._freezeSettings(),n=Rc(t._databaseId);return new wb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function i1(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Bf("Data must be an object, but it was:",o,r);const c=a1(r,o);let u,d;if(s.merge)u=new Tt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const y=od(e,m,n);if(!o.contains(y))throw new W(D.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);c1(p,y)||p.push(y)}u=new Tt(p),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new _b(new ft(c),u,d)}class jc extends Ff{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jc}}function s1(t,e,n,r){const i=t.Cc(1,e,n);Bf("Data must be an object, but it was:",i,r);const s=[],o=ft.empty();Ir(r,(u,d)=>{const p=zf(e,u,n);d=ke(d);const m=i.yc(p);if(d instanceof jc)s.push(p);else{const y=Qo(d,m);y!=null&&(s.push(p),o.set(p,y))}});const c=new Tt(s);return new n1(o,c,i.fieldTransforms)}function o1(t,e,n,r,i,s){const o=t.Cc(1,e,n),c=[od(e,r,n)],u=[i];if(s.length%2!=0)throw new W(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)c.push(od(e,s[y])),u.push(s[y+1]);const d=[],p=ft.empty();for(let y=c.length-1;y>=0;--y)if(!c1(d,c[y])){const R=c[y];let b=u[y];b=ke(b);const N=o.yc(R);if(b instanceof jc)d.push(R);else{const L=Qo(b,N);L!=null&&(d.push(R),p.set(R,L))}}const m=new Tt(d);return new n1(p,m,o.fieldTransforms)}function xb(t,e,n,r=!1){return Qo(n,t.Cc(r?4:3,e))}function Qo(t,e){if(l1(t=ke(t)))return Bf("Unsupported field value:",e,t),a1(t,e);if(t instanceof Ff)return function(r,i){if(!r1(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const c of r){let u=Qo(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ve.fromDate(r);return{timestampValue:ql(i.serializer,s)}}if(r instanceof ve){const s=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ql(i.serializer,s)}}if(r instanceof ln)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pt)return{bytesValue:Cw(i.serializer,r._byteString)};if(r instanceof Me){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:If(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cn)return function(o,c){return{mapValue:{fields:{[Z_]:{stringValue:tw},[Fl]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return xf(c.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${yc(r)}`)}(t,e)}function a1(t,e){const n={};return G_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ir(t,(r,i)=>{const s=Qo(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function l1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof ln||t instanceof Pt||t instanceof Me||t instanceof Ff||t instanceof cn)}function Bf(t,e,n){if(!l1(n)||!$_(n)){const r=yc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function od(t,e,n){if((e=ke(e))instanceof Ko)return e._internalPath;if(typeof e=="string")return zf(t,e);throw Kl("Field path arguments must be of type string or ",t,!1,void 0,n)}const Eb=new RegExp("[~\\*/\\[\\]]");function zf(t,e,n){if(e.search(Eb)>=0)throw Kl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ko(...e.split("."))._internalPath}catch{throw Kl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new W(D.INVALID_ARGUMENT,c+t+u)}function c1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Tb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Tb extends u1{data(){return super.data()}}function Wf(t,e){return typeof e=="string"?zf(t,e):e instanceof Ko?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qf{}class Sb extends qf{}function Cb(t,e,...n){let r=[];e instanceof qf&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof $f).length,c=s.filter(u=>u instanceof Nc).length;if(o>1||o>0&&c>0)throw new W(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Nc extends Sb{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Nc(e,n,r)}_apply(e){const n=this._parse(e);return h1(e._query,n),new as(e.firestore,e.converter,Qh(e._query,n))}_parse(e){const n=Pc(e.firestore);return function(s,o,c,u,d,p,m){let y;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new W(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Ry(m,p);const b=[];for(const N of m)b.push(Cy(u,s,N));y={arrayValue:{values:b}}}else y=Cy(u,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Ry(m,p),y=xb(c,o,m,p==="in"||p==="not-in");return Ne.create(d,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Rb(t,e,n){const r=e,i=Wf("where",t);return Nc._create(i,r,n)}class $f extends qf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $f(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const u of c)h1(o,u),o=Qh(o,u)}(e._query,n),new as(e.firestore,e.converter,Qh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Cy(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new W(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uw(e)&&n.indexOf("/")!==-1)throw new W(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!K.isDocumentKey(r))throw new W(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wg(t,new K(r))}if(n instanceof Me)return Wg(t,n._key);throw new W(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yc(n)}.`)}function Ry(t,e){if(!Array.isArray(t)||t.length===0)throw new W(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h1(t,e){const n=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ab{convertValue(e,n="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ir(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Fl].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Re(o.doubleValue));return new cn(n)}convertGeoPoint(e){return new ln(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ro(e));default:return null}}convertTimestamp(e){const n=pr(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);ce(jw(r),9688,{name:e});const i=new Ao(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||Cn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ja{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vi extends u1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Wf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Vi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Vi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vi._jsonSchema={type:De("string",Vi._jsonSchemaVersion),bundleSource:De("string","DocumentSnapshot"),bundleName:De("string"),bundle:De("string")};class nl extends Vi{data(e={}){return super.data(e)}}class Li{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ja(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nl(this._firestore,this._userDataWriter,r.key,r,new ja(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new nl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ja(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const u=new nl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ja(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:kb(c.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Li._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}Li._jsonSchemaVersion="firestore/querySnapshot/1.0",Li._jsonSchema={type:De("string",Li._jsonSchemaVersion),bundleSource:De("string","QuerySnapshot"),bundleName:De("string"),bundle:De("string")};class bb extends Ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,n)}}function f1(t){t=dr(t,as);const e=dr(t.firestore,ls),n=Mf(e),r=new bb(e);return Ib(t._query),pb(n,t._query).then(i=>new Li(e,r,t,i))}function Ay(t,e,n,...r){t=dr(t,Me);const i=dr(t.firestore,ls),s=Pc(i);let o;return o=typeof(e=ke(e))=="string"||e instanceof Ko?o1(s,"updateDoc",t._key,e,n,r):s1(s,"updateDoc",t._key,e),Dc(i,[o.toMutation(t._key,vt.exists(!0))])}function Pb(t){return Dc(dr(t.firestore,ls),[new Sc(t._key,vt.none())])}function jb(t,e){const n=dr(t.firestore,ls),r=tl(t),i=d1(t.converter,e);return Dc(n,[i1(Pc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function Dc(t,e){return function(r,i){const s=new lr;return r.asyncQueue.enqueueAndForget(async()=>eb(await db(r),i,s)),s.promise}(Mf(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pc(e)}set(e,n,r){this._verifyNotCommitted();const i=zu(e,this._firestore),s=d1(i.converter,n,r),o=i1(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,vt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=zu(e,this._firestore);let o;return o=typeof(n=ke(n))=="string"||n instanceof Ko?o1(this._dataReader,"WriteBatch.update",s._key,n,r,i):s1(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zu(e,this._firestore);return this._mutations=this._mutations.concat(new Sc(n._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zu(t,e){if((t=ke(t)).firestore!==e)throw new W(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t){return Mf(t=dr(t,ls)),new Nb(t,e=>Dc(t,e))}(function(e,n=!0){(function(i){rs=i})(ns),qi(new Qr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),c=new ls(new _R(r.getProvider("auth-internal")),new ER(o,r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ao(d.options.projectId,p)}(o,i),o);return s={useFetchStreams:n,...s},c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),or(bg,Pg,e),or(bg,Pg,"esm2020")})();var Vb="firebase",Lb="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(Vb,Lb,"app");const Ob={apiKey:"AIzaSyA6KgmU6DE_dQY9VM5Wn8dM-yhE3IGjYs4",authDomain:"marlin-ec-training.firebaseapp.com",projectId:"marlin-ec-training",storageBucket:"marlin-ec-training.firebasestorage.app",messagingSenderId:"909399010808",appId:"1:909399010808:web:f433c10f7b5eafe22f7a0d"},p1=Z0(Ob),Jt=mR(p1),Vr=gb(p1),m1=ee.createContext(),Mb={url:window.location.origin+"/Marlin-EC-Training/",handleCodeInApp:!0},Fb=new fn;function Yo(){return ee.useContext(m1)}function Ub({children:t}){const[e,n]=ee.useState(null),[r,i]=ee.useState([]),[s,o]=ee.useState(!0),[c,u]=ee.useState("");async function d(w){try{const T=Cb(el(Vr,"whitelist"),Rb("email","==",w.toLowerCase())),j=await f1(T);if(j.empty)return console.error("User is not in whitelist, access denied"),{allowed:!1,roles:[]};const U=j.docs[0].data(),_=U.role||U.roles||[];return{allowed:!0,roles:Array.isArray(_)?_:_?[_]:[]}}catch(T){return console.error("Whitelist check failed:",T),{allowed:!1,roles:[]}}}function p(w){return r.includes(w)}function m(w){return w.some(T=>r.includes(T))}async function y(w,T){return u(""),ZS(Jt,w,T)}async function R(w){u("");const{allowed:T}=await d(w);if(!T)throw new Error("This email is not authorized to access this platform.");await eC(Jt,w,Mb),window.localStorage.setItem("emailForSignIn",w)}async function b(){if(_g(Jt,window.location.href)){let w=window.localStorage.getItem("emailForSignIn");w||(w=window.prompt("Please provide your email for confirmation"));const T=await tC(Jt,w,window.location.href);return window.localStorage.removeItem("emailForSignIn"),window.history.replaceState({},document.title,window.location.pathname),T}return null}async function N(){return u(""),IC(Jt,Fb)}function L(){return i([]),Vu(Jt)}ee.useEffect(()=>{_g(Jt,window.location.href)&&b().catch(w=>{console.error("Sign in failed:",w),u(w.message)})},[]),ee.useEffect(()=>iC(Jt,async T=>{if(o(!0),!T){n(null),i([]),o(!1);return}try{const{allowed:j,roles:F}=await d(T.email);j?(n(T),i(F),u("")):(await Vu(Jt),n(null),i([]),u("This email is not authorized to access this platform."))}catch(j){console.error("Auth check failed:",j),await Vu(Jt),n(null),i([]),u("Failed to verify access. Please try again later.")}finally{o(!1)}}),[]);const S={currentUser:e,userRoles:r,hasRole:p,hasAnyRole:m,loginWithPassword:y,sendLoginLink:R,completeSignIn:b,loginWithGoogle:N,logout:L,error:c};return a.jsx(m1.Provider,{value:S,children:!s&&t})}function Bb({onLoginSuccess:t}){const[e,n]=ee.useState(""),[r,i]=ee.useState(""),[s,o]=ee.useState(""),[c,u]=ee.useState(""),[d,p]=ee.useState(!1),[m,y]=ee.useState("google"),{loginWithPassword:R,sendLoginLink:b,loginWithGoogle:N,currentUser:L}=Yo();ee.useEffect(()=>{L&&t()},[L,t]);async function S(){o("");try{p(!0),await N(),t()}catch(j){o(j.message||"Failed to sign in with Google")}p(!1)}async function w(j){j.preventDefault(),o(""),u("");try{p(!0),await b(e),u("Check your email for the login link!")}catch(F){o(F.message||"Failed to send login link")}p(!1)}async function T(j){j.preventDefault(),o("");try{p(!0),await R(e,r),t()}catch(F){o(F.message||"Failed to sign in")}p(!1)}return a.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f8fafc",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",width:"100%",maxWidth:"400px"},children:[a.jsx("h1",{style:{textAlign:"center",color:"#1e40af",marginBottom:"0.5rem"},children:"Marlin Training Hub"}),a.jsx("p",{style:{textAlign:"center",color:"#64748b",marginBottom:"1.5rem"},children:"Sign in to access the platform"}),s&&a.jsx("div",{style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:s}),c&&a.jsx("div",{style:{backgroundColor:"#dcfce7",color:"#16a34a",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:c}),a.jsxs("button",{onClick:S,disabled:d,style:{width:"100%",padding:"0.75rem",backgroundColor:"#ffffff",color:"#333333",border:"1px solid #dadce0",borderRadius:"6px",fontSize:"1rem",fontWeight:"500",cursor:d?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[a.jsx("path",{fill:"#4285F4",d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"}),a.jsx("path",{fill:"#34A853",d:"M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"}),a.jsx("path",{fill:"#FBBC05",d:"M3.964 10.71c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z"}),a.jsx("path",{fill:"#EA4335",d:"M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"})]}),"Sign in with Google"]}),a.jsx("div",{style:{textAlign:"center",color:"#94a3b8",margin:"1rem 0",fontSize:"0.875rem"},children:" or "}),a.jsxs("div",{style:{display:"flex",marginBottom:"1rem",borderRadius:"6px",overflow:"hidden",border:"1px solid #e2e8f0"},children:[a.jsx("button",{onClick:()=>y("email-link"),style:{flex:1,padding:"0.5rem",border:"none",backgroundColor:m==="email-link"?"#1e40af":"#ffffff",color:m==="email-link"?"#ffffff":"#64748b",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},children:"Email Link"}),a.jsx("button",{onClick:()=>y("password"),style:{flex:1,padding:"0.5rem",border:"none",backgroundColor:m==="password"?"#1e40af":"#ffffff",color:m==="password"?"#ffffff":"#64748b",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},children:"Password"})]}),m==="email-link"&&a.jsxs("form",{onSubmit:w,children:[a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#334155"},children:"Email"}),a.jsx("input",{type:"email",value:e,onChange:j=>n(j.target.value),required:!0,placeholder:"you@snorkel.ai",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"1rem",boxSizing:"border-box"}})]}),a.jsx("button",{type:"submit",disabled:d,style:{width:"100%",padding:"0.75rem",backgroundColor:"#1e40af",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"1rem",fontWeight:"600",cursor:d?"not-allowed":"pointer",opacity:d?.7:1},children:d?"Sending...":"Send Login Link"})]}),m==="password"&&a.jsxs("form",{onSubmit:T,children:[a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#334155"},children:"Email"}),a.jsx("input",{type:"email",value:e,onChange:j=>n(j.target.value),required:!0,placeholder:"you@snorkel.ai",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"1rem",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#334155"},children:"Password"}),a.jsx("input",{type:"password",value:r,onChange:j=>i(j.target.value),required:!0,placeholder:"",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"1rem",boxSizing:"border-box"}})]}),a.jsx("button",{type:"submit",disabled:d,style:{width:"100%",padding:"0.75rem",backgroundColor:"#1e40af",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"1rem",fontWeight:"600",cursor:d?"not-allowed":"pointer",opacity:d?.7:1},children:d?"Signing in...":"Sign In"})]})]})})}function Ds({title:t,children:e,defaultOpen:n=!1}){const[r,i]=ee.useState(n);return a.jsxs("div",{className:"collapsible-phase",children:[a.jsxs("button",{className:"collapsible-phase-header",onClick:()=>i(!r),children:[a.jsx("span",{children:t}),a.jsx("span",{className:"collapsible-phase-icon",children:r?"":"+"})]}),r&&a.jsx("div",{className:"collapsible-phase-content",children:e})]})}function zb({onNavigate:t,onLogout:e}){const{hasRole:n}=Yo(),[r,i]=ee.useState(1),[s,o]=ee.useState({x:0,y:0}),[c,u]=ee.useState(!1),[d,p]=ee.useState({x:0,y:0}),m=ee.useRef(null),y=()=>i(T=>Math.min(T+.25,3)),R=()=>i(T=>Math.max(T-.25,.5)),b=()=>{i(1),o({x:0,y:0})},N=T=>{r>1&&(u(!0),p({x:T.clientX-s.x,y:T.clientY-s.y}))},L=T=>{c&&o({x:T.clientX-d.x,y:T.clientY-d.y})},S=()=>u(!1),w=T=>{T.preventDefault(),i(j=>T.deltaY<0?Math.min(j+.1,3):Math.max(j-.1,.5))};return a.jsxs("div",{className:"landing-page",children:[a.jsx("header",{className:"header",children:a.jsxs("nav",{className:"nav",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"#1e40af",letterSpacing:"-0.02em"},children:"Snorkel"}),a.jsx("div",{className:"logo",children:"Marlin Training Hub"})]}),a.jsxs("ul",{className:"nav-links",children:[a.jsx("li",{children:a.jsx("a",{href:"#home",children:"Home"})}),a.jsx("li",{children:a.jsx("a",{href:"#resources",children:"Training Resources"})}),a.jsx("li",{children:a.jsx("button",{onClick:()=>t("glossary"),style:{background:"none",border:"none",color:"#4b5563",textDecoration:"none",fontWeight:500,cursor:"pointer",fontSize:"1rem",fontFamily:"inherit"},children:"Glossary"})}),a.jsx("li",{children:a.jsx("button",{onClick:()=>t("faq"),style:{background:"none",border:"none",color:"#4b5563",textDecoration:"none",fontWeight:500,cursor:"pointer",fontSize:"1rem",fontFamily:"inherit"},children:"FAQ"})}),n("swe")&&a.jsx("li",{children:a.jsx("button",{onClick:()=>t("sweguidelines"),style:{background:"none",border:"none",color:"#7c3aed",textDecoration:"none",fontWeight:600,cursor:"pointer",fontSize:"1rem",fontFamily:"inherit"},children:"SWE Guidelines"})}),n("generalist")&&a.jsx("li",{children:a.jsx("button",{onClick:()=>t("generalistguidelines"),style:{background:"none",border:"none",color:"#7c3aed",textDecoration:"none",fontWeight:600,cursor:"pointer",fontSize:"1rem",fontFamily:"inherit"},children:"Generalist Guidelines"})}),n("admin")&&a.jsx("li",{children:a.jsx("button",{onClick:()=>t("adminpanel"),style:{background:"none",border:"none",color:"#dc2626",textDecoration:"none",fontWeight:600,cursor:"pointer",fontSize:"1rem",fontFamily:"inherit"},children:"Admin Panel"})}),a.jsxs("li",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n("admin")&&a.jsx("span",{style:{background:"#dc2626",color:"#fff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase"},children:"Admin"}),n("swe")&&a.jsx("span",{style:{background:"#2563eb",color:"#fff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase"},children:"SWE"}),n("generalist")&&a.jsx("span",{style:{background:"#7c3aed",color:"#fff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase"},children:"Generalist"}),a.jsx("button",{onClick:e,style:{background:"none",border:"1px solid #dc2626",color:"#dc2626",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:500},children:"Logout"})]})]})]})}),a.jsxs("main",{className:"main-content",children:[a.jsxs("section",{className:"overview-section",children:[a.jsx("h2",{className:"section-title",children:"Project Overview"}),a.jsx("div",{style:{backgroundColor:"#dbeafe",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #2563eb",marginBottom:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#1e40af",fontWeight:600},children:[" ",a.jsx("strong",{children:"Important:"})," For Prompt Review submissions, please use ",a.jsx("strong",{children:"Marlin-Prompt-Review V2"})," on the Snorkel platform."]})}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"0.75rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginBottom:"2rem"},children:a.jsxs("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:[" ",a.jsx("strong",{children:"Minimum 3 turns required."})," All submissions must include at least three turns of iteration with the model."]})}),a.jsx("p",{className:"overview-intro",children:"We're excited to welcome you to Project Marlin, an initiative focused on advancing AI-assisted software engineering through high-quality Python development and structured collaboration with state-of-the-art AI models."}),a.jsxs("div",{style:{width:"100%",maxWidth:"1200px",margin:"2rem auto"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[a.jsx("button",{onClick:R,style:{padding:"0.5rem 1rem",backgroundColor:"#1e40af",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:""}),a.jsxs("button",{onClick:b,style:{padding:"0.5rem 1rem",backgroundColor:"#64748b",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:500,fontSize:"0.875rem"},children:["Reset (",Math.round(r*100),"%)"]}),a.jsx("button",{onClick:y,style:{padding:"0.5rem 1rem",backgroundColor:"#1e40af",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"+"})]}),a.jsx("div",{ref:m,onMouseDown:N,onMouseMove:L,onMouseUp:S,onMouseLeave:S,onWheel:w,style:{overflow:"hidden",borderRadius:"12px",border:"1px solid #e2e8f0",cursor:r>1?c?"grabbing":"grab":"default",backgroundColor:"#f8fafc"},children:a.jsx("img",{src:"/Marlin-EC-Training/media/images/Workflow.svg",alt:"Project Marlin Workflow",draggable:!1,style:{width:"100%",display:"block",transform:`scale(${r}) translate(${s.x/r}px, ${s.y/r}px)`,transformOrigin:"center center",transition:c?"none":"transform 0.1s ease-out"}})}),a.jsx("p",{style:{textAlign:"center",color:"#94a3b8",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Use scroll wheel to zoom  Drag to pan when zoomed in"})]}),a.jsx(Ds,{title:"Step 1: Assessment",children:a.jsxs("div",{className:"phase-item",children:[a.jsx("p",{children:"This step evaluates your ability to review Python code changes critically."}),a.jsx("p",{children:"You'll be given a repository and a set of changes generated by a model. Your task is to assess whether those changes are correct, incomplete, or flawed, and explain your reasoning clearly."}),a.jsx("p",{children:"We're looking for careful analysis, attention to detail, and clear technical explanations  not generic answers or over-reliance on automated tools."}),a.jsxs("div",{style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"62.42774566473989%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/b45caf30507149bfb43d3cc20c4513ef",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})}),a.jsx(Ds,{title:"Step 2: Repository & Pull Request Selection",children:a.jsxs("div",{className:"phase-item",children:[a.jsx("p",{children:"In this step, you select the repository and pull request you'll work on for the remainder of the workflow."}),a.jsx("p",{children:"You'll review available options, inspect the codebase, and choose a pull request that introduces meaningful behavior changes. The task should require real engineering judgment and should be complex enough to warrant careful planning and iteration."}),a.jsx("p",{children:"Choose work you can reasonably understand and evaluate. A strong selection has clear intent but non-trivial implementation details."}),a.jsxs("div",{style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"62.42774566473989%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/a212b65a295c4593bad11ac8bb94055e",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})}),a.jsx(Ds,{title:"Step 3: Prompt Preparation",children:a.jsxs("div",{className:"phase-item",children:[a.jsx("p",{children:"Before running any tools, you plan the work."}),a.jsx("p",{children:"You'll describe what the repository does, what the pull request is intended to change, and write a prompt that will guide the model in implementing those changes using the CLI tool."}),a.jsx("p",{children:"The goal of this step is to remove ambiguity and define a prompt that clearly describes the expected outcome."}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginTop:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:[" ",a.jsx("strong",{children:"Do not use role-based prompting."}),' Avoid phrases like "You are a senior software engineer..." or "Act as an expert developer...". Write clear, direct instructions that describe exactly what needs to be done.']})}),a.jsxs("div",{style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"56.84210526315789%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/2280f00825ec460e836575df2544aeb2",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})}),a.jsx(Ds,{title:"Step 4: Execution & Finalization",children:a.jsxs("div",{className:"phase-item",children:[a.jsx("p",{children:"This is where the planned work is carried out."}),a.jsx("p",{children:"You'll run the task using the provided tools, review the generated changes, and iterate as needed until the result matches your intent. You'll compare multiple outputs, discard incorrect approaches, and refine the solution across turns."}),a.jsx("p",{children:"Once complete, you'll select the stronger of the two model responses and submit your work for review."}),a.jsx("div",{style:{backgroundColor:"#dbeafe",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #2563eb",marginTop:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#1e40af",fontWeight:500},children:[" ",a.jsx("strong",{children:"Note:"})," For final submission, use ",a.jsx("strong",{children:"Marlin-Prompt-Review V2"})," on the Snorkel platform."]})}),a.jsxs("div",{style:{backgroundColor:"#fef3c7",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #f59e0b",marginTop:"1rem"},children:[a.jsxs("p",{style:{margin:0,marginBottom:"0.5rem",color:"#92400e",fontWeight:600},children:[" ",a.jsx("strong",{children:"Important:"})," Do not check out the PR branch (e.g. ",a.jsx("code",{style:{backgroundColor:"#fde68a",padding:"0.125rem 0.375rem",borderRadius:"4px"},children:"pr-833"}),") when working on a Marlin submission. PR branches already contain the requested changes."]}),a.jsx("p",{style:{margin:0,color:"#92400e"},children:"Always use the pre-PR repository state provided in the approval email after Prompt-Preparation. If you're unsure you're on the correct version, ask in Slack before proceeding."})]}),a.jsxs("div",{style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86161251504213%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/d368f4ece5d248a3af7ed53edca7ed20",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})}),a.jsx("p",{className:"overview-closing",children:"Thank you for being part of the Snorkel Expert community. We look forward to working with you as we push the boundaries of AI-assisted software engineering through Project Marlin."}),a.jsx("h2",{className:"section-title",children:"Guidelines"}),a.jsxs("div",{className:"resource-buttons",children:[a.jsxs("button",{className:"resource-button",onClick:()=>t("overview"),children:[a.jsx("span",{className:"button-text",children:"Overview"}),a.jsx("span",{className:"button-description",children:"Provides a high-level explanation of the project, how the full workflow fits together."})]}),a.jsxs("button",{className:"resource-button",onClick:()=>t("prselection"),children:[a.jsx("span",{className:"button-text",children:"Step 2: PR Selection"}),a.jsx("span",{className:"button-description",children:"Covers how to choose a valid repository and pull request with the right level of complexity."})]}),a.jsxs("button",{className:"resource-button",onClick:()=>t("promptpreparation"),children:[a.jsx("span",{className:"button-text",children:"Step 3: Prompt Preparation"}),a.jsx("span",{className:"button-description",children:"Explains how to outline expected behavior, edge cases, tests, and write a strong prompt."})]}),a.jsxs("button",{className:"resource-button",onClick:()=>t("modelworkspace"),children:[a.jsx("span",{className:"button-text",children:"Step 4: CLI and Final Submission"}),a.jsx("span",{className:"button-description",children:"Shows how to run the model, iterate across turns, review updates, and finalize your submission. Use Marlin-Prompt-Review V2."})]}),a.jsxs("button",{className:"resource-button",onClick:()=>t("rulesandrequirements"),children:[a.jsx("span",{className:"button-text",children:"Rules & Requirements"}),a.jsx("span",{className:"button-description",children:"Details OS requirements, allowed tools, time limits, and project policies you must follow."})]}),a.jsxs("button",{className:"resource-button",onClick:()=>t("cli"),children:[a.jsx("span",{className:"button-text",children:"CLI Setup"}),a.jsx("span",{className:"button-description",children:"How to setup the CLI tool to start tasking."})]})]})]}),a.jsx("div",{style:{borderTop:"2px solid #e2e8f0",marginTop:"3rem",paddingTop:"2rem"},children:a.jsxs("section",{id:"resources",className:"resources-section",children:[a.jsx("h2",{className:"section-title",children:"Training Resources"}),a.jsx("div",{style:{width:"100%",marginBottom:"2rem"},children:a.jsxs("div",{style:{marginTop:"3rem"},children:[a.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1e293b",marginBottom:"1.5rem",textAlign:"center"},children:"Resources Hub"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"resource-hub-card",children:[a.jsx("h4",{className:"resource-hub-card-title",children:" Essential Resources"}),a.jsxs("ul",{className:"resource-hub-list",children:[a.jsx("li",{children:a.jsx("a",{href:"https://expert.snorkel.ai",target:"_blank",rel:"noopener noreferrer",children:"Snorkel Expert Platform"})}),a.jsx("li",{children:a.jsx("a",{href:"https://snorkel-team.enterprise.slack.com/docs/TFHL9C8JG/F0A1J0370E8",target:"_blank",rel:"noopener noreferrer",children:"PR Suggestion Form"})})]})]}),a.jsxs("div",{className:"resource-hub-card",children:[a.jsx("h4",{className:"resource-hub-card-title",children:" Need Help?"}),a.jsxs("ul",{className:"resource-hub-list",children:[a.jsxs("li",{children:[a.jsx("a",{href:"https://snorkel-team.enterprise.slack.com/archives/C0A1GKLJQVA",target:"_blank",rel:"noopener noreferrer",style:{color:"#1e40af",fontWeight:600},children:"#ec-marlin-support-v2"}),"  Slack channel for project questions"]}),a.jsxs("li",{children:[a.jsx("a",{href:"https://snorkel-team.enterprise.slack.com/docs/TFHL9C8JG/F0A1J0370E8",target:"_blank",rel:"noopener noreferrer",children:"Marlin Issue Tracker"}),"  Report platform problems"]}),a.jsxs("li",{children:[a.jsx("a",{href:"https://snorkel-team.enterprise.slack.com/docs/TFHL9C8JG/F0A1J0370E8",target:"_blank",rel:"noopener noreferrer",children:"PR Suggestion Form"}),"  Suggest repos/PRs"]}),a.jsxs("li",{children:[a.jsx("a",{href:"https://snorkel.freshdesk.com/support/tickets/new",target:"_blank",rel:"noopener noreferrer",children:"Expert Support Ticket"}),"  General support"]})]})]})]}),a.jsxs("div",{className:"resource-hub-card",style:{marginBottom:"2rem"},children:[a.jsx("h4",{className:"resource-hub-card-title",children:" Updates"}),a.jsx("div",{style:{color:"#64748b"},children:a.jsxs("p",{style:{margin:"0.5rem 0"},children:[a.jsx("strong",{children:"December 3rd:"})," #ec-marlin-support-v2 launched!"]})})]}),a.jsx(Ds,{title:"Code of Conduct",children:a.jsxs("div",{className:"phase-item",children:[a.jsx("p",{children:"It is important to the Snorkel team that our communication channels remain a safe, professional, and welcoming environment for all Expert Contributors (ECs) and Snorkel staff."}),a.jsx("p",{children:a.jsx("strong",{children:"We are dedicated to the following:"})}),a.jsxs("ul",{children:[a.jsx("li",{children:"Maintaining respectful and professional relations with Snorkel staff and other ECs."}),a.jsx("li",{children:"No threats toward Snorkel staff or other ECsthese will not be tolerated."}),a.jsx("li",{children:"No use of profane or obscene comments directed at others."}),a.jsx("li",{children:a.jsx("strong",{children:"Do not share this project information with anyone outside the project."})})]}),a.jsx("p",{children:"The purpose of this Code of Conduct is not to prevent ECs from expressing concerns or dissatisfaction. If something feels wrong, we encourage you to report it in a respectful manner aligned with the community ethos."}),a.jsx("p",{style:{fontSize:"0.9rem",color:"#94a3b8",marginTop:"1rem"},children:"Violations will be addressed privately. Persistent violations may result in revoked Slack access or offboarding from Snorkel work."})]})})]})}),a.jsxs("div",{style:{display:"flex",gap:"2rem",justifyContent:"center",flexWrap:"wrap",marginBottom:"3rem"},children:[a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",maxWidth:"550px",minWidth:"480px",width:"100%"},children:a.jsxs("div",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"12px",padding:"2rem",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",width:"100%"},children:[a.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:700,color:"#ffffff",marginBottom:"1.5rem",textAlign:"center"},children:"Onboarding Session"}),a.jsxs("div",{children:[a.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:600,color:"#ffffff",marginBottom:"1rem",textAlign:"center"},children:"Onboarding Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"53.60262008733624%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/82f96f08bc964f54829703971ea81b2f",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",maxWidth:"550px",minWidth:"480px",width:"100%"},children:a.jsxs("div",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"12px",padding:"2rem",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",width:"100%"},children:[a.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:700,color:"#ffffff",marginBottom:"1.5rem",textAlign:"center"},children:"Tutorial"}),a.jsxs("div",{children:[a.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:600,color:"#ffffff",marginBottom:"1rem",textAlign:"center"},children:"CLI Tool Walkthrough"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.94708994708994%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/888ac13d11c24d1099f7ff6b6eaa334b",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:600,color:"#ffffff",marginBottom:"1rem",textAlign:"center"},children:"Multi-Turn Workflow"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/6537574a3bb64ee0aba07dcf2feca433",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})})]})]})})]}),a.jsx("footer",{className:"footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function Wb({onNavigate:t}){return a.jsxs("div",{className:"videos-page",children:[a.jsxs("header",{className:"videos-header",children:[a.jsx("button",{className:"back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("div",{className:"videos-logo",children:"FAQ"})]}),a.jsxs("main",{className:"videos-content",children:[a.jsx("h1",{className:"videos-title",children:"Frequently Asked Questions"}),a.jsxs("div",{className:"faq-container",children:[a.jsx("h2",{className:"faq-section-title",children:"Workflow & Sequencing"}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"What is the overall workflow?"}),a.jsx("p",{className:"faq-answer",children:"The workflow follows a fixed sequence:"}),a.jsx("p",{className:"faq-answer",children:a.jsx("strong",{children:"Repository & Pull Request Selection  Prompt Preparation  Execution & Finalization  Submission Review"})}),a.jsx("p",{className:"faq-answer",children:"Each step builds on the previous one and must be completed in order."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"Can I skip steps or jump ahead?"}),a.jsx("p",{className:"faq-answer",children:"No. Steps must be completed sequentially to proceed through the workflow."})]}),a.jsx("h2",{className:"faq-section-title",children:"Repository & Pull Request Selection"}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"What am I selecting in this step?"}),a.jsx("p",{className:"faq-answer",children:"You select one or more repositories and associated pull requests that will be used as the basis for your work."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"Can I select multiple pull requests?"}),a.jsx("p",{className:"faq-answer",children:"Yes. You may select multiple pull requests. You are responsible for managing your workload and completing each task thoroughly."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"How should I choose a pull request?"}),a.jsx("p",{className:"faq-answer",children:"Choose pull requests that introduce meaningful behavior changes and require real technical judgment to evaluate. You should be comfortable understanding the codebase well enough to review and explain the changes."})]}),a.jsx("h2",{className:"faq-section-title",children:"Prompt Preparation"}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"Is the prompt the same thing as the pull request?"}),a.jsx("p",{className:"faq-answer",children:"No. The pull request defines what should change. The prompt defines how the model should implement those changes."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"How detailed should my answers be?"}),a.jsx("p",{className:"faq-answer",children:"Be specific and concrete. Clearly describe current behavior, expected behavior, edge cases, and acceptance criteria. Avoid vague or high-level statements."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"What prompting style should I use?"}),a.jsx("p",{className:"faq-answer",children:"Use clear, direct, and structured instructions. Do not use role-based prompting or conversational language."})]}),a.jsx("h2",{className:"faq-section-title",children:"Execution & Platform Use"}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"Can I use external LLMs or AI tools to help?"}),a.jsx("p",{className:"faq-answer",children:"No. Using external LLMs or AI tools to analyze code, write prompts, review outputs, or draft explanations is not allowed. All reasoning and evaluation must be your own."})]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"Why do I see two model responses?"}),a.jsx("p",{className:"faq-answer",children:"Each execution turn produces two alternative outputs. You are expected to review both carefully, compare them, and select the stronger result."})]}),a.jsx("h2",{className:"faq-section-title",children:"Troubleshooting"}),a.jsxs("div",{className:"faq-item",children:[a.jsx("h3",{className:"faq-question",children:"What should I do if something goes wrong?"}),a.jsx("p",{className:"faq-answer",children:"If you encounter an issue that is not covered in the dedicated tooling or CLI documentation, report it through the appropriate support channel with clear details about what happened and where it occurred."})]})]})]}),a.jsx("footer",{className:"videos-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function qb({onNavigate:t}){return a.jsxs("div",{className:"videos-page",children:[a.jsxs("header",{className:"videos-header",children:[a.jsx("button",{className:"back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("div",{className:"videos-logo",children:"Glossary"})]}),a.jsxs("main",{className:"videos-content",children:[a.jsx("h1",{className:"videos-title",children:"Glossary"}),a.jsx("div",{className:"content-body",style:{maxWidth:"1000px",margin:"0 auto",textAlign:"left"},children:a.jsxs("div",{className:"glossary-grid",children:[a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Alias Email"}),a.jsx("p",{style:{marginBottom:0},children:"A project-specific email account used only to access required tools and platforms. Not for personal communication or external use."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Assessment"}),a.jsx("p",{style:{marginBottom:0},children:"The initial qualification step where you review model-generated Python code and explain whether the changes are correct, incomplete, or flawed."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Baseline Repository"}),a.jsx("p",{style:{marginBottom:0},children:"The original state of the codebase before any changes are generated during execution."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Blocking Issue"}),a.jsx("p",{style:{marginBottom:0},children:"A problem that makes a result unacceptable, such as broken logic, missing required changes, failing tests, or incorrect file placement."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Client Platform"}),a.jsx("p",{style:{marginBottom:0},children:"The environment where execution tasks are run and model outputs are reviewed."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Code of Conduct"}),a.jsx("p",{style:{marginBottom:0},children:"Rules governing professional behavior, confidentiality, and appropriate communication within the project."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Complexity Requirement"}),a.jsx("p",{style:{marginBottom:0},children:"The expectation that selected work is substantial enough to require planning, iteration, and technical judgment."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Context Setting"}),a.jsx("p",{style:{marginBottom:0},children:"The section where you explain what the codebase does and what the selected change is intended to accomplish."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Current Behavior"}),a.jsx("p",{style:{marginBottom:0},children:"How the code behaves before the intended changes are applied."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Dependency Setup"}),a.jsx("p",{style:{marginBottom:0},children:"Installing and configuring the tools and packages required to run the project locally."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Diff Review"}),a.jsx("p",{style:{marginBottom:0},children:"A file-by-file review of changes to confirm what was modified and whether it matches the intended behavior."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"EC (Expert Contributor)"}),a.jsx("p",{style:{marginBottom:0},children:"You  the participant responsible for reviewing code, writing prompts, evaluating outputs, and submitting final results."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Edge Case"}),a.jsx("p",{style:{marginBottom:0},children:"A non-standard scenario that the updated code must still handle correctly."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Expected Behavior"}),a.jsx("p",{style:{marginBottom:0},children:"How the code should behave after the intended changes are fully implemented."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Feedback Fields"}),a.jsx("p",{style:{marginBottom:0},children:"Where you compare model outputs, explain tradeoffs, and select the preferred result."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"File Structure Correctness"}),a.jsx("p",{style:{marginBottom:0},children:"Whether files were added or modified in the correct locations and follow expected project structure."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Initial Prompt"}),a.jsx("p",{style:{marginBottom:0},children:"The first structured instruction used to begin execution."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Iteration"}),a.jsx("p",{style:{marginBottom:0},children:"A cycle of refining instructions and reviewing outputs to improve correctness across turns."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Last-Mile Edits"}),a.jsx("p",{style:{marginBottom:0},children:"Small, limited cleanups made after review (for example: removing duplicates or minor naming fixes). Significant logic changes must be handled through iteration."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Local Environment"}),a.jsx("p",{style:{marginBottom:0},children:"Your machine setup used to run, test, and review the code."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Model Output (Option A / Option B)"}),a.jsx("p",{style:{marginBottom:0},children:"Two alternative outputs generated for the same prompt, which you review and compare before selecting one."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Non-Blocking Issue"}),a.jsx("p",{style:{marginBottom:0},children:"A minor problem that does not prevent correctness but should be noted."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Prompt Preparation"}),a.jsx("p",{style:{marginBottom:0},children:"The planning stage where you define expected behavior, edge cases, acceptance criteria, and the execution prompt."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Prompt Review Submission"}),a.jsx("p",{style:{marginBottom:0},children:"The final step where you select the best result, provide required details, and report issues if needed."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Task Approach"}),a.jsx("p",{style:{marginBottom:0},children:"Your written plan describing how the change should be implemented and validated."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Turn"}),a.jsx("p",{style:{marginBottom:0},children:"One execution cycle: you submit a prompt, review the model's outputs, and decide how to proceed."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"URL Requirement"}),a.jsx("p",{style:{marginBottom:0},children:"The requirement that the selected pull request link follows the correct format so the platform can track the task."})]}),a.jsxs("div",{className:"info-box",style:{marginTop:0},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Workflow Pipeline"}),a.jsx("p",{style:{marginBottom:0},children:"The full sequence of steps from assessment through selection, planning, execution, and final submission."})]})]})})]}),a.jsx("footer",{className:"videos-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function $b({onNavigate:t}){return a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"Overview"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"About This Project"}),a.jsx("p",{children:"This project focuses on reviewing and executing Python code changes using real repositories and pull requests."}),a.jsx("p",{children:"Participants work with model-generated responses that attempt to modify existing code. The goal is to evaluate those changes, determine whether they correctly implement the intended behavior, and guide the model toward a correct and complete result."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Workflow Structure"}),a.jsx("p",{children:"The workflow is structured as a sequence of practical steps. It begins with reviewing model-generated code to assess technical judgment. From there, participants select a repository and pull request that will serve as the basis for the task. They then plan the work by writing a prompt that clearly describes the expected changes, and use the provided tools to execute, review, and refine the results."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"What We Evaluate"}),a.jsx("p",{children:"At each stage, the focus is on concrete outcomes: whether the code behaves as intended, whether changes are complete and consistent, and whether technical decisions can be clearly explained. The project evaluates the ability to work through real codebases, reason about behavior, and make informed decisions when interacting with model-generated output."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Getting Started"}),a.jsx("p",{children:"The guides below explain each step in detail and outline how to approach the work from initial review to final submission."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Tutorial Videos"}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"Step 1: Assessment"}),a.jsx("div",{style:{position:"relative",paddingBottom:"62.42774566473989%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/b45caf30507149bfb43d3cc20c4513ef",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"Step 2: Repository & Pull Request Selection"}),a.jsx("div",{style:{position:"relative",paddingBottom:"62.42774566473989%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/a212b65a295c4593bad11ac8bb94055e",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"Step 3: Prompt Preparation"}),a.jsx("div",{style:{position:"relative",paddingBottom:"56.84210526315789%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/2280f00825ec460e836575df2544aeb2",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"Step 4: Execution & Finalization"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86161251504213%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/d368f4ece5d248a3af7ed53edca7ed20",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"CLI Tool Walkthrough"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.94708994708994%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/888ac13d11c24d1099f7ff6b6eaa334b",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h3",{style:{marginBottom:"0.75rem"},children:"Multi-Turn Workflow"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86%",height:0,borderRadius:"8px",overflow:"hidden"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/6537574a3bb64ee0aba07dcf2feca433",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function Hb({onNavigate:t}){return ee.useEffect(()=>{window.scrollTo(0,0)},[]),a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"PR Selection"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Phase 3: Select Your Repo and Pull Request"}),a.jsx("p",{style:{fontSize:"1.1rem",color:"#1e40af",fontWeight:600},children:"Marlin-PR-Selection Instructions"})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"62.42774566473989%",height:0,borderRadius:"8px",overflow:"hidden",marginBottom:"1.5rem"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/a212b65a295c4593bad11ac8bb94055e",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Step 1: Understand the Interface"}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/PR-Selection.png",alt:"PR Selection Interface",style:{maxWidth:"100%",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginBottom:"1.5rem"}}),a.jsx("p",{children:'The application interface is a "split-screen" layout:'}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Left Side:"})," Displays our PR Glossary consisting of many repositories each with a number of available pull requests"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Right Side:"})," Here you will select your repository along with which corresponding pull request you want to work with"]})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Step 2: Review and Identify a Suitable PR"}),a.jsx("p",{children:"Read through the repositories and pull requests to identify one you feel comfortable with."}),a.jsxs("div",{style:{backgroundColor:"#fef3c7",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #f59e0b",marginTop:"1rem"},children:[a.jsx("p",{style:{margin:0,color:"#92400e",fontWeight:500},children:" Double check that the pull request is sufficiently complex:"}),a.jsxs("ul",{style:{margin:"0.75rem 0 0 0",color:"#92400e"},children:[a.jsxs("li",{children:["You'd expect a human engineer to take ",a.jsx("strong",{children:"at least 2 hours"})," to complete it"]}),a.jsxs("li",{children:["You'd expect a model to struggle to complete the request on its ",a.jsx("strong",{children:"1st or 2nd try"})]}),a.jsxs("li",{children:["It primarily involves ",a.jsx("strong",{children:"Python coding"})]})]})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Step 3: Make Your Selection"}),a.jsxs("ol",{children:[a.jsxs("li",{children:["Select your repository under ",a.jsx("strong",{children:"'Multi-dimensional radio'"})]}),a.jsxs("li",{children:["Select your corresponding pull request under ",a.jsx("strong",{children:"'Sub-topic required'"})]}),a.jsxs("li",{children:["Hit ",a.jsx("strong",{children:"SUBMIT"})]})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Step 4: Wait for Processing"}),a.jsxs("p",{children:["Wait ",a.jsx("strong",{children:"1-2 minutes"})," for Snorkel systems to process your choice before moving onto ",a.jsx("strong",{children:"Marlin-Prompt-Preparation"}),"."]}),a.jsx("div",{style:{backgroundColor:"#dbeafe",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #3b82f6",marginTop:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#1e40af"},children:[" ",a.jsx("strong",{children:"Tip:"})," Use this time to start thinking about how you'll approach the prompt preparation phase."]})})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function Gb({onNavigate:t}){return a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"Prompt Preparation"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"56.84210526315789%",height:0,borderRadius:"8px",overflow:"hidden",marginBottom:"1.5rem"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/2280f00825ec460e836575df2544aeb2",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsx("section",{className:"content-card-section",children:a.jsx("h2",{children:"What You Need to Prepare"})}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h3",{children:"1. Repository and Pull Request Context"}),a.jsx("p",{children:"Provide the background needed to understand the task."}),a.jsx("p",{children:"Explain what the repository does, what the selected pull request is intended to change or fix, and why that change is necessary. This should be written clearly enough that someone unfamiliar with the codebase can understand the purpose and intent of the work."}),a.jsx("p",{children:"Focus on behavior and impact rather than implementation history."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h3",{children:"2. Task Approach"}),a.jsx("p",{children:"Describe how the change should be implemented and how correctness will be evaluated."}),a.jsx("p",{children:"Explain the current behavior and how it should differ after the change. Identify the files, functions, or components involved, and note any dependencies or interactions that may be affected."}),a.jsx("p",{children:"Call out relevant edge cases explicitly. These should be concrete and verifiable, not hypothetical. If tests need to be added or updated, describe what they should cover and how they validate the expected behavior."}),a.jsx("p",{children:"Define acceptance criteria that clearly indicate when the task should be considered complete."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h3",{children:"3. Prompt Definition"}),a.jsx("p",{children:"Write the prompt that will be used during execution."}),a.jsx("p",{children:"The prompt must be self-contained and describe exactly what the model is expected to do. Instructions should be clear, objective, and structured. Avoid conversational language and do not use role-based prompting."}),a.jsx("p",{children:"Someone reading the prompt alone should be able to understand the task without additional context."}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginTop:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:[" ",a.jsx("strong",{children:"Do not use role-based prompting."}),' Avoid phrases like "You are a senior software engineer..." or "Act as an expert developer...". Write clear, direct instructions that describe exactly what needs to be done.']})})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h3",{children:"4. Effort and Complexity"}),a.jsx("p",{children:"Briefly describe the level of engineering effort required."}),a.jsx("p",{children:"Explain why the pull request is non-trivial. This may include the number of files involved, the complexity of the logic, interactions between components, or the need to handle edge cases carefully."}),a.jsx("p",{children:"The goal is to demonstrate that the task requires real analysis and deliberate engineering decisions."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Quality Expectations"}),a.jsx("p",{children:"Your responses should be precise and technically grounded."}),a.jsx("p",{children:"Avoid vague language. Claims about behavior should be testable, and descriptions of edge cases, tests, and acceptance criteria should align with one another. Inconsistencies between expected behavior, validation, and testing will lead to issues during execution."}),a.jsx("p",{children:"Work should reflect your own reasoning and understanding of the codebase."})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function Kb({onNavigate:t}){return a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"Execution & Finalization"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("div",{style:{backgroundColor:"#dbeafe",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #2563eb",marginBottom:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#1e40af",fontWeight:600},children:[" ",a.jsx("strong",{children:"Important:"})," For final submission, use ",a.jsx("strong",{children:"Marlin-Prompt-Review V2"})," on the Snorkel platform."]})}),a.jsxs("div",{style:{backgroundColor:"#fef3c7",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #f59e0b"},children:[a.jsx("p",{style:{margin:0,marginBottom:"0.75rem",color:"#92400e",fontWeight:600},children:" Important Note on PR Checkout (Please Read)"}),a.jsxs("p",{style:{margin:0,marginBottom:"0.75rem",color:"#92400e"},children:["When working on a Marlin submission, do ",a.jsx("strong",{children:"NOT"})," check out the Pull Request branch itself (e.g. ",a.jsx("code",{style:{backgroundColor:"#fde68a",padding:"0.125rem 0.375rem",borderRadius:"4px"},children:"pr-833"}),") as your working state."]}),a.jsx("p",{style:{margin:0,marginBottom:"0.75rem",color:"#92400e"},children:"Checking out the PR branch will load code that already contains the feature or fix being requested, which defeats the purpose of the task and can invalidate your submission."}),a.jsxs("p",{style:{margin:0,marginBottom:"0.75rem",color:"#92400e"},children:["Always start from the ",a.jsx("strong",{children:"pre-PR state"})," of the repository, which represents the code before the PR changes were introduced."]}),a.jsxs("ul",{style:{margin:"0.75rem 0",color:"#92400e",paddingLeft:"1.25rem"},children:[a.jsx("li",{children:"If your Prompt-Preparation task is approved, you will receive an email with a link to the correct version of the repository."}),a.jsx("li",{children:"This repository snapshot is already set to the appropriate pre-PR baseline and should be used with the CLI tool."}),a.jsx("li",{children:"You should not need to manually check out the PR branch or attempt to reconstruct it yourself."})]}),a.jsx("p",{style:{margin:0,color:"#92400e",fontWeight:500},children:"If you are ever unsure whether you're on the correct repo state, do not proceed  reach out in Slack for confirmation before continuing."})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Tutorial Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86161251504213%",height:0,borderRadius:"8px",overflow:"hidden",marginBottom:"1.5rem"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/d368f4ece5d248a3af7ed53edca7ed20",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Purpose of This Stage"}),a.jsx("p",{children:"Execution & Finalization is where the planned work is carried out, evaluated, and finalized."}),a.jsx("p",{children:"In this stage, you use the provided tools to run the task, review the model's outputs, iterate as needed, and select the best result. This is where planning is tested against real code changes, and where correctness, completeness, and judgment matter most."}),a.jsx("p",{children:"This step determines what is ultimately submitted for review."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Key Components You Must Complete"}),a.jsx("h3",{children:"1. Task Execution"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Run the task using the provided CLI and tools"}),a.jsx("li",{children:"Generate model responses based on your prepared prompt"}),a.jsx("li",{children:"Ensure execution follows the intent defined in the preparation stage"})]}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginTop:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:[" ",a.jsx("strong",{children:"Do not reference the PR in your prompt."})," You need to imagine yourself as the developer who was originally building this PR. You cannot reference the PR that already exists to explain how to build it  write instructions as if the PR does not exist yet."]})}),a.jsx("h3",{children:"2. Output Review"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Review all generated code changes carefully"}),a.jsx("li",{children:"Compare outputs against the expected behavior"}),a.jsx("li",{children:"Identify missing logic, incorrect assumptions, or unintended changes"}),a.jsx("li",{children:"Verify that updates follow the repository's structure and conventions"})]}),a.jsx("h3",{children:"3. Iteration and Refinement"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Iterate on the prompt if outputs are incomplete or incorrect"}),a.jsx("li",{children:"Discard approaches that do not meet requirements"}),a.jsx("li",{children:"Refine the solution across turns until it satisfies the acceptance criteria"})]}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginTop:"1rem"},children:a.jsxs("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:[" ",a.jsx("strong",{children:"Minimum 3 turns required."})," Your submission must include at least three turns of iteration with the model. Single-turn or two-turn submissions will not be accepted."]})}),a.jsx("div",{style:{backgroundColor:"#fef3c7",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #f59e0b",marginTop:"1rem"},children:a.jsx("p",{style:{margin:0,color:"#92400e"},children:" Iterations must be intentional and justified. Re-running prompts without clear reasoning is strongly discouraged."})}),a.jsx("h3",{style:{marginTop:"1.5rem"},children:"4. Response Selection"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Compare the multiple model responses provided"}),a.jsx("li",{children:"Select the response that best implements the intended behavior"}),a.jsx("li",{children:"Be prepared to clearly justify why this response was chosen over the alternative"})]}),a.jsx("h3",{children:"5. Finalization and Submission"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Perform a final line-by-line review of all modified files"}),a.jsx("li",{children:"Confirm that only relevant changes were made"}),a.jsx("li",{children:"Ensure behavior, edge cases, and tests (if applicable) are handled correctly"}),a.jsx("li",{children:"Claim and submit your work for review"})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Use of LLMs and External Tools"}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginBottom:"1rem"},children:a.jsx("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:" The use of external LLMs or automated tools outside the provided platform is strictly prohibited."})}),a.jsx("p",{children:"Relying on external LLMs to analyze code, generate reasoning, or draft explanations undermines the purpose of this stage. Submissions that show signs of heavy or direct LLM usage may be rejected during review."}),a.jsx("p",{children:"This stage evaluates your technical judgment and decision-making. The model outputs you review should come only from the provided tools, and all reasoning and evaluation must be your own."})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function Qb({onNavigate:t}){return a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"Rules & Requirements"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"CLI Tool Tutorial"}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.94708994708994%",height:0,borderRadius:"8px",overflow:"hidden",marginBottom:"1.5rem"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/888ac13d11c24d1099f7ff6b6eaa334b",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Operating System Requirements"}),a.jsx("p",{children:"You must use macOS or Linux."}),a.jsx("p",{children:"Windows is not supported unless you can run Linux reliably."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Required Tools"}),a.jsx("p",{children:"You need the following installed and working before you start:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:["VS Code, with the ",a.jsx("code",{children:"code"})," command available in your terminal (added to PATH)"]}),a.jsx("li",{children:"tmux, installed through your system package manager"}),a.jsx("li",{children:"Git and terminal/CLI access"}),a.jsx("li",{children:"Python installed and available from the command line"}),a.jsx("li",{children:"A stable internet connection (required for access and authentication)"})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Execution Requirements"}),a.jsx("p",{children:"Some requirements are easy to miss but will block progress if they're not followed:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"The CLI tool must be run from the root of the repository directory"}),a.jsx("li",{children:"The workflow opens two workspaces (Trajectory A and Trajectory B) for comparison"}),a.jsx("li",{children:"You must review changes using diffs (VS Code does not always highlight changed lines automatically)"}),a.jsx("li",{children:"Multi-turn work may require restarting the CLI using the continue flow between turns"})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Project Rules"}),a.jsx("h3",{children:"No External LLMs (Strict)"}),a.jsx("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginBottom:"1rem"},children:a.jsx("p",{style:{margin:0,color:"#991b1b",fontWeight:600},children:" Using external LLMs or AI tools outside the provided platform is not allowed."})}),a.jsx("p",{children:"This includes using external tools to:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Write or rewrite prompts"}),a.jsx("li",{children:"Generate explanations or reasoning"}),a.jsx("li",{children:"Review model outputs"}),a.jsx("li",{children:"Analyze the pull request"}),a.jsx("li",{children:"Draft any part of your submission text"})]}),a.jsx("p",{children:"If your submission shows signs of external LLM-generated content or automated reasoning, it may be rejected. This project evaluates your technical judgment and your ability to explain decisions based on the code."}),a.jsx("h3",{children:"Time Limits"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Prompt Preparation:"})," 4 hours from the moment you start"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Execution:"})," Tasks are expected to progress through multiple iterations/turns, not a single pass"]})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Common Errors to Watch For"}),a.jsx("p",{children:"These are frequent causes of low-quality submissions:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Missing required file changes"}),a.jsx("li",{children:"Tests not added or not updated when needed"}),a.jsx("li",{children:"Duplicate code blocks or repeated logic"}),a.jsx("li",{children:"Incorrect paths, imports, or module references"}),a.jsx("li",{children:"Changes that don't match the intended behavior or acceptance criteria"}),a.jsx("li",{children:"Claiming the model made updates that are not present in the diff"}),a.jsx("li",{children:"Skipping a full diff review of all modified files"})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"Reporting Issues"}),a.jsx("p",{children:"If you hit a bug or platform issue, report it with:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Date the issue occurred"}),a.jsx("li",{children:"UUID (or task identifier, if shown)"}),a.jsx("li",{children:"Where it occurred (tool, page, step, or screen)"}),a.jsx("li",{children:"A detailed description of what happened"}),a.jsx("li",{children:"Screenshot (optional but helpful)"}),a.jsx("li",{children:"Time lost due to the issue"})]})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function Yb({onNavigate:t}){return ee.useEffect(()=>{window.scrollTo(0,0)},[]),a.jsxs("div",{className:"content-card-page",children:[a.jsxs("header",{className:"content-card-header",children:[a.jsx("button",{className:"content-card-back-button",onClick:()=>t("home"),children:" Back to Home"}),a.jsx("h1",{className:"content-card-title",children:"CLI Tool Installation Guide"})]}),a.jsxs("main",{className:"content-card-main",children:[a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"1. System Requirements"}),a.jsx("p",{children:"Before beginning, ensure that your system has:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Git"}),a.jsx("li",{children:"VS Code (added to PATH)"}),a.jsx("li",{children:"Terminal access"}),a.jsx("li",{children:"Internet connection"}),a.jsx("li",{children:"Python"})]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"2. Add VS Code to PATH"}),a.jsx("p",{children:"The CLI tool requires VS Code to be accessible from the command line. Follow the instructions for your operating system."}),a.jsx("h3",{children:"macOS"}),a.jsx("p",{children:a.jsx("strong",{children:"Method 1: From inside VS Code (recommended)"})}),a.jsxs("ol",{children:[a.jsx("li",{children:"Open VS Code."}),a.jsxs("li",{children:["Press ",a.jsx("code",{children:"Cmd + Shift + P"})," to open the Command Palette."]}),a.jsxs("li",{children:["Type: ",a.jsx("code",{children:"Shell Command: Install 'code' command in PATH"})]}),a.jsx("li",{children:"Press Enter."})]}),a.jsx("p",{children:"Verify the installation:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"code --version"}),a.jsx("p",{children:"If you see version info, the setup is complete."}),a.jsx("p",{children:a.jsx("strong",{children:"Method 2: Add manually (if Method 1 does not work)"})}),a.jsx("p",{children:"VS Code installs its binary here:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"/Applications/Visual Studio Code.app/Contents/Resources/app/bin"}),a.jsx("p",{children:"Add to PATH in your shell config (zsh):"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:`echo 'export PATH="/Applications/Visual Studio Code.app/Contents/Resources/app/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc`}),a.jsx("h3",{children:"Linux"}),a.jsx("p",{children:"If installed via a package manager (snap, apt, yum), VS Code often adds itself to PATH automatically."}),a.jsxs("p",{children:["If not, add manually by appending the following to your ",a.jsx("code",{children:".bashrc"})," or ",a.jsx("code",{children:".zshrc"}),":"]}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:'export PATH="$PATH:/usr/share/code/bin"'}),a.jsx("p",{children:"Then reload your shell:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"source ~/.bashrc"})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"3. Install Required Dependencies"}),a.jsx("p",{children:"The CLI tool relies on tmux to display and manage live model sessions. Install it before continuing."}),a.jsx("h3",{children:"macOS (Homebrew)"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"brew install tmux"}),a.jsx("h3",{children:"Linux"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:`sudo apt update
sudo apt install tmux`}),a.jsx("h3",{children:"Verify installation"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"tmux -V"})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"4. Download and Prepare the Repository"}),a.jsx("p",{children:"After your Prompt-Preparation submission is accepted, you will receive an email with a link to download the repository tarball."}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/submission-email.png",alt:"Submission email",style:{maxWidth:"800px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginBottom:"1rem"}}),a.jsxs("p",{children:["Download the tarball using the ",a.jsx("strong",{children:"repo link"})," from the email, then unpack and initialize it:"]}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:`# Download the tarball from the email link
# Then unpack it:
tar -xvf <downloaded-file>.tar

# Navigate into the unpacked directory
cd <repo-folder>

# Initialize git in the repository
git init`}),a.jsxs("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af"},children:["Make sure to run ",a.jsx("code",{children:"git init"})," inside the root of the unpacked directory. This is required for the CLI tool to track changes."]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"5. Access the Anthropic Tool"}),a.jsx("p",{children:"Open the following URL:"}),a.jsx("p",{children:a.jsx("a",{href:"https://feedback.anthropic.com/claude_code?email_login=true",target:"_blank",rel:"noopener noreferrer",style:{color:"#1e40af",fontWeight:600},children:"https://feedback.anthropic.com/claude_code?email_login=true"})})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"6. Authenticate Using Your Alias Email"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Enter your Alias email address."}),a.jsx("li",{children:"A verification code will be sent to your Alias inbox."}),a.jsx("li",{children:"Enter the code to complete login."})]}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/Login.png",alt:"Login screen",style:{maxWidth:"500px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginTop:"1rem"}}),a.jsx("p",{style:{backgroundColor:"#fee2e2",padding:"0.75rem",borderRadius:"6px",color:"#dc2626",marginTop:"1rem"},children:'Do not use "Sign in with Google." If authentication fails on the first attempt, simply repeat the login.'})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"7. Download the Appropriate CLI Tool Build"}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/version.png",alt:"Version comparison",style:{maxWidth:"800px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginBottom:"1rem"}}),a.jsx("p",{children:"Select the binary that matches your operating system and CPU architecture:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"macOS (Intel)"}),a.jsx("li",{children:"macOS (ARM)"}),a.jsx("li",{children:"Linux"})]}),a.jsxs("p",{children:["The file will download to ",a.jsx("code",{children:"~/Downloads"})," by default."]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"8. Move and Prepare the CLI Tool"}),a.jsx("p",{children:"From within the root of your cloned repository, move the downloaded file into place and make it executable:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:`mv ~/Downloads/<downloaded-filename> claude-hfi
chmod +x claude-hfi`}),a.jsx("p",{children:"Example:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:`mv ~/Downloads/darwin-arm64 claude-hfi
chmod +x claude-hfi

ls
claude-hfi    README.md`}),a.jsxs("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af"},children:["Every repository you work on must contain its own copy of ",a.jsx("code",{children:"claude-hfi"})," placed at the root. You will need to repeat this step (moving the tool to the repo root) for each new repository you work on."]})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"9. Launch the CLI Tool in VS Code Mode"}),a.jsx("p",{children:"Run the following command from the repository root:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"./claude-hfi --vscode"}),a.jsx("p",{children:"This initializes the tool, performs authentication if required, and prepares the environment. Two separate VS Code windows (Trajectory A and Trajectory B) will be opened automatically during execution."}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",fontSize:"0.85rem"},children:`./claude-hfi --vscode

Trajectory A:
  Worktree: /Users/chong/.cache/claude-hfi/-Users-chong-Documents-Project-Test/A
  Terminal: tmux attach -t 2ba1f138-1233-4f40-903a-5b4f35919683-A

Trajectory B:
  Worktree: /Users/chong/.cache/claude-hfi/-Users-chong-Documents-Project-Test/B
  Terminal: tmux attach -t 2ba1f138-1233-4f40-903a-5b4f35919683-B

HFI - Human Feedback Interface

Please enter the interface code:`}),a.jsx("p",{style:{backgroundColor:"#fef3c7",padding:"0.75rem",borderRadius:"6px",color:"#92400e"},children:"Recommendation: Run this command from a terminal outside of VS Code (e.g., the built-in macOS Terminal or iTerm). Otherwise, the two new VS Code windows for Trajectory A and Trajectory B may not open correctly."}),a.jsx("p",{style:{backgroundColor:"#fef3c7",padding:"0.75rem",borderRadius:"6px",color:"#92400e",marginTop:"0.5rem"},children:'Important: If you are working entirely inside VS Code, you must use Git Diff to inspect all file changes. VS Code does not automatically highlight which lines or files have changed. You must manually review differences using the Source Control panel or "Compare with Previous" functionality.'})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"10. Resume a Previous Session"}),a.jsxs("p",{children:["If you closed your session and want to continue working on a previous task, use the ",a.jsx("code",{children:"--continue"})," flag:"]}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"./claude-hfi --continue"}),a.jsx("p",{children:"This will restore your previous session and allow you to pick up where you left off."}),a.jsx("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af"},children:"Use this flag when resuming work after closing VS Code or your terminal. It reconnects to your existing trajectories without starting a new session."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"11. Enter the Interface Code"}),a.jsx("p",{children:"When prompted for the Interface Code, enter:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"cc_agentic_coding"}),a.jsx("p",{children:"This enables the correct workflow mode for the project."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"12. Attach to tmux Sessions"}),a.jsx("p",{children:"In each VS Code window, open the integrated terminal and attach to the appropriate tmux session:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"tmux attach -t <session-id>-A"}),a.jsx("p",{children:"and"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"tmux attach -t <session-id>-B"}),a.jsx("p",{children:"These sessions display live model output, including command execution, file generation, testing activity, and any required user interaction."}),a.jsx("p",{style:{backgroundColor:"#fee2e2",padding:"0.75rem",borderRadius:"6px",color:"#dc2626"},children:"Make sure you run the correct tmux attach command in the correct VS Code window. Trajectory A's command should be run in Trajectory A's VS Code window, and Trajectory B's command in Trajectory B's window."}),a.jsx("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af",marginTop:"0.5rem"},children:"If tmux reports the session name is invalid, use tab completion to identify the correct session ID."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"13. Provide Your Initial Prompt"}),a.jsx("p",{children:"Paste the full prompt you completed during Prompt-Preparation. Press Enter to begin model execution."}),a.jsx("p",{children:"The CLI tool will start two independent trajectories, each in its own VS Code instance."}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",fontSize:"0.85rem"},children:`> Create a riddle and add it to readme.md

Waiting for trajectories to complete.
Check tmux session "2ba1f138-...-A" and session "2ba1f138-...-B" for possible tool permission requests.`})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"14. Wait for Trajectory Completion"}),a.jsx("p",{children:"In the main terminal, the tool will display:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"Waiting for trajectories to complete..."}),a.jsx("p",{style:{backgroundColor:"#fee2e2",padding:"0.75rem",borderRadius:"6px",color:"#dc2626"},children:"Do not proceed until both trajectories have finished running."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"15. Review All Generated Files"}),a.jsx("p",{children:"When execution completes, carefully review the outputs of both trajectories."}),a.jsx("p",{style:{backgroundColor:"#fef3c7",padding:"0.75rem",borderRadius:"6px",color:"#92400e"},children:"Important: If you are working entirely inside VS Code, you must use Git Diff to inspect all file changes. VS Code does not automatically highlight which lines or files have changed."}),a.jsx("h3",{children:"Review Procedure"}),a.jsxs("ol",{children:[a.jsx("li",{children:"Open the VS Code Source Control panel."}),a.jsx("li",{children:"Click on every modified file."}),a.jsx("li",{children:"Examine each line-level diff."}),a.jsx("li",{children:"Confirm that all requested behavior has been implemented."}),a.jsx("li",{children:"Ensure the model did not introduce unnecessary changes or files."}),a.jsx("li",{children:"Verify that no required functionality is missing."}),a.jsx("li",{children:"If the repository includes tests, run them and confirm they pass."}),a.jsx("li",{children:"If new functionality requires additional tests, ensure they exist and are correct."})]}),a.jsx("p",{style:{backgroundColor:"#fee2e2",padding:"0.75rem",borderRadius:"6px",color:"#dc2626"},children:"Thorough file review is mandatory. Missing or incorrect diff inspection is a common cause of rejected submissions."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"16. Compare Trajectory Versions"}),a.jsx("p",{children:"After both trajectories complete, compare the differences between Version A and Version B:"}),a.jsx("h3",{children:"Version A:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",fontSize:"0.85rem"},children:`git diff

--- a/README.md
+++ b/README.md
@@ -1 +1,14 @@
 # Test

+## Riddle
+
+I have keys but no locks,
+I have space but no room,
+You can enter but can't go inside.
+
+What am I?`}),a.jsx("h3",{children:"Version B:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",fontSize:"0.85rem"},children:`git diff

diff --git a/README.md b/README.md
index 8ae0569..d73214a 100644
--- a/README.md
+++ b/README.md
@@ -1 +1,7 @@
 # Test
+
+## Riddle of the Day
+
+I speak without a mouth and hear without ears. 
+I have no body, but I come alive with wind. What am I?
+
+*Answer: An echo*`}),a.jsx("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af"},children:"Review both versions carefully and select the one that best meets the acceptance criteria."})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"17. Exit tmux Sessions"}),a.jsx("p",{children:"Once review is complete, close each tmux session:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"exit"})]}),a.jsxs("section",{className:"content-card-section",children:[a.jsx("h2",{children:"18. Uninstall / Cleanup"}),a.jsx("p",{children:"To remove the CLI tool from a repository:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"rm claude-hfi"}),a.jsx("p",{children:"To clear cached worktrees:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"rm -rf ~/.cache/claude-hfi"}),a.jsx("p",{children:"To kill all tmux sessions:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"tmux kill-server"})]}),a.jsxs("section",{className:"content-card-section",style:{borderTop:"3px solid #dc2626",paddingTop:"2rem",marginTop:"3rem"},children:[a.jsx("h2",{style:{color:"#dc2626"},children:" Troubleshooting"}),a.jsxs("div",{style:{backgroundColor:"#fef2f2",borderRadius:"12px",padding:"2rem",marginBottom:"2rem",border:"3px solid #dc2626",boxShadow:"0 4px 12px rgba(220, 38, 38, 0.15)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[a.jsx("span",{style:{fontSize:"1.5rem"},children:""}),a.jsx("h3",{style:{color:"#dc2626",margin:0,fontSize:"1.35rem",fontWeight:700},children:"Multi-Turn Workflow Requires Restarting the CLI Between Turns"})]}),a.jsxs("p",{style:{backgroundColor:"#fee2e2",padding:"1rem",borderRadius:"8px",color:"#991b1b",fontWeight:600,marginBottom:"1.5rem"},children:[a.jsx("strong",{children:" Key Takeaway:"})," The current multi-turn workflow requires quitting and restarting the CLI between turns to maintain stability."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Issue:"})," In some cases, attempting to proceed directly to a second (or later) turn within the same CLI session can result in unstable behavior, including VS Code or tmux inconsistencies."]}),a.jsxs("p",{style:{marginTop:"1rem"},children:[a.jsx("strong",{children:"Workaround (Confirmed Working):"})," Explicitly exit and relaunch the CLI tool between turns using the ",a.jsx("code",{children:"--continue"})," flag."]}),a.jsx("div",{style:{position:"relative",paddingBottom:"64.86%",height:0,marginTop:"1.5rem",marginBottom:"1.5rem",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/6537574a3bb64ee0aba07dcf2feca433",frameBorder:"0",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})}),a.jsx("p",{style:{marginTop:"1.5rem",marginBottom:"0.75rem",fontWeight:600,fontSize:"1.1rem"},children:"Recommended Multi-Turn Process:"}),a.jsxs("ol",{children:[a.jsxs("li",{children:["Start the CLI tool normally:",a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",marginTop:"0.5rem",marginBottom:"0.5rem"},children:"./claude-hfi --vscode"})]}),a.jsxs("li",{children:["Complete the first turn as usual:",a.jsxs("ul",{style:{marginTop:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx("li",{children:"Review both trajectories"}),a.jsx("li",{children:"Submit preference feedback"}),a.jsx("li",{children:'Press Enter on "submit feedback"'})]})]}),a.jsxs("li",{children:[a.jsx("strong",{style:{color:"#dc2626"},children:"Do not enter a second-turn prompt."})," When prompted for the next turn, immediately exit the tool:",a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",marginTop:"0.5rem",marginBottom:"0.5rem"},children:"Ctrl + C"})]}),a.jsxs("li",{children:["Relaunch the CLI using the continue flag:",a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",marginTop:"0.5rem",marginBottom:"0.5rem"},children:"./claude-hfi --vscode --continue"})]}),a.jsx("li",{children:"Enter the second-turn prompt and complete the turn normally."}),a.jsxs("li",{children:["After submitting feedback for that turn, again:",a.jsxs("ul",{style:{marginTop:"0.5rem",marginBottom:"0.5rem"},children:[a.jsxs("li",{children:["Press ",a.jsx("code",{children:"Ctrl + C"})," to exit"]}),a.jsxs("li",{children:["Relaunch with ",a.jsx("code",{children:"--continue"})]})]})]}),a.jsx("li",{children:"Repeat this exit  relaunch cycle for as many turns as necessary."})]}),a.jsx("p",{style:{marginTop:"1.5rem"},children:a.jsx("strong",{children:"Additional Notes:"})}),a.jsxs("ul",{children:[a.jsxs("li",{children:["tmux sessions generally persist correctly across restarts when using ",a.jsx("code",{children:"--continue"}),"."]}),a.jsx("li",{children:"Any VS Code instability observed during this process may be environment-specific rather than tool-related."}),a.jsxs("li",{children:["If unexpected tmux behavior occurs, verify session attachment using:",a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",marginTop:"0.5rem"},children:"tmux display-message -p '#S'"})]})]})]}),a.jsxs("div",{style:{backgroundColor:"#fef2f2",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",borderLeft:"4px solid #dc2626"},children:[a.jsx("h3",{style:{color:"#dc2626",marginBottom:"1rem"},children:"VS Code Window Closes After Launching the CLI"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Issue:"})," When launching the CLI tool, two VS Code windows (Trajectory A and Trajectory B) briefly open, but one of them closes automatically, leaving only one trajectory visible."]}),a.jsx("p",{style:{marginTop:"1rem"},children:a.jsx("strong",{children:"Observed Behavior:"})}),a.jsxs("ul",{children:[a.jsx("li",{children:"Both VS Code windows initially open as expected."}),a.jsx("li",{children:"Shortly after launch, either Trajectory A or Trajectory B closes."}),a.jsx("li",{children:"This behavior did not occur in earlier versions of the tool."}),a.jsx("li",{children:"The issue has been observed across multiple submissions."})]}),a.jsx("p",{style:{marginTop:"1rem"},children:a.jsx("strong",{children:"Known Context:"})}),a.jsxs("ul",{children:[a.jsxs("li",{children:["VS Code was fully closed prior to running the CLI (closed via ",a.jsx("code",{children:"Cmd + Q"})," on macOS)."]}),a.jsx("li",{children:"It is unclear whether this behavior is caused by local VS Code settings or the CLI tool itself."})]}),a.jsx("p",{style:{marginTop:"1rem",marginBottom:"0.5rem"},children:a.jsx("strong",{children:"Workaround:"})}),a.jsxs("ol",{children:[a.jsxs("li",{children:["Open a new VS Code window manually: ",a.jsx("code",{children:"File  New Window"})]}),a.jsxs("li",{children:["Then: ",a.jsx("code",{children:"File  Open Folder"})]}),a.jsx("li",{children:"Navigate to the trajectory worktree, typically located at:"})]}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto",marginTop:"0.5rem"},children:"~/.cache/claude-hfi/<project-path>/A"}),a.jsx("p",{children:"or"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"~/.cache/claude-hfi/<project-path>/B"}),a.jsx("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af",marginTop:"1rem"},children:"Both worktrees are still created correctly, even if one window closes automatically."})]}),a.jsxs("div",{style:{backgroundColor:"#fef2f2",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",borderLeft:"4px solid #dc2626"},children:[a.jsx("h3",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Lost Main Terminal Session During Execution"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Issue:"})," The main CLI terminal session is lost or closed during execution, but:"]}),a.jsxs("ul",{children:[a.jsx("li",{children:"VS Code windows remain open"}),a.jsx("li",{children:"tmux sessions are still attached and running"})]}),a.jsxs("p",{style:{marginTop:"1rem"},children:[a.jsx("strong",{children:"Recommended Solution:"})," Use the CLI's continue option to resume from the latest state."]}),a.jsx("p",{children:"Run the following command from the repository root:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"./claude-hfi --continue --vscode"}),a.jsx("p",{style:{marginTop:"1rem"},children:a.jsx("strong",{children:"Notes:"})}),a.jsxs("ul",{children:[a.jsxs("li",{children:["The ",a.jsx("code",{children:"--continue"})," flag must be used together with ",a.jsx("code",{children:"--vscode"}),"."]}),a.jsxs("li",{children:["Running ",a.jsx("code",{children:"./claude-hfi --continue"})," without ",a.jsx("code",{children:"--vscode"}),' may result in a "No such file or directory" error, even if the binary exists.']}),a.jsx("li",{children:"This command resumes from the most recent saved state and does not require restarting the task from the beginning."})]})]}),a.jsxs("div",{style:{backgroundColor:"#fef2f2",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",borderLeft:"4px solid #dc2626"},children:[a.jsx("h3",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Verifying You Are Attached to the Correct tmux Session"}),a.jsx("p",{children:"If you are unsure whether a VS Code terminal is attached to the correct tmux session, run the following command inside each trajectory terminal:"}),a.jsx("pre",{style:{backgroundColor:"#1e293b",color:"#e2e8f0",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:"tmux display-message -p '#S'"}),a.jsx("p",{style:{marginTop:"1rem"},children:"This prints the current tmux session name, allowing you to confirm whether you are attached to:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"the Trajectory A session, or"}),a.jsx("li",{children:"the Trajectory B session"})]}),a.jsx("p",{style:{backgroundColor:"#dbeafe",padding:"0.75rem",borderRadius:"6px",color:"#1e40af",marginTop:"1rem"},children:"This can be useful when reconnecting after interruptions or reopening VS Code windows."})]})]})]}),a.jsx("footer",{className:"content-card-footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}function li({title:t,children:e,defaultOpen:n=!1}){const[r,i]=ee.useState(n);return a.jsxs("div",{className:"collapsible-card",children:[a.jsxs("button",{className:"collapsible-header",onClick:()=>i(!r),children:[a.jsx("span",{children:t}),a.jsx("span",{className:"collapsible-icon",children:r?"":"+"})]}),r&&a.jsx("div",{className:"collapsible-content",children:e})]})}function Xb({onNavigate:t}){const{hasRole:e}=Yo();return ee.useEffect(()=>{window.scrollTo(0,0)},[]),!e("swe")&&!e("admin")?a.jsxs("div",{className:"access-denied",children:[a.jsx("h1",{children:"Access Denied"}),a.jsx("p",{children:"You don't have permission to view this page."}),a.jsx("button",{onClick:()=>t("home"),className:"back-button",children:"Back to Home"})]}):a.jsxs("div",{className:"landing-page",children:[a.jsx("header",{className:"header",children:a.jsx("nav",{className:"nav",children:a.jsx("button",{onClick:()=>t("home"),style:{background:"none",border:"none",cursor:"pointer",color:"#4b5563",fontWeight:500},children:" Back to Home"})})}),a.jsxs("main",{className:"main-content",children:[a.jsxs("div",{className:"hero",children:[a.jsx("h1",{className:"hero-title",children:"SWE Reviewer Guidelines"}),a.jsx("div",{className:"slack-banner",children:a.jsx("p",{className:"hero-subtitle",children:"Marlin  Prompt Review (V2)"})})]}),a.jsxs("div",{className:"overview-section",children:[a.jsx("div",{style:{backgroundColor:"#dbeafe",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #2563eb",marginBottom:"1.5rem"},children:a.jsxs("p",{style:{margin:0,color:"#1e40af",fontWeight:600},children:[" ",a.jsx("strong",{children:"Password:"})," ",a.jsx("code",{style:{backgroundColor:"#bfdbfe",padding:"0.25rem 0.5rem",borderRadius:"4px"},children:"swereviewer"})]})}),a.jsx("h3",{children:"Walkthrough Video"}),a.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,borderRadius:"8px",overflow:"hidden",marginBottom:"1.5rem"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/389774afcf99474ea9a05d7e70b79e48",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})}),a.jsx("h3",{children:"Welcome"}),a.jsx("p",{children:"Thank you for helping review Marlin Prompt Review submissions. The SWE Review step is a fast, focused quality check designed to catch clear, high-impact issues before a submission reaches full audit."}),a.jsx("div",{style:{backgroundColor:"#fef3c7",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #f59e0b",marginBottom:"1.5rem"},children:a.jsxs("p",{style:{margin:0,color:"#92400e",fontWeight:600},children:[" ",a.jsx("strong",{children:"Time Limit:"})," Each review is time-boxed to approximately ",a.jsx("strong",{children:"15 minutes"}),". You are not expected to find every issue. Your goal is to validate the most important technical claims, confirm or dispute automated evaluations, and ensure the submitter's reasoning is sound and internally consistent."]})}),a.jsx("h3",{children:"Purpose of the SWE Review"}),a.jsx("p",{children:"The SWE Review serves as an early quality filter in a multi-stage review process. By identifying obvious technical or reasoning issues early, you help reduce unnecessary work in later stages and enable faster feedback to submitters."}),a.jsxs(li,{title:"What You Are NOT Expected to Do",children:[a.jsx("p",{children:"Because this review is time-limited, you do not need to:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Install or run the repository"}),a.jsx("li",{children:"Execute tests locally"}),a.jsx("li",{children:"Deeply analyze every model turn"}),a.jsx("li",{children:"Flag or diagnose LLM usage (handled in later review stages)"})]}),a.jsx("p",{children:"If something appears suspicious, you may note it, but this is not required for acceptance or rejection at this stage."})]}),a.jsxs(li,{title:"Using the Reviewer Interface",children:[a.jsx("h4",{children:"Automated Evaluations"}),a.jsxs("p",{children:["You may see automated evaluation feedback when one of our eval tools flags a potential issue. These tools are experimentalsome evals will be correct, while others may be incomplete or incorrect. ",a.jsx("strong",{children:"Part of your role is to validate whether the flagged issue is real."})]}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/evals.png",style:{maxWidth:"500px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginTop:"1rem",marginBottom:"1rem"},alt:"Automated Evaluations"}),a.jsx("p",{style:{fontWeight:500,marginTop:"1rem",marginBottom:"0.5rem"},children:" When NOT to trust evals:"}),a.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,borderRadius:"8px",overflow:"hidden",marginBottom:"1.5rem"},children:a.jsx("iframe",{src:"https://www.loom.com/embed/8ac61d41b1c1416c817ccf652459ff52",frameBorder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})}),a.jsx("h4",{children:"Diff Viewer"}),a.jsx("p",{children:"You have access to a diff viewer showing file-level changes for each model turn. This is often the fastest and most reliable way to verify eval results or claims made in the submitter's pros, cons, or justification."}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/Diff.png",style:{maxWidth:"800px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginTop:"1rem",marginBottom:"1rem"},alt:"Diff Viewer"}),a.jsx("h4",{children:"Conversation View"}),a.jsx("p",{children:"The conversation view shows the original prompt, model responses, preference ratings, and written reasoning. In most cases, you do not need to read full model outputsfocus instead on the diffs and the claims being made about them."}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/sxs.png",style:{maxWidth:"800px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginTop:"1rem"},alt:"Conversation View"})]}),a.jsxs(li,{title:"What to Focus On During Your Review",children:[a.jsx("p",{children:"Start with any automated eval failures and determine whether they are valid. If no evals are flagged, select a small number of high-impact claims made by the submitter and verify their technical accuracy."}),a.jsxs("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginTop:"1rem"},children:[a.jsx("p",{style:{margin:0,marginBottom:"0.75rem",color:"#991b1b",fontWeight:600},children:"Pay Special Attention To:"}),a.jsxs("ul",{style:{margin:0,color:"#991b1b",paddingLeft:"1.25rem"},children:[a.jsx("li",{children:"Incorrect, missing, or incomplete file changes"}),a.jsx("li",{children:"Logic errors or broken behavior implied by the diff"}),a.jsx("li",{children:"Claims that contradict the actual code changes"}),a.jsx("li",{children:"Requested features or constraints that were not implemented"}),a.jsx("li",{children:"Inconsistencies between ratings, preferences, and written justification"})]})]}),a.jsx("p",{children:a.jsx("em",{children:"You are not expected to verify everythingfocus on the areas most likely to reveal meaningful problems."})})]}),a.jsxs(li,{title:"Accepting vs. Rejecting a Submission",children:[a.jsxs("p",{children:["You should reject a submission ",a.jsx("strong",{children:"only when there are clear, serious problems"}),". These include major technical misunderstandings, incorrect evaluation of model behavior, contradictions between reasoning and evidence, or violations of core project rules."]}),a.jsxs("p",{children:["If an issue is debatable or you are uncertain, it is generally better to ",a.jsx("strong",{children:"accept the submission and clearly explain your uncertainty in the notes"}),". The final adjudicator will use your findings to make the ultimate decision."]})]}),a.jsxs(li,{title:"Rejection-Worthy Reasons",children:[a.jsx("p",{children:"A submission should be rejected only when one or more of the following are clearly and confidently true:"}),a.jsxs("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginBottom:"1rem"},children:[a.jsx("p",{style:{margin:0,marginBottom:"0.5rem",color:"#991b1b",fontWeight:600},children:" Incorrect Overall Preference"}),a.jsx("p",{style:{margin:0,color:"#991b1b"},children:"The overall preference for a turn you evaluated is clearly and significantly incorrect, and that incorrect choice is supported by reasoning that does not match the actual evidence."})]}),a.jsxs("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginBottom:"1rem"},children:[a.jsx("p",{style:{margin:0,marginBottom:"0.5rem",color:"#991b1b",fontWeight:600},children:" Core Project Guidelines Not Followed"}),a.jsxs("ul",{style:{margin:0,color:"#991b1b",paddingLeft:"1.25rem"},children:[a.jsx("li",{children:"The prompt uses role-based prompting"}),a.jsx("li",{children:"The prompt directly refers to the PR"}),a.jsx("li",{children:"Later turns introduce new core requirements that should reasonably have been part of the original prompt"})]})]}),a.jsxs("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626",marginBottom:"1rem"},children:[a.jsx("p",{style:{margin:0,marginBottom:"0.5rem",color:"#991b1b",fontWeight:600},children:" Significant Contradictions"}),a.jsx("p",{style:{margin:0,marginBottom:"0.5rem",color:"#991b1b"},children:"Contradictions that cannot be explained by nuance or reasonable differences of opinion:"}),a.jsxs("ul",{style:{margin:0,color:"#991b1b",paddingLeft:"1.25rem"},children:[a.jsx("li",{children:"Turn 1 explicitly instructs the model not to add comments, but the cons section criticizes the model for not adding comments"}),a.jsx("li",{children:"Turn 1 asks for a new test file to be added, while turn 2 asks for that same test file to be deleted"})]})]}),a.jsxs("div",{style:{backgroundColor:"#fee2e2",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #dc2626"},children:[a.jsx("p",{style:{margin:0,marginBottom:"0.5rem",color:"#991b1b",fontWeight:600},children:" Spam or Fabricated Reasoning"}),a.jsxs("ul",{style:{margin:0,color:"#991b1b",paddingLeft:"1.25rem"},children:[a.jsx("li",{children:"Pros, cons, or justifications that are completely disconnected from the actual diff or model output"}),a.jsx("li",{children:"Praising a model for work it did not do (e.g., claiming a model added tests when no tests were added)"})]})]})]}),a.jsxs(li,{title:"Issues You Can Flag (Accept, but Add Notes)",children:[a.jsxs("p",{children:["Some issues are important to note but are not sufficient on their own to justify rejection. In these cases, you should ",a.jsx("strong",{children:"accept the submission and clearly document your concerns"})," for the final adjudicator."]}),a.jsxs("div",{style:{backgroundColor:"#fef3c7",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #f59e0b",marginBottom:"1rem"},children:[a.jsx("p",{style:{margin:0,marginBottom:"0.5rem",color:"#92400e",fontWeight:600},children:" Accept with Notes When:"}),a.jsxs("ul",{style:{margin:0,color:"#92400e",paddingLeft:"1.25rem"},children:[a.jsx("li",{children:"Signs of LLM use"}),a.jsx("li",{children:"Disagreement with individual side-by-side (SxS) scores"}),a.jsx("li",{children:"SxS scores that appear suspiciously similar to each other"}),a.jsx("li",{children:"Any rejection-worthy concern where you are not 100% confident"})]})]}),a.jsx("div",{style:{backgroundColor:"#dbeafe",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #2563eb"},children:a.jsxs("p",{style:{margin:0,color:"#1e40af"},children:[a.jsx("strong",{children:"Important:"})," Agreeing with an automated eval failure is not enough, by itself, to reject a submission. Always ensure the failure clearly fits one of the rejection-worthy categories before rejecting."]})})]}),a.jsx("h3",{children:"Writing Your Review Notes"}),a.jsx("p",{children:"In your review fields, clearly describe what you checked and whether you agreed or disagreed, grounding your conclusions in concrete evidence from diffs or expected behavior."}),a.jsxs("div",{style:{backgroundColor:"#f8fafc",padding:"1rem 1.25rem",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"1rem"},children:[a.jsx("p",{style:{margin:0,marginBottom:"0.5rem",fontWeight:600},children:"Example Format"}),a.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"0.75rem",borderRadius:"4px",border:"1px solid #e2e8f0",fontFamily:"monospace",fontSize:"0.875rem"},children:[a.jsxs("p",{style:{margin:0,marginBottom:"0.5rem"},children:[" Submitter claimed Option A updated file X correctly  ",a.jsx("strong",{children:"Disagreed"}),"; diff shows missing change."]}),a.jsxs("p",{style:{margin:0,marginBottom:"0.5rem"},children:[" Eval flagged missing tests  ",a.jsx("strong",{children:"Confirmed via diff"}),"."]}),a.jsxs("p",{style:{margin:0},children:[" Submitter stated Option B added redundant logic  ",a.jsx("strong",{children:"Confirmed"}),"."]})]})]}),a.jsx("div",{style:{backgroundColor:"#fef3c7",padding:"1rem 1.25rem",borderRadius:"8px",borderLeft:"4px solid #f59e0b",marginBottom:"1.5rem"},children:a.jsxs("p",{style:{margin:0,color:"#92400e"},children:[a.jsx("strong",{children:"If You Reject:"})," You must write clear, professional, and actionable rejection notes explaining why the submission cannot be accepted. These notes are visible to the submitter. If the reasoning appears generic or non-technical, you may describe those observable issues, but ",a.jsx("strong",{children:"do not speculate about or diagnose LLM usage"}),"."]})}),a.jsx("h3",{children:"How Your Review Is Evaluated"}),a.jsxs("p",{children:["You are ",a.jsx("strong",{children:"not evaluated on whether you accept or reject"})," a submission. Instead, we assess the accuracy, clarity, and usefulness of your written evaluations."]}),a.jsxs("div",{style:{backgroundColor:"#f8fafc",padding:"1rem 1.25rem",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"1rem"},children:[a.jsx("p",{style:{margin:0,marginBottom:"0.5rem",fontWeight:600},children:"We Want to See Evidence That You:"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[a.jsx("li",{children:"Validated eval results honestly"}),a.jsx("li",{children:"Investigated high-impact claims"}),a.jsx("li",{children:"Explained your conclusions clearly"}),a.jsx("li",{children:"Worked effectively within the 15-minute time limit"})]})]}),a.jsx("p",{children:a.jsx("em",{children:"Missing lower-priority issues is expected and will not be held against you."})}),a.jsx("h3",{children:"Final Reviewer Checklist"}),a.jsx("p",{children:"Before submitting, confirm that you:"}),a.jsxs("ul",{children:[a.jsx("li",{children:" Investigated at least one high-impact technical claim or eval"}),a.jsx("li",{children:" Confirmed or disputed eval results with evidence"}),a.jsx("li",{children:" Checked alignment between ratings, reasoning, and diffs"}),a.jsx("li",{children:" Made a defensible Accept or Reject decision"}),a.jsx("li",{children:" Wrote clear notes explaining your findings"})]}),a.jsx("h3",{children:"Rejection Notes Field"}),a.jsx("img",{src:"/Marlin-EC-Training/media/images/5.png",style:{maxWidth:"800px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginTop:"0.5rem"},alt:"Rejection notes"})]})]}),a.jsx("footer",{className:"footer",children:a.jsx("p",{children:" 2025 Marlin EC Training. All rights reserved."})})]})}const rl=[{value:"",label:"Contributor",color:"#64748b",desc:"Regular contributor (default)"},{value:"swe",label:"SWE",color:"#2563eb",desc:"Software engineer"},{value:"generalist",label:"Generalist",color:"#7c3aed",desc:"LLM reviewer"}],ky=[...rl,{value:"admin",label:"Admin",color:"#dc2626",desc:"Full access + user management"}];function Jb({onNavigate:t}){const{userRoles:e,hasRole:n,currentUser:r}=Yo(),[i,s]=ee.useState([]),[o,c]=ee.useState(!0),[u,d]=ee.useState(""),[p,m]=ee.useState(""),[y,R]=ee.useState(""),[b,N]=ee.useState(""),[L,S]=ee.useState(""),[w,T]=ee.useState({type:"",text:""}),[j,F]=ee.useState("single");if(!n("admin"))return a.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f1f5f9"},children:a.jsxs("div",{style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[a.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Access Denied"}),a.jsx("p",{children:"You need admin privileges to access this page."})]})});ee.useEffect(()=>{U()},[]);async function U(){try{c(!0);const ne=(await f1(el(Vr,"whitelist"))).docs.map(ae=>({id:ae.id,email:ae.data().email,role:ae.data().role||""}));s(ne.sort((ae,O)=>ae.email.localeCompare(O.email)))}catch(z){console.error("Failed to fetch users:",z),_("error","Failed to load users")}finally{c(!1)}}function _(z,ne){T({type:z,text:ne}),setTimeout(()=>T({type:"",text:""}),4e3)}async function v(){const z=y.trim().toLowerCase();if(!z)return _("error","Please enter an email");if(!z.includes("@"))return _("error","Invalid email format");if(i.find(ne=>ne.email===z))return _("error","User already exists");try{const ne={email:z};b&&(ne.role=b);const ae=await jb(el(Vr,"whitelist"),ne);s([...i,{id:ae.id,email:z,role:b}].sort((O,H)=>O.email.localeCompare(H.email))),R(""),_("success",`Added ${z}`)}catch(ne){console.error("Failed to add user:",ne),_("error","Failed to add user")}}async function x(){const z=u.split(/[\n,]/).map(O=>O.trim().toLowerCase()).filter(O=>O&&O.includes("@"));if(z.length===0)return _("error","No valid emails found");const ne=z.filter(O=>i.find(H=>H.email===O)),ae=z.filter(O=>!i.find(H=>H.email===O));if(ae.length===0)return _("error","All emails already exist");try{const O=Db(Vr),H=[];for(const ue of ae){const fe=tl(el(Vr,"whitelist")),Kt={email:ue};p&&(Kt.role=p),O.set(fe,Kt),H.push({id:fe.id,email:ue,role:p})}await O.commit(),s([...i,...H].sort((ue,fe)=>ue.email.localeCompare(fe.email))),d("");const J=ne.length>0?`Added ${ae.length} users (${ne.length} already existed)`:`Added ${ae.length} users`;_("success",J)}catch(O){console.error("Bulk add failed:",O),_("error","Failed to add users")}}async function I(z,ne){if(ne===(r==null?void 0:r.email))return _("error","You can't remove yourself");try{await Pb(tl(Vr,"whitelist",z)),s(i.filter(ae=>ae.id!==z)),_("success",`Removed ${ne}`)}catch(ae){console.error("Failed to remove user:",ae),_("error","Failed to remove user")}}async function C(z,ne,ae){if(ne===(r==null?void 0:r.email)&&ae!=="admin")return _("error","You can't remove your own admin role");try{const O=tl(Vr,"whitelist",z);ae?await Ay(O,{role:ae}):await Ay(O,{role:""}),s(i.map(H=>H.id===z?{...H,role:ae}:H)),_("success",`Updated role for ${ne}`)}catch(O){console.error("Failed to update role:",O),_("error","Failed to update role")}}const k=z=>{const ne=Array.isArray(z)?z[0]||"":z,ae=ky.find(O=>O.value===ne)||ky[0];return{backgroundColor:ae.color+"20",color:ae.color,border:`1px solid ${ae.color}40`}},E=z=>Array.isArray(z)?z.length>0?z.join(", "):"Contributor":z||"Contributor",be=i.filter(z=>{const ne=L.toLowerCase(),ae=z.email.toLowerCase().includes(ne),H=(Array.isArray(z.role)?z.role.join(" "):z.role||"contributor").toLowerCase().includes(ne);return ae||H});return o?a.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f1f5f9"},children:a.jsx("p",{style:{color:"#64748b"},children:"Loading users..."})}):a.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f1f5f9",padding:"2rem"},children:a.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("button",{onClick:()=>t("home"),style:{background:"none",border:"none",color:"#1e40af",cursor:"pointer",fontSize:"1rem",fontWeight:"500",padding:"0",marginBottom:"1rem"},children:" Back to Home"}),a.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#1e293b"},children:" User Management"}),a.jsx("p",{style:{color:"#64748b",marginTop:"0.25rem"},children:"Add and manage whitelisted users"})]}),w.text&&a.jsx("div",{style:{padding:"1rem",borderRadius:"8px",marginBottom:"1rem",backgroundColor:w.type==="success"?"#dcfce7":"#fee2e2",color:w.type==="success"?"#16a34a":"#dc2626"},children:w.text}),a.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[a.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"1px solid #e2e8f0",paddingBottom:"1rem"},children:[a.jsx("button",{onClick:()=>F("single"),style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"none",cursor:"pointer",fontWeight:"500",backgroundColor:j==="single"?"#1e40af":"#f1f5f9",color:j==="single"?"#fff":"#64748b"},children:" Add Single User"}),a.jsx("button",{onClick:()=>F("bulk"),style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"none",cursor:"pointer",fontWeight:"500",backgroundColor:j==="bulk"?"#1e40af":"#f1f5f9",color:j==="bulk"?"#fff":"#64748b"},children:" Bulk Import"})]}),j==="single"?a.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[a.jsx("input",{type:"email",value:y,onChange:z=>R(z.target.value),placeholder:"email@example.com",style:{flex:"1",minWidth:"200px",padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"0.95rem"},onKeyDown:z=>z.key==="Enter"&&v()}),a.jsx("select",{value:b,onChange:z=>N(z.target.value),style:{padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"0.95rem",minWidth:"140px"},children:rl.map(z=>a.jsx("option",{value:z.value,children:z.label},z.value))}),a.jsx("button",{onClick:v,style:{padding:"0.75rem 1.5rem",backgroundColor:"#1e40af",color:"#fff",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:"Add User"})]}):a.jsxs("div",{children:[a.jsx("p",{style:{color:"#64748b",fontSize:"0.875rem",marginBottom:"0.75rem"},children:"Paste emails separated by commas or new lines"}),a.jsx("textarea",{value:u,onChange:z=>d(z.target.value),placeholder:`user1@example.com
user2@company.com
user3@org.net`,rows:5,style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"0.95rem",resize:"vertical",boxSizing:"border-box",fontFamily:"inherit"}}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"0.75rem",alignItems:"center",flexWrap:"wrap"},children:[a.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:"Assign role:"}),a.jsx("select",{value:p,onChange:z=>m(z.target.value),style:{padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"0.95rem"},children:rl.map(z=>a.jsxs("option",{value:z.value,children:[z.label," - ",z.desc]},z.value))}),a.jsx("button",{onClick:x,style:{padding:"0.75rem 1.5rem",backgroundColor:"#16a34a",color:"#fff",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer",marginLeft:"auto"},children:"Import All"})]})]})]}),a.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("h2",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#1e293b"},children:[" Whitelisted Users (",i.length,")"]}),a.jsx("input",{type:"text",value:L,onChange:z=>S(z.target.value),placeholder:" Search users...",style:{padding:"0.5rem 0.75rem",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"0.875rem",width:"200px"}})]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{borderBottom:"2px solid #e2e8f0"},children:[a.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"#64748b",fontWeight:"600",fontSize:"0.875rem"},children:"Email"}),a.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"#64748b",fontWeight:"600",fontSize:"0.875rem"},children:"Role"}),a.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"#64748b",fontWeight:"600",fontSize:"0.875rem"},children:"Actions"})]})}),a.jsxs("tbody",{children:[be.map(z=>a.jsxs("tr",{style:{borderBottom:"1px solid #f1f5f9"},children:[a.jsxs("td",{style:{padding:"0.75rem",fontSize:"0.95rem",color:"#334155"},children:[z.email,z.email===(r==null?void 0:r.email)&&a.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.75rem",color:"#64748b"},children:"(you)"})]}),a.jsx("td",{style:{padding:"0.75rem"},children:Array.isArray(z.role)?a.jsx("span",{style:{padding:"0.35rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500",...k(z.role)},children:E(z.role)}):a.jsx("select",{value:z.role,onChange:ne=>C(z.id,z.email,ne.target.value),style:{padding:"0.35rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500",cursor:"pointer",...k(z.role)},children:rl.map(ne=>a.jsx("option",{value:ne.value,children:ne.label},ne.value))})}),a.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:a.jsx("button",{onClick:()=>I(z.id,z.email),style:{padding:"0.4rem 0.6rem",backgroundColor:"#fee2e2",color:"#dc2626",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},title:"Remove user",children:" Remove"})})]},z.id)),be.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:3,style:{padding:"2rem",textAlign:"center",color:"#94a3b8"},children:L?"No users match your search":"No users added yet"})})]})]})})]})]})})}function Zb(){const[t,e]=ee.useState("home"),{currentUser:n,logout:r}=Yo(),i=s=>{e(s)};return n?a.jsxs("div",{className:"app",children:[t==="home"&&a.jsx(zb,{onNavigate:i,onLogout:r}),t==="faq"&&a.jsx(Wb,{onNavigate:i}),t==="glossary"&&a.jsx(qb,{onNavigate:i}),t==="overview"&&a.jsx($b,{onNavigate:i}),t==="prselection"&&a.jsx(Hb,{onNavigate:i}),t==="promptpreparation"&&a.jsx(Gb,{onNavigate:i}),t==="modelworkspace"&&a.jsx(Kb,{onNavigate:i}),t==="rulesandrequirements"&&a.jsx(Qb,{onNavigate:i}),t==="cli"&&a.jsx(Yb,{onNavigate:i}),t==="sweguidelines"&&a.jsx(Xb,{onNavigate:i}),t==="adminpanel"&&a.jsx(Jb,{onNavigate:i})]}):a.jsx(Bb,{onLoginSuccess:()=>e("home")})}function eP(){return a.jsx(Ub,{children:a.jsx(Zb,{})})}z0(document.getElementById("root")).render(a.jsx(ee.StrictMode,{children:a.jsx(eP,{})}));
